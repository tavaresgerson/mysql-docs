### 8.8.5 Estimando a Performance de Querys

Na maioria dos casos, você pode estimar a performance de uma Query contando os disk seeks (buscas em disco). Para tabelas pequenas, geralmente você pode encontrar uma linha em um único disk seek (porque o Index provavelmente está em cache). Para tabelas maiores, você pode estimar que, usando Indexes B-tree, você precisa de essa quantidade de seeks para encontrar uma linha: `log(row_count) / log(index_block_length / 3 * 2 / (index_length + data_pointer_length)) + 1`.

No MySQL, um Index block tem geralmente 1.024 bytes e o data pointer é tipicamente de quatro bytes. Para uma tabela com 500.000 linhas e um key value length de três bytes (o tamanho de `MEDIUMINT` - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT"), a fórmula indica `log(500,000)/log(1024/3*2/(3+4)) + 1` = `4` seeks.

Este Index exigiria um armazenamento de cerca de 500.000 * 7 * 3/2 = 5.2MB (assumindo uma taxa de preenchimento de Index Buffer típica de 2/3), então você provavelmente tem grande parte do Index na memória e precisa de apenas uma ou duas chamadas para ler os dados e encontrar a linha.

Para operações de escrita (*writes*), no entanto, você precisa de quatro solicitações de seek para encontrar onde colocar um novo valor de Index e normalmente dois seeks para atualizar o Index e escrever a linha.

A discussão anterior não significa que a performance da sua aplicação se degrada lentamente por log *`N`*. Contanto que tudo esteja em cache pelo OS (Sistema Operacional) ou pelo servidor MySQL, as coisas se tornam apenas marginalmente mais lentas à medida que a tabela cresce. Depois que os dados se tornam muito grandes para serem armazenados em cache, as coisas começam a ficar muito mais lentas até que suas aplicações fiquem limitadas apenas pelos disk seeks (que aumentam por log *`N`*). Para evitar isso, aumente o tamanho do key cache à medida que os dados crescem. Para tabelas `MyISAM`, o tamanho do key cache é controlado pela variável de sistema `key_buffer_size`. Consulte a Seção 5.1.1, “Configurando o Servidor”.