#### 21.2.6.1 Diferenças Entre os Motores de Armazenamento NDB e InnoDB

O motor de armazenamento [`NDB`](mysql-cluster.html "Capítulo 21 MySQL NDB Cluster 7.5 e NDB Cluster 7.6") é implementado usando uma arquitetura distribuída, *shared-nothing*, o que faz com que ele se comporte de maneira diferente do [`InnoDB`](innodb-storage-engine.html "Capítulo 14 O Motor de Armazenamento InnoDB") em vários aspectos. Para aqueles não acostumados a trabalhar com [`NDB`](mysql-cluster.html "Capítulo 21 MySQL NDB Cluster 7.5 e NDB Cluster 7.6"), comportamentos inesperados podem surgir devido à sua natureza distribuída em relação a Transactions, Foreign Keys, limites de tabelas e outras características. Estas são mostradas na tabela a seguir:

**Tabela 21.1 Diferenças entre os motores de armazenamento InnoDB e NDB**

<table><col style="width: 33%"/><col style="width: 34%"/><col style="width: 33%"/><thead><tr> <th>Característica</th> <th><code>InnoDB</code> (MySQL 5.7)</th> <th><code>NDB</code> 7.5/7.6</th> </tr></thead><tbody><tr> <th><span><em>Versão do MySQL Server</em></span></th> <td>5.7</td> <td>5.7</td> </tr><tr> <th><span><em>Versão do <code>InnoDB</code> </em></span></th> <td><code>InnoDB</code> 5.7.44</td> <td><code>InnoDB</code> 5.7.44</td> </tr><tr> <th><span><em>Versão do NDB Cluster</em></span></th> <td>N/A</td> <td><code>NDB</code> 7.5.36/7.6.36</td> </tr><tr> <th><span><em>Limites de Armazenamento</em></span></th> <td>64TB</td> <td>128TB (a partir do NDB 7.5.2)</td> </tr><tr> <th><span><em>Foreign Keys</em></span></th> <td>Sim</td> <td>Sim</td> </tr><tr> <th><span><em>Transactions</em></span></th> <td>Todos os tipos padrão</td> <td><code>READ COMMITTED</code></td> </tr><tr> <th><span><em>MVCC</em></span></th> <td>Sim</td> <td>Não</td> </tr><tr> <th><span><em>Compressão de Dados</em></span></th> <td>Sim</td> <td>Não (Arquivos de checkpoint e backup do NDB podem ser compactados)</td> </tr><tr> <th><span><em>Suporte a Linhas Grandes (&gt; 14K)</em></span></th> <td>Suportado para colunas <code>VARBINARY</code>, <code>VARCHAR</code>, <code>BLOB</code> e <code>TEXT</code></td> <td>Suportado apenas para colunas <code>BLOB</code> e <code>TEXT</code> (Usar esses tipos para armazenar grandes volumes de dados pode reduzir o desempenho do NDB)</td> </tr><tr> <th><span><em>Suporte à Replication</em></span></th> <td>Replication assíncrona e semissíncrona usando MySQL Replication; MySQL Group Replication</td> <td>Replication síncrona automática dentro de um NDB Cluster; Replication assíncrona entre NDB Clusters, usando MySQL Replication (Replication semissíncrona não é suportada)</td> </tr><tr> <th><span><em>Scaleout para Operações de Leitura</em></span></th> <td>Sim (MySQL Replication)</td> <td>Sim (Particionamento automático no NDB Cluster; NDB Cluster Replication)</td> </tr><tr> <th><span><em>Scaleout para Operações de Escrita</em></span></th> <td>Requer particionamento no nível da aplicação (sharding)</td> <td>Sim (O particionamento automático no NDB Cluster é transparente para as aplicações)</td> </tr><tr> <th><span><em>Alta Disponibilidade (HA)</em></span></th> <td>Incorporada, a partir do InnoDB cluster</td> <td>Sim (Projetado para 99,999% de uptime)</td> </tr><tr> <th><span><em>Recuperação de Falha de Node e Failover</em></span></th> <td>Via MySQL Group Replication</td> <td>Automática (Elemento chave na arquitetura NDB)</td> </tr><tr> <th><span><em>Tempo para Recuperação de Falha de Node</em></span></th> <td>30 segundos ou mais</td> <td>Tipicamente &lt; 1 segundo</td> </tr><tr> <th><span><em>Desempenho em Tempo Real</em></span></th> <td>Não</td> <td>Sim</td> </tr><tr> <th><span><em>Tabelas In-Memory</em></span></th> <td>Não</td> <td>Sim (Alguns dados podem opcionalmente ser armazenados em disco; tanto o armazenamento de dados in-memory quanto em disco são duráveis)</td> </tr><tr> <th><span><em>Acesso NoSQL ao Storage Engine</em></span></th> <td>Sim</td> <td>Sim (Múltiplas APIs, incluindo Memcached, Node.js/JavaScript, Java, JPA, C++, e HTTP/REST)</td> </tr><tr> <th><span><em>Escritas Concorrentes e Paralelas</em></span></th> <td>Sim</td> <td>Até 48 writers, otimizado para escritas concorrentes</td> </tr><tr> <th><span><em>Detecção e Resolução de Conflitos (Múltiplas Fontes de Replication)</em></span></th> <td>Sim (MySQL Group Replication)</td> <td>Sim</td> </tr><tr> <th><span><em>Hash Indexes</em></span></th> <td>Não</td> <td>Sim</td> </tr><tr> <th><span><em>Adição Online de Nodes</em></span></th> <td>Réplicas de leitura/escrita usando MySQL Group Replication</td> <td>Sim (todos os tipos de node)</td> </tr><tr> <th><span><em>Upgrades Online</em></span></th> <td>Sim (usando replication)</td> <td>Sim</td> </tr><tr> <th><span><em>Modificações de Schema Online</em></span></th> <td>Sim, como parte do MySQL 5.7</td> <td>Sim</td> </tr> </tbody></table>