#### 21.2.6.1 Diferenças entre os motores de armazenamento NDB e InnoDB

O mecanismo de armazenamento `NDB` é implementado usando uma arquitetura distribuída e sem compartilhamento, o que faz com que ele se comporte de maneira diferente do `InnoDB` de várias maneiras. Para aqueles não acostumados a trabalhar com `NDB`, comportamentos inesperados podem surgir devido à sua natureza distribuída em relação a transações, chaves estrangeiras, limites de tabela e outras características. Isso é mostrado na tabela a seguir:

**Tabela 21.1 Diferenças entre os motores de armazenamento InnoDB e NDB**

<table><col style="width: 33%"/><col style="width: 34%"/><col style="width: 33%"/><thead><tr> <th>Característica</th> <th>PH_HTML_CODE_<code>TEXT</code>] (MySQL 5.7)</th> <th>PH_HTML_CODE_<code>TEXT</code>] 7,5/7,6</th> </tr></thead><tbody><tr> <th><span class="emphasis"><em>Versão do servidor MySQL</em></span></th> <td>5,7</td> <td>5,7</td> </tr><tr> <th><span class="emphasis"><em>PH_HTML_CODE_<code>TEXT</code>]Versão</em></span></th> <td><code>InnoDB</code>5.7.44</td> <td><code>InnoDB</code>5.7.44</td> </tr><tr> <th><span class="emphasis"><em>Versão do NDB Cluster</em></span></th> <td>N/A</td> <td><code>NDB</code>7.5.36/7.6.36</td> </tr><tr> <th><span class="emphasis"><em>Limites de armazenamento</em></span></th> <td>64 TB</td> <td>128 TB (a partir da NDB 7.5.2)</td> </tr><tr> <th><span class="emphasis"><em>Chaves Estrangeiras</em></span></th> <td>Sim</td> <td>Sim</td> </tr><tr> <th><span class="emphasis"><em>Transações</em></span></th> <td>Todos os tipos padrão</td> <td><code>READ COMMITTED</code></td> </tr><tr> <th><span class="emphasis"><em>MVCC</em></span></th> <td>Sim</td> <td>Não</td> </tr><tr> <th><span class="emphasis"><em>Compressão de dados</em></span></th> <td>Sim</td> <td>Não (os pontos de verificação NDB e os arquivos de backup podem ser comprimidos)</td> </tr><tr> <th><span class="emphasis"><em>Suporte para linhas grandes (&gt; 14K)</em></span></th> <td>Suportado para<code>VARBINARY</code>,<code>VARCHAR</code>,<code>BLOB</code>, e<code>TEXT</code>colunas</td> <td>Suportado para<code>NDB</code><code>TEXT</code>]e<code>TEXT</code>colunas apenas (usar esses tipos para armazenar grandes quantidades de dados pode reduzir o desempenho do NDB)</td> </tr><tr> <th><span class="emphasis"><em>Suporte à replicação</em></span></th> <td>Replicação assíncrona e semi-síncrona usando a replicação do MySQL; MySQLReplicação em grupo</td> <td>Replicação síncrona automática dentro de um NDB Cluster; replicação assíncrona entre NDB Clusters, usando a replicação MySQL (a replicação semi-síncrona não é suportada)</td> </tr><tr> <th><span class="emphasis"><em>Escalabilidade para operações de leitura</em></span></th> <td>Sim (Replicação do MySQL)</td> <td>Sim (partição automática no NDB Cluster; NDB Cluster Replication)</td> </tr><tr> <th><span class="emphasis"><em>Escalabilidade para operações de escrita</em></span></th> <td>Requer particionamento de nível de aplicativo (sharding)</td> <td>Sim (a partição automática no NDB Cluster é transparente para as aplicações)</td> </tr><tr> <th><span class="emphasis"><em>Alta disponibilidade (HA)</em></span></th> <td>Incorporado, a partir do cluster InnoDB</td> <td>Sim (Projetado para 99,999% de tempo de atividade)</td> </tr><tr> <th><span class="emphasis"><em>Recuperação de falha no nó e failover</em></span></th> <td>Do grupo de replicação MySQL</td> <td>Automático (elemento chave na arquitetura NDB)</td> </tr><tr> <th><span class="emphasis"><em>Tempo para recuperação após falha no nó</em></span></th> <td>30 segundos ou mais</td> <td>Normalmente, < 1 segundo</td> </tr><tr> <th><span class="emphasis"><em>Desempenho em tempo real</em></span></th> <td>Não</td> <td>Sim</td> </tr><tr> <th><span class="emphasis"><em>Tabelas em Memória</em></span></th> <td>Não</td> <td>Sim (alguns dados podem ser armazenados opcionalmente em disco; tanto o armazenamento de dados em memória quanto o armazenamento em disco são duráveis)</td> </tr><tr> <th><span class="emphasis"><em>Acesso a motores de armazenamento NoSQL</em></span></th> <td>Sim</td> <td>Sim (Múltiplas APIs, incluindo Memcached, Node.js/JavaScript, Java, JPA, C++ e HTTP/REST)</td> </tr><tr> <th><span class="emphasis"><em>Escritas concorrentes e paralelas</em></span></th> <td>Sim</td> <td>Até 48 escritores, otimizados para gravações concorrentes</td> </tr><tr> <th><span class="emphasis"><em>Detecção e resolução de conflitos (diversos recursos de replicação)</em></span></th> <td>Sim (Replicação em Grupo do MySQL)</td> <td>Sim</td> </tr><tr> <th><span class="emphasis"><em>Índices de Hash</em></span></th> <td>Não</td> <td>Sim</td> </tr><tr> <th><span class="emphasis"><em>Adição de nós online</em></span></th> <td>Leia/escreva réplicas usando a Replicação por Grupo do MySQL</td> <td>Sim (todos os tipos de nós)</td> </tr><tr> <th><span class="emphasis"><em>Atualizações online</em></span></th> <td>Sim (usando replicação)</td> <td>Sim</td> </tr><tr> <th><span class="emphasis"><em>Modificações de esquema online</em></span></th> <td>Sim, como parte do MySQL 5.7</td> <td>Sim</td> </tr></tbody></table>
