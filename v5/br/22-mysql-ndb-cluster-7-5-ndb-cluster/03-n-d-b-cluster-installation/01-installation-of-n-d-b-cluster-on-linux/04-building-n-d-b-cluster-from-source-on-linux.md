#### 21.3.1.4 Compilando o NDB Cluster a partir do Código Fonte no Linux

Esta seção fornece informações sobre como compilar o NDB Cluster no Linux e em outras plataformas tipo Unix. Compilar o NDB Cluster a partir do código fonte é semelhante a compilar o MySQL Server padrão, embora difira em alguns pontos-chave discutidos aqui. Para informações gerais sobre como compilar o MySQL a partir do código fonte, consulte [Seção 2.8, “Instalando o MySQL a partir do Código Fonte”](source-installation.html "2.8 Instalando o MySQL a partir do Código Fonte"). Para informações sobre como compilar o NDB Cluster em plataformas Windows, consulte [Seção 21.3.2.2, “Compilando e Instalando o NDB Cluster a partir do Código Fonte no Windows”](mysql-cluster-install-windows-source.html "21.3.2.2 Compilando e Instalando o NDB Cluster a partir do Código Fonte no Windows").

A compilação do NDB Cluster requer o uso dos códigos fonte do NDB Cluster. Estes estão disponíveis na página de downloads do NDB Cluster em <https://dev.mysql.com/downloads/cluster/>. O arquivo de código fonte compactado deve ter um nome semelhante a `mysql-cluster-gpl-7.6.35.tar.gz`. Você também pode obter os códigos fonte do NDB Cluster no GitHub em <https://github.com/mysql/mysql-server/tree/cluster-7.5> (NDB 7.5) e <https://github.com/mysql/mysql-server/tree/cluster-7.6> (NDB 7.6). *Não há suporte para compilar o NDB Cluster 7.5 ou 7.6 a partir dos códigos fonte padrão do MySQL Server 5.7*.

A opção [`WITH_NDBCLUSTER_STORAGE_ENGINE`](source-configuration-options.html#option_cmake_with_ndbcluster_storage_engine) para o **CMake** faz com que os binaries para os management nodes, data nodes e outros programas do NDB Cluster sejam construídos; ela também faz com que o [**mysqld**](mysqld.html "4.3.1 mysqld — The MySQL Server") seja compilado com suporte ao storage engine [NDB](mysql-cluster.html "Chapter 21 MySQL NDB Cluster 7.5 and NDB Cluster 7.6"). Esta opção (ou seu alias [`WITH_NDBCLUSTER`](source-configuration-options.html#option_cmake_with_ndbcluster)) é obrigatória ao compilar o NDB Cluster.

Importante

A opção [`WITH_NDB_JAVA`](source-configuration-options.html#option_cmake_with_ndb_java) é habilitada por padrão. Isso significa que, por padrão, se o **CMake** não conseguir encontrar a localização do Java no seu sistema, o processo de configuração falha; se você não deseja habilitar o suporte a Java e ClusterJ, você deve indicar isso explicitamente configurando a build usando `-DWITH_NDB_JAVA=OFF`. Use [`WITH_CLASSPATH`](source-configuration-options.html#option_cmake_with_classpath) para fornecer o Java classpath, se necessário.

Para mais informações sobre opções do **CMake** específicas para a compilação do NDB Cluster, consulte [Opções do CMake para Compilar o NDB Cluster](source-configuration-options.html#cmake-mysql-cluster-options "Opções do CMake para Compilar o NDB Cluster").

Depois de executar **make && make install** (ou o equivalente do seu sistema), o resultado é semelhante ao obtido ao descompactar um binary pré-compilado no mesmo local.

**Management nodes.** Ao compilar a partir do código fonte e executar o **make install** padrão, os binaries do servidor de gerenciamento e do cliente de gerenciamento ([**ndb_mgmd**](mysql-cluster-programs-ndb-mgmd.html "21.5.4 ndb_mgmd — The NDB Cluster Management Server Daemon") e [**ndb_mgm**](mysql-cluster-programs-ndb-mgm.html "21.5.5 ndb_mgm — The NDB Cluster Management Client")) podem ser encontrados em `/usr/local/mysql/bin`. Apenas [**ndb_mgmd**](mysql-cluster-programs-ndb-mgmd.html "21.5.4 ndb_mgmd — The NDB Cluster Management Server Daemon") é exigido em um host de management node; no entanto, também é uma boa prática ter [**ndb_mgm**](mysql-cluster-programs-ndb-mgm.html "21.5.5 ndb_mgm — The NDB Cluster Management Client") presente na mesma máquina host. Nenhum desses executáveis requer uma localização específica no file system da máquina host.

**Data nodes.** O único executável necessário em um host de data node é o binary do data node [**ndbd**](mysql-cluster-programs-ndbd.html "21.5.1 ndbd — The NDB Cluster Data Node Daemon") ou [**ndbmtd**](mysql-cluster-programs-ndbmtd.html "21.5.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)"). (O [**mysqld**](mysqld.html "4.3.1 mysqld — The MySQL Server"), por exemplo, não precisa estar presente na máquina host.) Por padrão, ao compilar a partir do código fonte, este arquivo é colocado no diretório `/usr/local/mysql/bin`. Para instalar em múltiplos hosts de data node, apenas [**ndbd**](mysql-cluster-programs-ndbd.html "21.5.1 ndbd — The NDB Cluster Data Node Daemon") ou [**ndbmtd**](mysql-cluster-programs-ndbmtd.html "21.5.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)") precisam ser copiados para a(s) outra(s) máquina(s) host. (Isso pressupõe que todos os hosts de data node usem a mesma arquitetura e sistema operacional; caso contrário, você pode precisar compilar separadamente para cada plataforma diferente.) O binary do data node não precisa estar em uma localização específica no file system do host, desde que a localização seja conhecida.

Ao compilar o NDB Cluster a partir do código fonte, não são necessárias opções especiais para construir binaries de data node multithreaded. A configuração da build com suporte ao storage engine [NDB](mysql-cluster.html "Chapter 21 MySQL NDB Cluster 7.5 and NDB Cluster 7.6") faz com que o [**ndbmtd**](mysql-cluster-programs-ndbmtd.html "21.5.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)") seja construído automaticamente; o **make install** coloca o binary [**ndbmtd**](mysql-cluster-programs-ndbmtd.html "21.5.3 ndbmtd — The NDB Cluster Data Node Daemon (Multi-Threaded)") no diretório `bin` de instalação, juntamente com [**mysqld**](mysqld.html "4.3.1 mysqld — The MySQL Server"), [**ndbd**](mysql-cluster-programs-ndbd.html "21.5.1 ndbd — The NDB Cluster Data Node Daemon") e [**ndb_mgm**](mysql-cluster-programs-ndb-mgm.html "21.5.5 ndb_mgm — The NDB Cluster Management Client").

**SQL nodes.** Se você compilar o MySQL com suporte a clustering e realizar a instalação padrão (usando **make install** como o usuário `root` do sistema), o [**mysqld**](mysqld.html "4.3.1 mysqld — The MySQL Server") é colocado em `/usr/local/mysql/bin`. Siga os passos fornecidos na [Seção 2.8, “Instalando o MySQL a partir do Código Fonte”](source-installation.html "2.8 Instalando o MySQL a partir do Código Fonte") para preparar o [**mysqld**](mysqld.html "4.3.1 mysqld — The MySQL Server") para uso. Se você deseja executar múltiplos SQL nodes, pode usar uma cópia do mesmo executável [**mysqld**](mysqld.html "4.3.1 mysqld — The MySQL Server") e seus arquivos de suporte associados em várias máquinas. A maneira mais fácil de fazer isso é copiar todo o diretório `/usr/local/mysql` e todos os diretórios e arquivos contidos nele para o(s) outro(s) host(s) de SQL node, e então repetir os passos da [Seção 2.8, “Instalando o MySQL a partir do Código Fonte”](source-installation.html "2.8 Instalando o MySQL a partir do Código Fonte") em cada máquina. Se você configurar a build com uma opção `PREFIX` não padrão, você deve ajustar o diretório de acordo.

Na [Seção 21.3.3, “Configuração Inicial do NDB Cluster”](mysql-cluster-install-configuration.html "21.3.3 Configuração Inicial do NDB Cluster"), criamos arquivos de configuração para todos os nodes em nosso exemplo de NDB Cluster.