## A.15 FAQ do MySQL 5.7: Thread Pool do MySQL Enterprise

A.15.1. [O que é o Thread Pool e qual problema ele resolve?](faqs-thread-pool.html#faq-thread-pool-what-solve)

A.15.2. [Como o Thread Pool limita e gerencia Sessions e Transactions concorrentes para performance e throughput ideais?](faqs-thread-pool.html#faq-thread-pool-how-manage-operation)

A.15.3. [Qual a diferença entre o Thread Pool e o Connection Pool do lado do cliente?](faqs-thread-pool.html#faq-thread-pool-how-diff-connector-pool)

A.15.4. [Quando devo usar o Thread Pool?](faqs-thread-pool.html#faq-thread-pool-when-use)

A.15.5. [Existem configurações de Thread Pool recomendadas?](faqs-thread-pool.html#faq-thread-pool-what-config-recommend)

<table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"/><col/></colgroup><tbody><tr class="question"><td align="left" valign="top"><p><b>A.15.1.</b></p></td><td align="left" valign="top"><p> O que é o Thread Pool e qual problema ele resolve? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> O MySQL Thread Pool é um Plugin do MySQL Server que estende os recursos padrão de tratamento de Connection do MySQL Server para limitar o número de Statements/Queries e Transactions em execução concorrente, garantindo que cada um tenha recursos suficientes de CPU e memória para cumprir sua tarefa. Para o MySQL 5.7, o Thread Pool Plugin está incluído no MySQL Enterprise Edition, um produto comercial. </p><p> O modelo padrão de tratamento de Thread no MySQL Server executa Statements usando um Thread por Connection do cliente. À medida que mais clientes se conectam ao Server e executam Statements, a Performance geral degrada. O Thread Pool Plugin oferece um modelo alternativo de tratamento de Thread projetado para reduzir o Overhead e melhorar a Performance. O Thread Pool Plugin aumenta a Performance do Server gerenciando eficientemente os Threads de execução de Statements para um grande número de Connections de clientes, especialmente em sistemas multi-CPU/Core modernos. </p><p> Para mais informações, consulte a Seção 5.5.3, “Thread Pool do MySQL Enterprise”. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.15.2.</b></p></td><td align="left" valign="top"><p> Como o Thread Pool limita e gerencia Sessions e Transactions concorrentes para performance e throughput ideais? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> O Thread Pool usa uma abordagem de “dividir para conquistar” para limitar e equilibrar a concorrência. Diferentemente do tratamento de Connection padrão do MySQL Server, o Thread Pool separa Connections e Threads, de modo que não há uma relação fixa entre Connections e os Threads que executam Statements recebidos dessas Connections. O Thread Pool, então, gerencia Connections de clientes dentro de Thread Groups configuráveis, onde elas são priorizadas e enfileiradas com base na natureza do trabalho que foram submetidas a realizar. </p><p> Para mais informações, consulte a Seção 5.5.3.3, “Operação do Thread Pool”. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.15.3.</b></p></td><td align="left" valign="top"><p> Qual a diferença entre o Thread Pool e o Connection Pool do lado do cliente? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> O MySQL Connection Pool opera no lado do cliente para garantir que um cliente MySQL não se conecte e se desconecte constantemente do MySQL Server. Ele é projetado para armazenar em cache Connections ociosas no cliente MySQL para uso por outros usuários conforme necessário. Isso minimiza o Overhead e o custo de estabelecer e encerrar Connections à medida que Queries são submetidas ao MySQL Server. O MySQL Connection Pool não tem visibilidade sobre a capacidade de tratamento de Query ou a carga do MySQL Server de back-end. Em contraste, o Thread Pool opera no lado do MySQL Server e é projetado para gerenciar a execução de Connections e Queries concorrentes de entrada conforme são recebidas das Connections de clientes que acessam o Database MySQL de back-end. Devido à separação de funções, o MySQL Connection Pool e o Thread Pool são ortogonais e podem ser usados independentemente um do outro. </p><p> O MySQL Connection Pooling através dos MySQL Connectors é abordado no Capítulo 27, *Connectors e APIs*. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.15.4.</b></p></td><td align="left" valign="top"><p> Quando devo usar o Thread Pool? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Existem algumas regras práticas a considerar para casos de uso ideais do Thread Pool: </p><p> A variável MySQL <code>Threads_running</code> rastreia o número de Statements concorrentes atualmente em execução no MySQL Server. Se esta variável exceder consistentemente uma região em que o Server não opera de forma ideal (geralmente indo além de 40 para Workloads InnoDB), o Thread Pool deve ser benéfico, especialmente em situações de sobrecarga paralela extrema. </p><p> Se você estiver usando a variável <code>innodb_thread_concurrency</code> para limitar o número de Statements em execução concorrente, você deverá descobrir que o Thread Pool resolve o mesmo problema, mas de forma melhor, ao atribuir Connections a Thread Groups e, em seguida, enfileirar execuções com base no conteúdo transacional, designações definidas pelo usuário, e assim por diante. </p><p> Por último, se seu Workload for composto principalmente por Queries curtas, o Thread Pool deve ser benéfico. </p><p> Para saber mais, consulte a Seção 5.5.3.4, “Ajuste do Thread Pool (Thread Pool Tuning)”. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.15.5.</b></p></td><td align="left" valign="top"><p> Existem configurações de Thread Pool recomendadas? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> O Thread Pool possui vários parâmetros de configuração orientados por casos de uso que afetam sua Performance. Para saber mais sobre eles e dicas de ajuste, consulte a Seção 5.5.3.4, “Ajuste do Thread Pool (Thread Pool Tuning)”. </p></td></tr></tbody></table>