## A.11 Perguntas frequentes sobre o MySQL 5.7: conjuntos de caracteres chineses, japoneses e coreanos do MySQL

Este conjunto de Perguntas Frequentes deriva da experiência dos grupos de Suporte e Desenvolvimento da MySQL ao lidar com muitas consultas sobre questões CJK (Chinês-Japonês-Coreano).

A.11.1. [Quais conjuntos de caracteres CJK estão disponíveis no MySQL?](faqs-cjk.html#faq-cjk-o-que-cjk-está-disponível)

A.11.2. [Eu coloquei caracteres CJK na minha tabela. Por que o SELECT os exibe como caracteres “?”](faqs-cjk.html#faq-cjk-por-que-os-caracteres-cjk-s-de-ponto-de-interrogao)

A.11.3. [Quais problemas devo estar ciente ao trabalhar com o conjunto de caracteres chineses Big5?](faqs-cjk.html#faq-cjk-what-problems-big5)

A.11.4. [Por que as conversões de conjuntos de caracteres japoneses falham?](faqs-cjk.html#faq-cjk-o-que-caracteres-japoneses-falham)

A.11.5. [O que devo fazer se eu quiser converter SJIS 81CA para cp932?](faqs-cjk.html#faq-cjk-como-converter-81ca-cp932)

A.11.6. [Como o MySQL representa o sinal do iene (¥)?](faqs-cjk.html#faq-cjk-como-representar-yen)

A.11.7. [Sobre quais questões devo estar ciente ao trabalhar com conjuntos de caracteres coreanos no MySQL?](faqs-cjk.html#faq-cjk-que-problemas-com-caracteres-coreanos)

A.11.8. [Por que recebo mensagens de erro de valor de string incorreto?](faqs-cjk.html#faq-cjk-por-que-valor-de-string-incorreto)

A.11.9. [Por que o meu front-end da GUI ou navegador exibe caracteres CJK incorretamente na minha aplicação usando o Access, PHP ou outra API?](faqs-cjk.html#faq-cjk-por-que-gui-nao-exibe-cjk)

A.11.10. [Eu atualizei para o MySQL 5.7. Como posso voltar ao comportamento do MySQL 4.0 em relação aos conjuntos de caracteres?](faqs-cjk.html#faq-cjk-how-use-4-0-charset)

A.11.11. [Por que algumas pesquisas LIKE e FULLTEXT com caracteres CJK falham?](faqs-cjk.html#faq-cjk-por-que-as-pesquisas-cjk-falham)

A.11.12. [Como saber se o caractere X está disponível em todos os conjuntos de caracteres?](faqs-cjk.html#faq-cjk-como-saber-disponibilidade-caracteres)

A.11.13. [Por que as strings CJK são classificadas incorretamente no Unicode? (I)](faqs-cjk.html#faq-cjk-como-cjk-ordenar-unicode-1)

A.11.14. [Por que as strings CJK são classificadas incorretamente no Unicode? (II)](faqs-cjk.html#faq-cjk-como-cjk-classifica-unicode-2)

A.11.15. [Por que meus caracteres suplementares são rejeitados pelo MySQL?](faqs-cjk.html#faq-cjk-por-que-caractere-suplementar-foi-rejeitado)

A.11.16. [Deveria “CJK” ser “CJKV”?](faqs-cjk.html#faq-cjk-por-que-cjk-não-é-cjkv)

A.11.17. [O MySQL permite o uso de caracteres CJK em nomes de banco de dados e tabelas?](faqs-cjk.html#faq-cjk-como-nomear-tabelas-de-banco-de-dados-com-cjk)

A.11.18. [Onde posso encontrar traduções do Manual do MySQL em chinês, japonês e coreano?](faqs-cjk.html#faq-cjk-onde-doc-traducoes)

A.11.19. [Onde posso obter ajuda com CJK e problemas relacionados no MySQL?](faqs-cjk.html#faq-cjk-help-with-cjk)

<table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"/><col/></colgroup><tbody><tr class="question"><td align="left" valign="top"><a name="faq-cjk-what-cjk-avail"></a><a name="id382021"></a><p><b>A.11.1.</b></p></td><td align="left" valign="top"><p>Quais conjuntos de caracteres CJK estão disponíveis no MySQL?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A lista de conjuntos de caracteres CJK pode variar dependendo da versão do MySQL. Por exemplo, o conjunto de caracteres [[PH_HTML_CODE_<code>sjis</code>] não é suportado antes do MySQL 5.7.4. No entanto, como o nome da língua aplicável aparece na coluna [[PH_HTML_CODE_<code>sjis</code>] para cada entrada no<a class="link" href="information-schema-character-sets-table.html" title="24.3.2 A tabela INFORMATION_SCHEMA CHARACTER_SETS">[[PH_HTML_CODE_<code>cp932</code>]</a>Na tabela, você pode obter uma lista atual de todos os conjuntos de caracteres CJK não Unicode usando esta consulta:</p><pre class="programlisting copytoclipboard language-sql">[[PH_HTML_CODE_<code>3F</code>]</pre><p>(Para mais informações, consulte<a class="xref" href="information-schema-character-sets-table.html" title="24.3.2 A tabela INFORMATION_SCHEMA CHARACTER_SETS">Seção 24.3.2, “A tabela INFORMATION_SCHEMA CHARACTER_SETS”</a>.)</p><p>MySQL suporta três variantes do<span class="firstterm">GB</span>(<span class="foreignphrase"><em class="foreignphrase">Guojia Biaozhun</em></span>, ou<span class="emphasis"><em>Padrão Nacional</em></span>, ou<span class="emphasis"><em>Chinês simplificado</em></span>) conjuntos de caracteres que são oficiais na República Popular da China: [[PH_HTML_CODE_<code>3F</code>], [[PH_HTML_CODE_<code>81CA</code>] e (a partir do MySQL 5.7.4) [[PH_HTML_CODE_<code>cp932</code>].</p><p>Às vezes, as pessoas tentam inserir caracteres [[PH_HTML_CODE_<code>81CA (NOT SIGN)</code>] em [[PH_HTML_CODE_<code>sjis</code>], e isso funciona na maioria das vezes porque [[PH_HTML_CODE_<code>81CA (FULLWIDTH NOT SIGN)</code>] é um superconjunto de [[<code>DESCRIPTION</code><code>sjis</code>]. Mas, eventualmente, elas tentam inserir um caractere chinês mais raro e isso não funciona. (Para um exemplo, veja o Bug #16072).</p><p>Aqui, tentamos esclarecer exatamente quais caracteres são válidos em [[<code>DESCRIPTION</code><code>sjis</code>] ou [[<code>DESCRIPTION</code><code>cp932</code>], com referência aos documentos oficiais. Por favor, verifique essas referências antes de relatar bugs em [[<code>DESCRIPTION</code><code>3F</code>] ou [[<code>DESCRIPTION</code><code>3F</code>]:</p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>O conjunto de caracteres MySQL [[<code>DESCRIPTION</code><code>81CA</code>] é, na realidade,<span class="quote">“<span class="quote">Microsoft código de página 936</span>”</span>Isso difere do código oficial [[<code>DESCRIPTION</code><code>cp932</code>] para os caracteres [[<code>DESCRIPTION</code><code>81CA (NOT SIGN)</code>] (ponto e vírgula), [[<code>DESCRIPTION</code><code>sjis</code>] (travessão), [[<code>DESCRIPTION</code><code>81CA (FULLWIDTH NOT SIGN)</code>] e [[<code>INFORMATION_SCHEMA.CHARACTER_SETS</code><code>sjis</code>].</p></li><li class="listitem"><p>Para uma lista de mapeamentos [[<code>INFORMATION_SCHEMA.CHARACTER_SETS</code><code>sjis</code>]/Unicode, consulte<a class="ulink" href="http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP936.TXT" target="_blank">http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP936.TXT</a>.</p></li></ul> </div> <p>Também é possível armazenar caracteres CJK em conjuntos de caracteres Unicode, embora as colorações disponíveis possam não classificar os caracteres da forma que você espera:</p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Os conjuntos de caracteres [[<code>INFORMATION_SCHEMA.CHARACTER_SETS</code><code>cp932</code>] e [[<code>INFORMATION_SCHEMA.CHARACTER_SETS</code><code>3F</code>] suportam os caracteres do Plano Multilíngue Básico (BMP) do Unicode. Esses caracteres têm valores de pontos de código entre [[<code>INFORMATION_SCHEMA.CHARACTER_SETS</code><code>3F</code>] e [[<code>INFORMATION_SCHEMA.CHARACTER_SETS</code><code>81CA</code>].</p></li><li class="listitem"><p>Os conjuntos de caracteres [[<code>INFORMATION_SCHEMA.CHARACTER_SETS</code><code>cp932</code>], [[<code>INFORMATION_SCHEMA.CHARACTER_SETS</code><code>81CA (NOT SIGN)</code>], [[<code>INFORMATION_SCHEMA.CHARACTER_SETS</code><code>sjis</code>] e [[<code>INFORMATION_SCHEMA.CHARACTER_SETS</code><code>81CA (FULLWIDTH NOT SIGN)</code>] suportam caracteres BMP, bem como caracteres suplementares que estão fora do BMP. Os caracteres suplementares têm valores de pontos de código entre [[<code class="language-sql">mysql&gt; SELECT CHARACTER_SET_NAME, DESCRIPTION FROM INFORMATION_SCHEMA.CHARACTER_SETS WHERE DESCRIPTION LIKE '%Chin%' OR DESCRIPTION LIKE '%Japanese%' OR DESCRIPTION LIKE '%Korean%' ORDER BY CHARACTER_SET_NAME; +--------------------+---------------------------------+ | CHARACTER_SET_NAME | DESCRIPTION                     | +--------------------+---------------------------------+ | big5               | Big5 Traditional Chinese        | | cp932              | SJIS for Windows Japanese       | | eucjpms            | UJIS for Windows Japanese       | | euckr              | EUC-KR Korean                   | | gb18030            | China National Standard GB18030 | | gb2312             | GB2312 Simplified Chinese       | | gbk                | GBK Simplified Chinese          | | sjis               | Shift-JIS Japanese              | | ujis               | EUC-JP Japanese                 | +--------------------+---------------------------------+</code><code>sjis</code>] e [[<code class="language-sql">mysql&gt; SELECT CHARACTER_SET_NAME, DESCRIPTION FROM INFORMATION_SCHEMA.CHARACTER_SETS WHERE DESCRIPTION LIKE '%Chin%' OR DESCRIPTION LIKE '%Japanese%' OR DESCRIPTION LIKE '%Korean%' ORDER BY CHARACTER_SET_NAME; +--------------------+---------------------------------+ | CHARACTER_SET_NAME | DESCRIPTION                     | +--------------------+---------------------------------+ | big5               | Big5 Traditional Chinese        | | cp932              | SJIS for Windows Japanese       | | eucjpms            | UJIS for Windows Japanese       | | euckr              | EUC-KR Korean                   | | gb18030            | China National Standard GB18030 | | gb2312             | GB2312 Simplified Chinese       | | gbk                | GBK Simplified Chinese          | | sjis               | Shift-JIS Japanese              | | ujis               | EUC-JP Japanese                 | +--------------------+---------------------------------+</code><code>sjis</code>].</p></li></ul> </div> <p>A collation utilizada para um conjunto de caracteres Unicode determina a capacidade de ordenar (ou seja, distinguir) os caracteres do conjunto:</p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>As collation basesadas no Algoritmo de Cotação Unicode (UCA) 4.0.0 distinguem apenas caracteres BMP.</p></li><li class="listitem"><p>As collation basesadas na UCA 5.2.0 ou 9.0.0 distinguem BMP e caracteres suplementares.</p></li><li class="listitem"><p>As collation não compatíveis com a UCA podem não distinguir todos os caracteres Unicode. Por exemplo, a collation padrão [[<code class="language-sql">mysql&gt; SELECT CHARACTER_SET_NAME, DESCRIPTION FROM INFORMATION_SCHEMA.CHARACTER_SETS WHERE DESCRIPTION LIKE '%Chin%' OR DESCRIPTION LIKE '%Japanese%' OR DESCRIPTION LIKE '%Korean%' ORDER BY CHARACTER_SET_NAME; +--------------------+---------------------------------+ | CHARACTER_SET_NAME | DESCRIPTION                     | +--------------------+---------------------------------+ | big5               | Big5 Traditional Chinese        | | cp932              | SJIS for Windows Japanese       | | eucjpms            | UJIS for Windows Japanese       | | euckr              | EUC-KR Korean                   | | gb18030            | China National Standard GB18030 | | gb2312             | GB2312 Simplified Chinese       | | gbk                | GBK Simplified Chinese          | | sjis               | Shift-JIS Japanese              | | ujis               | EUC-JP Japanese                 | +--------------------+---------------------------------+</code><code>cp932</code>] é [[<code class="language-sql">mysql&gt; SELECT CHARACTER_SET_NAME, DESCRIPTION FROM INFORMATION_SCHEMA.CHARACTER_SETS WHERE DESCRIPTION LIKE '%Chin%' OR DESCRIPTION LIKE '%Japanese%' OR DESCRIPTION LIKE '%Korean%' ORDER BY CHARACTER_SET_NAME; +--------------------+---------------------------------+ | CHARACTER_SET_NAME | DESCRIPTION                     | +--------------------+---------------------------------+ | big5               | Big5 Traditional Chinese        | | cp932              | SJIS for Windows Japanese       | | eucjpms            | UJIS for Windows Japanese       | | euckr              | EUC-KR Korean                   | | gb18030            | China National Standard GB18030 | | gb2312             | GB2312 Simplified Chinese       | | gbk                | GBK Simplified Chinese          | | sjis               | Shift-JIS Japanese              | | ujis               | EUC-JP Japanese                 | +--------------------+---------------------------------+</code><code>3F</code>], que distingue apenas os caracteres BMP.</p></li></ul> </div> <p>Além disso, distinguir caracteres não é o mesmo que ordená-los de acordo com as convenções de uma língua CJK específica. Atualmente, o MySQL tem apenas uma collation específica para CJK, [[<code class="language-sql">mysql&gt; SELECT CHARACTER_SET_NAME, DESCRIPTION FROM INFORMATION_SCHEMA.CHARACTER_SETS WHERE DESCRIPTION LIKE '%Chin%' OR DESCRIPTION LIKE '%Japanese%' OR DESCRIPTION LIKE '%Korean%' ORDER BY CHARACTER_SET_NAME; +--------------------+---------------------------------+ | CHARACTER_SET_NAME | DESCRIPTION                     | +--------------------+---------------------------------+ | big5               | Big5 Traditional Chinese        | | cp932              | SJIS for Windows Japanese       | | eucjpms            | UJIS for Windows Japanese       | | euckr              | EUC-KR Korean                   | | gb18030            | China National Standard GB18030 | | gb2312             | GB2312 Simplified Chinese       | | gbk                | GBK Simplified Chinese          | | sjis               | Shift-JIS Japanese              | | ujis               | EUC-JP Japanese                 | +--------------------+---------------------------------+</code><code>3F</code>] (que requer o uso do conjunto de caracteres não Unicode [[<code class="language-sql">mysql&gt; SELECT CHARACTER_SET_NAME, DESCRIPTION FROM INFORMATION_SCHEMA.CHARACTER_SETS WHERE DESCRIPTION LIKE '%Chin%' OR DESCRIPTION LIKE '%Japanese%' OR DESCRIPTION LIKE '%Korean%' ORDER BY CHARACTER_SET_NAME; +--------------------+---------------------------------+ | CHARACTER_SET_NAME | DESCRIPTION                     | +--------------------+---------------------------------+ | big5               | Big5 Traditional Chinese        | | cp932              | SJIS for Windows Japanese       | | eucjpms            | UJIS for Windows Japanese       | | euckr              | EUC-KR Korean                   | | gb18030            | China National Standard GB18030 | | gb2312             | GB2312 Simplified Chinese       | | gbk                | GBK Simplified Chinese          | | sjis               | Shift-JIS Japanese              | | ujis               | EUC-JP Japanese                 | +--------------------+---------------------------------+</code><code>81CA</code>]).</p><p>Para obter informações sobre as colatações Unicode e suas propriedades diferenciadoras, incluindo as propriedades de colatação para caracteres suplementares, consulte<a class="xref" href="charset-unicode-sets.html" title="10.10.1 Conjuntos de Caracteres Unicode">Seção 10.10.1, “Conjunto de Caracteres Unicode”</a>.</p></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-why-cjk-question-marks"></a><a name="id382102"></a><p><b>A.11.2.</b></p></td><td align="left" valign="top"><p>Eu coloquei caracteres CJK na minha tabela. Por que<a class="link" href="select.html" title="13.2.9 Instrução SELECT">[[<code class="language-sql">mysql&gt; SELECT CHARACTER_SET_NAME, DESCRIPTION FROM INFORMATION_SCHEMA.CHARACTER_SETS WHERE DESCRIPTION LIKE '%Chin%' OR DESCRIPTION LIKE '%Japanese%' OR DESCRIPTION LIKE '%Korean%' ORDER BY CHARACTER_SET_NAME; +--------------------+---------------------------------+ | CHARACTER_SET_NAME | DESCRIPTION                     | +--------------------+---------------------------------+ | big5               | Big5 Traditional Chinese        | | cp932              | SJIS for Windows Japanese       | | eucjpms            | UJIS for Windows Japanese       | | euckr              | EUC-KR Korean                   | | gb18030            | China National Standard GB18030 | | gb2312             | GB2312 Simplified Chinese       | | gbk                | GBK Simplified Chinese          | | sjis               | Shift-JIS Japanese              | | ujis               | EUC-JP Japanese                 | +--------------------+---------------------------------+</code><code>cp932</code>]</a>exibá-los como<span class="quote">“<span class="quote">?</span>”</span>personagens?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Esse problema geralmente ocorre devido a uma configuração no MySQL que não corresponde às configurações do programa de aplicativo ou do sistema operacional. Aqui estão alguns passos comuns para corrigir esse tipo de problema:</p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> <span class="emphasis"><em>Certifique-se de qual versão do MySQL você está usando</em></span>.</p><p>Use a declaração [[<code class="language-sql">mysql&gt; SELECT CHARACTER_SET_NAME, DESCRIPTION FROM INFORMATION_SCHEMA.CHARACTER_SETS WHERE DESCRIPTION LIKE '%Chin%' OR DESCRIPTION LIKE '%Japanese%' OR DESCRIPTION LIKE '%Korean%' ORDER BY CHARACTER_SET_NAME; +--------------------+---------------------------------+ | CHARACTER_SET_NAME | DESCRIPTION                     | +--------------------+---------------------------------+ | big5               | Big5 Traditional Chinese        | | cp932              | SJIS for Windows Japanese       | | eucjpms            | UJIS for Windows Japanese       | | euckr              | EUC-KR Korean                   | | gb18030            | China National Standard GB18030 | | gb2312             | GB2312 Simplified Chinese       | | gbk                | GBK Simplified Chinese          | | sjis               | Shift-JIS Japanese              | | ujis               | EUC-JP Japanese                 | +--------------------+---------------------------------+</code><code>81CA (NOT SIGN)</code>] para determinar isso.</p></li><li class="listitem"><p> <span class="emphasis"><em>Certifique-se de que o banco de dados está realmente usando o conjunto de caracteres desejado</em></span>.</p><p>Muitas pessoas pensam que o conjunto de caracteres do cliente é sempre o mesmo que o conjunto de caracteres do servidor ou o conjunto de caracteres usado para fins de exibição. No entanto, ambas são suposições falsas. Você pode ter certeza ao verificar o resultado de [[<code class="language-sql">mysql&gt; SELECT CHARACTER_SET_NAME, DESCRIPTION FROM INFORMATION_SCHEMA.CHARACTER_SETS WHERE DESCRIPTION LIKE '%Chin%' OR DESCRIPTION LIKE '%Japanese%' OR DESCRIPTION LIKE '%Korean%' ORDER BY CHARACTER_SET_NAME; +--------------------+---------------------------------+ | CHARACTER_SET_NAME | DESCRIPTION                     | +--------------------+---------------------------------+ | big5               | Big5 Traditional Chinese        | | cp932              | SJIS for Windows Japanese       | | eucjpms            | UJIS for Windows Japanese       | | euckr              | EUC-KR Korean                   | | gb18030            | China National Standard GB18030 | | gb2312             | GB2312 Simplified Chinese       | | gbk                | GBK Simplified Chinese          | | sjis               | Shift-JIS Japanese              | | ujis               | EUC-JP Japanese                 | +--------------------+---------------------------------+</code><code>sjis</code>]</em></code>ou, ainda melhor, usando esta declaração:</p><pre class="programlisting copytoclipboard language-sql">[[<code class="language-sql">mysql&gt; SELECT CHARACTER_SET_NAME, DESCRIPTION FROM INFORMATION_SCHEMA.CHARACTER_SETS WHERE DESCRIPTION LIKE '%Chin%' OR DESCRIPTION LIKE '%Japanese%' OR DESCRIPTION LIKE '%Korean%' ORDER BY CHARACTER_SET_NAME; +--------------------+---------------------------------+ | CHARACTER_SET_NAME | DESCRIPTION                     | +--------------------+---------------------------------+ | big5               | Big5 Traditional Chinese        | | cp932              | SJIS for Windows Japanese       | | eucjpms            | UJIS for Windows Japanese       | | euckr              | EUC-KR Korean                   | | gb18030            | China National Standard GB18030 | | gb2312             | GB2312 Simplified Chinese       | | gbk                | GBK Simplified Chinese          | | sjis               | Shift-JIS Japanese              | | ujis               | EUC-JP Japanese                 | +--------------------+---------------------------------+</code><code>81CA (FULLWIDTH NOT SIGN)</code>]</pre></li><li class="listitem"><p> <span class="emphasis"><em>Determine o valor hexadecimal do(s) caractere(s) que não está(ão) sendo exibido(s) corretamente</em></span>.</p><p>Você pode obter essas informações para uma coluna<em class="replaceable">[[<code>gb2312</code><code>sjis</code>]</em>na tabela<em class="replaceable">[[<code>gb2312</code><code>sjis</code>]</em>usando a seguinte consulta:</p><pre class="programlisting copytoclipboard language-sql">[[<code>gb2312</code><code>cp932</code>]</pre><p>[[<code>gb2312</code><code>3F</code>] é o código de codificação para o caractere [[<code>gb2312</code><code>3F</code>]; isso significa que [[<code>gb2312</code><code>81CA</code>] é o caractere realmente armazenado na coluna. Isso geralmente acontece devido a um problema de conversão de um caractere específico do conjunto de caracteres do cliente para o conjunto de caracteres de destino.</p></li><li class="listitem"><p> <span class="emphasis"><em>Certifique-se de que uma viagem de ida e volta seja possível. Quando você selecionar<em class="replaceable">[[<code>gb2312</code><code>cp932</code>]</em>(ou<em class="replaceable">[[<code>gb2312</code><code>81CA (NOT SIGN)</code>]</em>), você obtém<em class="replaceable">[[<code>gb2312</code><code>sjis</code>]</em>como resultado</em></span>?</p><p>Por exemplo, o caractere Katakana japonês<span class="foreignphrase"><em class="foreignphrase">Pe</em></span>([[<code>gb2312</code><code>81CA (FULLWIDTH NOT SIGN)</code>]) existe em todos os conjuntos de caracteres CJK, e tem o valor do ponto de código (codificação hexadecimal) [[<code>gbk</code><code>sjis</code>]. Para testar uma viagem de ida e volta para este caractere, use esta consulta:</p><pre class="programlisting copytoclipboard language-sql one-line">[[<code>gbk</code><code>sjis</code>]</pre><p>Se o resultado não for também [[<code>gbk</code><code>cp932</code>], a viagem de ida e volta falhou.</p><p>Para relatórios de bugs relacionados a tais falhas, podemos pedir que você entre em contato com [[<code>gbk</code><code>3F</code>]. Em seguida, podemos determinar se a codificação do cliente está correta.</p></li><li class="listitem"><p> <span class="emphasis"><em>Certifique-se de que o problema não está no navegador ou em outra aplicação, mas sim no MySQL</em></span>.</p><p>Utilize o símbolo<a class="link" href="mysql.html" title="4.5.1 mysql — O cliente de linha de comando do MySQL"><span><strong>mysql</strong></span></a>Um programa de cliente para realizar essa tarefa. Se<a class="link" href="mysql.html" title="4.5.1 mysql — O cliente de linha de comando do MySQL"><span><strong>mysql</strong></span></a>Se o seu dispositivo exibe os caracteres corretamente, mas a sua aplicação não, o problema provavelmente está nas configurações do sistema.</p><p>Para determinar suas configurações, use o 
<a class="link" href="show-variables.html" title="13.7.5.39 Declaração de VARIÁVEIS EXIBIR">[[<code>gbk</code><code>3F</code>]</a>declaração, cuja saída deve se assemelhar ao que é mostrado aqui:</p><pre class="programlisting copytoclipboard language-sql">[[<code>gbk</code><code>81CA</code>]</pre><p>Estes são os ajustes típicos de conjunto de caracteres para um cliente orientado para o mercado internacional (observe o uso de [[<code>gbk</code><code>cp932</code>] Unicode) conectado a um servidor no Ocidente ([[<code>gbk</code><code>81CA (NOT SIGN)</code>] é um conjunto de caracteres da Europa Ocidental).</p><p>Embora o Unicode (geralmente a variante [[<code>gbk</code><code>sjis</code>] no Unix e a variante [[<code>gbk</code><code>81CA (FULLWIDTH NOT SIGN)</code>] no Windows) seja preferível ao latino, muitas vezes ele não é o que as ferramentas do seu sistema operacional suportam melhor. Muitos usuários do Windows acham que um conjunto de caracteres da Microsoft, como [[<code>gb18030</code><code>sjis</code>] para o Windows japonês, é adequado.</p><p>Se você não puder controlar as configurações do servidor e não tiver a menor ideia de qual configuração o seu computador está usando, tente mudar para um conjunto de caracteres comum para o país em que você está ([[<code>gb18030</code><code>sjis</code>] = Coreia; [[<code>gb18030</code><code>cp932</code>], [[<code>gb18030</code><code>3F</code>] ou [[<code>gb18030</code><code>3F</code>] = República Popular da China; [[<code>gb18030</code><code>81CA</code>] = Taiwan; [[<code>gb18030</code><code>cp932</code>], [[<code>gb18030</code><code>81CA (NOT SIGN)</code>], [[<code>gb18030</code><code>sjis</code>], ou [[<code>gb18030</code><code>81CA (FULLWIDTH NOT SIGN)</code>] = Japão; [[<code>gbk</code><code>sjis</code>] ou [[<code>gbk</code><code>sjis</code>] = qualquer lugar). Geralmente, é necessário apenas alterar as configurações do cliente e da conexão e dos resultados.<a class="link" href="set-names.html" title="13.7.4.3 Declaração de NOME_SET">[[<code>gbk</code><code>cp932</code>]</a>A declaração muda os três de uma só vez. Por exemplo:</p><pre class="programlisting copytoclipboard language-sql one-line">[[<code>gbk</code><code>3F</code>]</pre><p>Depois de configurar corretamente, você pode torná-lo permanente editando [[<code>gbk</code><code>3F</code>] ou [[<code>gbk</code><code>81CA</code>]. Por exemplo, você pode adicionar linhas como estas:</p><pre class="programlisting copytoclipboard language-ini">[[<code>gbk</code><code>cp932</code>]</pre><p>Também é possível que haja problemas com a configuração da API sendo usada em seu aplicativo; veja<em class="citetitle">Por que meu frontend da GUI ou navegador não exibe caracteres CJK corretamente...?</em>para mais informações.</p></li></ul> </div> </td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-what-problems-big5"></a><a name="id382192"></a><p><b>A.11.3.</b></p></td><td align="left" valign="top"><p>Quais problemas devo estar ciente ao trabalhar com o conjunto de caracteres chineses Big5?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O MySQL suporta o conjunto de caracteres Big5, que é comum em Hong Kong e Taiwan (República da China). O conjunto de caracteres MySQL [[<code>gbk</code><code>81CA (NOT SIGN)</code>] é, na realidade, a página de código Microsoft 950, que é muito semelhante ao conjunto de caracteres original [[<code>gbk</code><code>sjis</code>].</p><p>Um pedido de recurso para adicionar as extensões [[<code>gbk</code><code>81CA (FULLWIDTH NOT SIGN)</code>] foi feito. Pessoas que precisam dessa extensão podem achar o patch sugerido para o Bug #13577 interessante.</p></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-what-japanese-chars-fail"></a><a name="id382201"></a><p><b>A.11.4.</b></p></td><td align="left" valign="top"><p>Por que as conversões de conjuntos de caracteres japoneses falham?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O MySQL suporta os conjuntos de caracteres [[<code>gb2312</code><code>sjis</code>], [[<code>gb2312</code><code>sjis</code>], [[<code>gb2312</code><code>cp932</code>] e [[<code>gb2312</code><code>3F</code>], além do Unicode. Uma necessidade comum é a conversão entre conjuntos de caracteres. Por exemplo, pode haver um servidor Unix (tipicamente com [[<code>gb2312</code><code>3F</code>] ou [[<code>gb2312</code><code>81CA</code>]) e um cliente Windows (tipicamente com [[<code>gb2312</code><code>cp932</code>]).</p><p>Na tabela de conversão a seguir, a coluna [[<code>gb2312</code><code>81CA (NOT SIGN)</code>] representa a fonte, e as colunas [[<code>gb2312</code><code>sjis</code>], [[<code>gb2312</code><code>81CA (FULLWIDTH NOT SIGN)</code>], [[<code>gbk</code><code>sjis</code>] e [[<code>gbk</code><code>sjis</code>] representam os destinos; ou seja, as últimas 4 colunas fornecem o resultado hexadecimal quando usamos<a class="link" href="cast-functions.html#function_convert">[[<code>gbk</code><code>cp932</code>]</a>ou atribuímos uma coluna [[<code>gbk</code><code>3F</code>] contendo o valor a uma coluna [[<code>gbk</code><code>3F</code>], [[<code>gbk</code><code>81CA</code>], [[<code>gbk</code><code>cp932</code>] ou [[<code>gbk</code><code>81CA (NOT SIGN)</code>].</p> <div class="informaltable"> <table summary="Resultado da atribuição de vários caracteres ucs2 a uma coluna que usa o conjunto de caracteres sjis, cp932, ujis ou eucjpms."><col style="width: 40%"/><col align="left" style="width: 12%"/><col align="right" style="width: 12%"/><col align="right" style="width: 12%"/><col align="right" style="width: 12%"/><col align="right" style="width: 12%"/><thead><tr> <th>Nome do personagem</th> <th>ucs2</th> <th>sjis</th> <th>cp932</th> <th>ujis</th> <th>eucjpms</th> </tr></thead><tbody><tr> <th>BROKEN BAR</th> <td>00A6</td> <td>3F</td> <td>3F</td> <td>8FA2C3</td> <td>3F</td> </tr><tr> <th>BAR DE LARGURA TOTAL QUEBRADO</th> <td>FE4</td> <td>3F</td> <td>FA55</td> <td>3F</td> <td>8FA2</td> </tr><tr> <th>YEN SIGN</th> <td>00A5</td> <td>3F</td> <td>3F</td> <td>20</td> <td>3F</td> </tr><tr> <th>SINAL DE JENA COMPLETA</th> <td>FE5</td> <td>818F</td> <td>818F</td> <td>A1EF</td> <td>3F</td> </tr><tr> <th>TILDE</th> <td>007E</td> <td>7E</td> <td>7E</td> <td>7E</td> <td>7E</td> </tr><tr> <th>SOBRE LINHA</th> <td>203E</td> <td>3F</td> <td>3F</td> <td>20</td> <td>3F</td> </tr><tr> <th>BAR HORIZONTAL</th> <td>2015</td> <td>815C</td> <td>815C</td> <td>A1BD</td> <td>A1BD</td> </tr><tr> <th>EM DASH</th> <td>2014</td> <td>3F</td> <td>3F</td> <td>3F</td> <td>3F</td> </tr><tr> <th>REVERSE SOLIDUS</th> <td>005C</td> <td>815F</td> <td>5C</td> <td>5C</td> <td>5C</td> </tr><tr> <th>REVERSO DE SOLIDUS COMPLETO</th> <td>FF3C</td> <td>3F</td> <td>815F</td> <td>3F</td> <td>A1C0</td> </tr><tr> <th>WAVE DASH</th> <td>301C</td> <td>8160</td> <td>3F</td> <td>A1C1</td> <td>3F</td> </tr><tr> <th>TILDE COM LARGURA TOTAL</th> <td>FF5E</td> <td>3F</td> <td>8160</td> <td>3F</td> <td>A1C1</td> </tr><tr> <th>LINHA VERTICAL DUPLA</th> <td>2016</td> <td>8161</td> <td>3F</td> <td>A1C2</td> <td>3F</td> </tr><tr> <th>PARALELAMENTE</th> <td>2225</td> <td>3F</td> <td>8161</td> <td>3F</td> <td>A1C2</td> </tr><tr> <th>MINUS SIGN</th> <td>2212</td> <td>817C</td> <td>3F</td> <td>A1DD</td> <td>3F</td> </tr><tr> <th>SUBLINHA-MINÚSCULA COMPLETA</th> <td>FF0D</td> <td>3F</td> <td>817C</td> <td>3F</td> <td>A1DD</td> </tr><tr> <th>SINAL DE CENTENA</th> <td>00A2</td> <td>8191</td> <td>3F</td> <td>A1F1</td> <td>3F</td> </tr><tr> <th>SINAL CENTRO DE CARACTERES COMPLETO</th> <td>FFF0</td> <td>3F</td> <td>8191</td> <td>3F</td> <td>A1F1</td> </tr><tr> <th>SINAL DE PESO</th> <td>00A3</td> <td>8192</td> <td>3F</td> <td>A1F2</td> <td>3F</td> </tr><tr> <th>SINAL DE PONTO COMPOSTO</th> <td>FE1</td> <td>3F</td> <td>8192</td> <td>3F</td> <td>A1F2</td> </tr><tr> <th>Não assine</th> <td>00AC</td> <td>81CA</td> <td>3F</td> <td>A2CC</td> <td>3F</td> </tr><tr> <th>FULLWIDTH NÃO É SINAL</th> <td>FE2</td> <td>3F</td> <td>81CA</td> <td>3F</td> <td>A2CC</td> </tr></tbody></table> </div> <p>Agora, considere a seguinte parte da tabela.</p> <div class="informaltable"> <table summary="Resultado da atribuição dos caracteres ucs2 NOT SIGN e FULLWIDTH NOT SIGN a uma coluna que utiliza o conjunto de caracteres sjis, cp932, ujis ou eucjpms."><col style="width: 55%"/><col align="right" style="width: 15%"/><col align="right" style="width: 15%"/><col align="right" style="width: 15%"/><thead><tr> <th></th> <th>ucs2</th> <th>sjis</th> <th>cp932</th> </tr></thead><tbody><tr> <th>Não assine</th> <td>00AC</td> <td>81CA</td> <td>3F</td> </tr><tr> <th>FULLWIDTH NÃO É SINAL</th> <td>FE2</td> <td>3F</td> <td>81CA</td> </tr></tbody></table> </div> <p>Isso significa que o MySQL converte o código [[<code>gbk</code><code>sjis</code>] (Unicode [[<code>gbk</code><code>81CA (FULLWIDTH NOT SIGN)</code>]) para o ponto de código [[<code>sjis</code>]] e para o ponto de código [[<code>gb2312</code><code>sjis</code>] e para o ponto de código [[<code>3F</code>]]. ([[<code>3F</code>]] é o ponto de interrogação (<span class="quote">“<span class="quote">?</span>”</span>Isso é o que sempre é usado quando a conversão não pode ser realizada.)</p></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-how-convert-81ca-cp932"></a><a name="id382428"></a><p><b>A.11.5.</b></p></td><td align="left" valign="top"><p>O que devo fazer se eu quiser converter SJIS [[<code>81CA</code>]] para [[<code>cp932</code>]]?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Nossa resposta é:<span class="quote">“<span class="quote">?</span>”</span>Há desvantagens nisso, e muitas pessoas prefeririam uma<span class="quote">“<span class="quote">solto</span>”</span>A conversão, de modo que [[<code>81CA (NOT SIGN)</code>]] em [[<code>sjis</code>]] se torne [[<code>81CA (FULLWIDTH NOT SIGN)</code>]] em [[<code>gb2312</code><code>sjis</code>].</p></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-how-represent-yen"></a><a name="id382441"></a><p><b>A.11.6.</b></p></td><td align="left" valign="top"><p>Como o MySQL representa o sinal do iene ([[<code>gb2312</code><code>sjis</code>])?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Surge um problema porque algumas versões dos conjuntos de caracteres japoneses (tanto [[<code>gb2312</code><code>cp932</code>] quanto [[<code>gb2312</code><code>3F</code>]) tratam [[<code>gb2312</code><code>3F</code>] como um<span class="firstterm">solidus inverso</span>([[<code>gb2312</code><code>81CA</code>], também conhecido como barra invertida), enquanto outros o tratam como um símbolo do iene ([[<code>gb2312</code><code>cp932</code>]).</p><p>O MySQL segue apenas uma versão da descrição do padrão JIS (Padrões Industriais Japoneses). No MySQL,<span class="emphasis"><em>[[<code>gb2312</code><code>81CA (NOT SIGN)</code>] é sempre o sólido inverso ([[<code>gb2312</code><code>sjis</code>])</em></span>.</p></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-what-problems-korean"></a><a name="id382457"></a><p><b>A.11.7.</b></p></td><td align="left" valign="top"><p>Sobre quais questões devo estar ciente ao trabalhar com conjuntos de caracteres coreanos no MySQL?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Em teoria, embora tenham havido várias versões do [[<code>gb2312</code><code>81CA (FULLWIDTH NOT SIGN)</code>] (<span class="firstterm">Código Unix estendido Coreia</span>) conjunto de caracteres, apenas um problema foi observado. Usamos o<span class="quote">“<span class="quote">ASCII</span>”</span>variante do EUC-KR, na qual o ponto de código [[<code>gbk</code><code>sjis</code>] é o REVERSE SOLIDUS, ou seja, [[<code>gbk</code><code>sjis</code>], em vez de<span class="quote">“<span class="quote">KS-Roman</span>”</span>variante do EUC-KR, na qual o ponto de código [[<code>gbk</code><code>cp932</code>] é [[<code>gbk</code><code>3F</code>] ([[<code>gbk</code><code>3F</code>]). Isso significa que você não pode converter o Unicode [[<code>gbk</code><code>81CA</code>] para [[<code>gbk</code><code>cp932</code>]:</p><pre class="programlisting copytoclipboard language-sql">[[<code>gbk</code><code>81CA (NOT SIGN)</code>]</pre></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-why-incorrect-string-value"></a><a name="id382477"></a><p><b>A.11.8.</b></p></td><td align="left" valign="top"><p>Por que eu recebo<span class="errortext">Valor de string incorreto</span>mensagens de erro?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Para ver o problema, crie uma tabela com uma coluna Unicode ([[<code>gbk</code><code>sjis</code>]) e uma coluna chinesa ([[<code>gbk</code><code>81CA (FULLWIDTH NOT SIGN)</code>]).</p><pre class="programlisting copytoclipboard language-sql">[[<code>gb2312</code><code>sjis</code>]</pre><p>No modo SQL não estrito, tente inserir o caractere raro [[<code>gb2312</code><code>sjis</code>] em ambas as colunas.</p><pre class="programlisting copytoclipboard language-sql">[[<code>gb2312</code><code>cp932</code>]</pre><p>O<a class="link" href="insert.html" title="13.2.5 Instrução INSERT">[[<code>gb2312</code><code>3F</code>]</a>produz um aviso. Use a seguinte declaração para ver o que é:</p><pre class="programlisting copytoclipboard language-sql">[[<code>gb2312</code><code>3F</code>]</pre><p>Portanto, é um aviso apenas sobre a coluna [[<code>gb2312</code><code>81CA</code>].</p><pre class="programlisting copytoclipboard language-sql">[[<code>gb2312</code><code>cp932</code>]</pre><p>Várias coisas precisam de explicação aqui:</p> <div class="orderedlist"> <ol class="orderedlist" type="1"><li class="listitem"><p>O caractere [[<code>gb2312</code><code>81CA (NOT SIGN)</code>] não está no conjunto de caracteres [[<code>gb2312</code><code>sjis</code>], conforme descrito anteriormente.</p></li><li class="listitem"><p>Se você estiver usando uma versão antiga do MySQL, pode ver uma mensagem diferente.</p></li><li class="listitem"><p>Um aviso ocorre em vez de um erro porque o MySQL não está configurado para usar o modo SQL rigoroso. No modo não rigoroso, o MySQL tenta fazer o que for possível para obter o melhor ajuste, em vez de desistir. Com o modo SQL rigoroso, o<span class="errortext">Valor de string incorreto</span>A mensagem ocorre como um erro em vez de um aviso, e<a class="link" href="insert.html" title="13.2.5 Instrução INSERT">[[<code>gb2312</code><code>81CA (FULLWIDTH NOT SIGN)</code>]</a>falha.</p></li></ol> </div> </td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-why-gui-not-display-cjk"></a><a name="id382515"></a><p><b>A.11.9.</b></p></td><td align="left" valign="top"><p>Por que o meu front-end GUI ou navegador exibe caracteres CJK incorretamente na minha aplicação usando o Access, PHP ou outra API?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Obtenha uma conexão direta com o servidor usando o<a class="link" href="mysql.html" title="4.5.1 mysql — O cliente de linha de comando do MySQL"><span><strong>mysql</strong></span></a>cliente, e tente fazer a mesma consulta lá. Se<a class="link" href="mysql.html" title="4.5.1 mysql — O cliente de linha de comando do MySQL"><span><strong>mysql</strong></span></a>Se a resposta for correta, o problema pode ser que a interface da sua aplicação requer inicialização. Use<a class="link" href="mysql.html" title="4.5.1 mysql — O cliente de linha de comando do MySQL"><span><strong>mysql</strong></span></a>para lhe dizer qual conjunto de caracteres ou conjuntos de caracteres ele usa com a declaração [[<code>gbk</code><code>sjis</code>]. Se você estiver usando o Access, provavelmente está se conectando com o Connector/ODBC. Nesse caso, você deve verificar<a class="ulink" href="/doc/connector-odbc/en/connector-odbc-configuration.html" target="_top">Configurando o Connector/ODBC</a>Se, por exemplo, você usar [[<code>gbk</code><code>sjis</code>], você deve inserir [[<code>gbk</code><code>cp932</code>]. (Neste caso, não é necessário o caractere [[<code>gbk</code><code>3F</code>].) Se você estiver usando ASP, talvez seja necessário adicionar<a class="link" href="set-names.html" title="13.7.4.3 Declaração de NOME_SET">[[<code>gbk</code><code>3F</code>]</a>no código. Aqui está um exemplo que funcionou no passado:</p><pre class="programlisting copytoclipboard language-none">[[<code>gbk</code><code>81CA</code>]</pre><p>Da mesma forma, se você estiver usando qualquer conjunto de caracteres diferente de [[<code>gbk</code><code>cp932</code>] com Connector/NET, você deve especificar o conjunto de caracteres na string de conexão. Veja<a class="ulink" href="/doc/connector-net/en/connector-net-connections.html" target="_top">Conexões Connector/NET</a>, para mais informações.</p><p>Se você estiver usando PHP, tente isso:</p><pre class="programlisting copytoclipboard language-php"><code class="language-php">&lt;?php $link = new mysqli($host, $usr, $pwd, $db);

if( mysqli\_connect\_errno() ) { printf("Conexão falhou: %s\n", mysqli\_connect\_error()); exit(); }

$link->query("SET NAMES 'utf8'"); ?></code></pre><p> In this case, we used <a class="link" href="set-names.html" title="13.7.4.3 SET NAMES Statement"><code>SET NAMES</code></a> to change <a class="link" href="server-system-variables.html#sysvar_character_set_client"><code>character\_set\_client</code></a>, <a class="link" href="server-system-variables.html#sysvar_character_set_connection"><code>character\_set\_connection</code></a>, and <a class="link" href="server-system-variables.html#sysvar_character_set_results"><code>character\_set\_results</code></a>. </p><p> Another issue often encountered in PHP applications has to do with assumptions made by the browser. Sometimes adding or changing a <code><meta></code> tag suffices to correct the problem: for example, to insure that the user agent interprets page content as <code>UTF-8</code>, include <code><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></code> in the <code><head></code> section of the HTML page. </p><p> If you are using Connector/J, see <a class="ulink" href="/doc/connector-j/en/connector-j-reference-charsets.html" target="_top">Using Character Sets and Unicode</a>. </p></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-how-use-4-0-charset"></a><a name="id382559"></a><p><b>A.11.10.</b></p></td><td align="left" valign="top"><p> I've upgraded to MySQL 5.7. How can I revert to behavior like that in MySQL 4.0 with regard to character sets? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> In MySQL Version 4.0, there was a single <span class="quote">“<span class="quote">global</span>”</span> character set for both server and client, and the decision as to which character to use was made by the server administrator. This changed starting with MySQL Version 4.1. What happens now is a <span class="quote">“<span class="quote">handshake</span>”</span>, as described in <a class="xref" href="charset-connection.html" title="10.4 Connection Character Sets and Collations">Section 10.4, “Connection Character Sets and Collations”</a>: </p> <div class="blockquote"> <blockquote class="blockquote"><p> When a client connects, it sends to the server the name of the character set that it wants to use. The server uses the name to set the <a class="link" href="server-system-variables.html#sysvar_character_set_client"><code>character\_set\_client</code></a>, <a class="link" href="server-system-variables.html#sysvar_character_set_results"><code>character\_set\_results</code></a>, and <a class="link" href="server-system-variables.html#sysvar_character_set_connection"><code>character\_set\_connection</code></a> system variables. In effect, the server performs a <a class="link" href="set-names.html" title="13.7.4.3 SET NAMES Statement"><code>SET NAMES</code></a> operation using the character set name. </p></blockquote> </div> <p> The effect of this is that you cannot control the client character set by starting <a class="link" href="mysqld.html" title="4.3.1 mysqld — The MySQL Server"><span><strong>mysqld</strong></span></a> with <a class="link" href="server-system-variables.html#sysvar_character_set_server"><code>--character-set-server=utf8</code></a>. However, some Asian customers prefer the MySQL 4.0 behavior. To make it possible to retain this behavior, we added a <a class="link" href="mysqld.html" title="4.3.1 mysqld — The MySQL Server"><span><strong>mysqld</strong></span></a> switch, <a class="link" href="server-options.html#option_mysqld_character-set-client-handshake"><code>--character-set-client-handshake</code></a>, which can be turned off with <a class="link" href="server-options.html#option_mysqld_character-set-client-handshake"><code>--skip-character-set-client-handshake</code></a>. If you start <a class="link" href="mysqld.html" title="4.3.1 mysqld — The MySQL Server"><span><strong>mysqld</strong></span></a> with <a class="link" href="server-options.html#option_mysqld_character-set-client-handshake"><code>--skip-character-set-client-handshake</code></a>, then, when a client connects, it sends to the server the name of the character set that it wants to use. However, <span class="emphasis"><em>the server ignores this request from the client</em></span>. </p><p> By way of example, suppose that your favorite server character set is <code>latin1</code>. Suppose further that the client uses <code>utf8</code> because this is what the client's operating system supports. Start the server with <code>latin1</code> as its default character set: </p><pre class="programlisting copytoclipboard language-terminal one-line"><code class="language-terminal">mysqld --character-set-server=latin1</code></pre><p> And then start the client with the default character set <code>utf8</code>: </p><pre class="programlisting copytoclipboard language-terminal one-line"><code class="language-terminal">mysql --default-character-set=utf8</code></pre><p> The resulting settings can be seen by viewing the output of <a class="link" href="show-variables.html" title="13.7.5.39 SHOW VARIABLES Statement"><code>SHOW VARIABLES</code></a>: </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">mysql> SHOW VARIABLES LIKE 'char%'; +--------------------------+----------------------------------------+ | Variable\_name            | Value                                  | +--------------------------+----------------------------------------+ | character\_set\_client     | utf8                                   | | character\_set\_connection | utf8                                   | | character\_set\_database   | latin1                                 | | character\_set\_filesystem | binary                                 | | character\_set\_results    | utf8                                   | | character\_set\_server     | latin1                                 | | character\_set\_system     | utf8                                   | | character\_sets\_dir       | /usr/local/mysql/share/mysql/charsets/ | +--------------------------+----------------------------------------+</code></pre><p> Now stop the client, and stop the server using <a class="link" href="mysqladmin.html" title="4.5.2 mysqladmin — A MySQL Server Administration Program"><span><strong>mysqladmin</strong></span></a>. Then start the server again, but this time tell it to skip the handshake like so: </p><pre class="programlisting copytoclipboard language-terminal one-line"><code class="language-terminal">mysqld --character-set-server=utf8 --skip-character-set-client-handshake</code></pre><p> Start the client with <code>utf8</code> once again as the default character set, then display the resulting settings: </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">mysql> SHOW VARIABLES LIKE 'char%'; +--------------------------+----------------------------------------+ | Variable\_name            | Value                                  | +--------------------------+----------------------------------------+ | character\_set\_client     | latin1                                 | | character\_set\_connection | latin1                                 | | character\_set\_database   | latin1                                 | | character\_set\_filesystem | binary                                 | | character\_set\_results    | latin1                                 | | character\_set\_server     | latin1                                 | | character\_set\_system     | utf8                                   | | character\_sets\_dir       | /usr/local/mysql/share/mysql/charsets/ | +--------------------------+----------------------------------------+</code></pre><p> As you can see by comparing the differing results from <a class="link" href="show-variables.html" title="13.7.5.39 SHOW VARIABLES Statement"><code>SHOW VARIABLES</code></a>, the server ignores the client's initial settings if the <a class="link" href="server-options.html#option_mysqld_character-set-client-handshake"><code>--skip-character-set-client-handshake</code></a> option is used. </p></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-why-cjk-fail-searches"></a><a name="id382619"></a><p><b>A.11.11.</b></p></td><td align="left" valign="top"><p> Why do some <a class="link" href="string-comparison-functions.html#operator_like"><code>LIKE</code></a> and <code>FULLTEXT</code> searches with CJK characters fail? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> For <a class="link" href="string-comparison-functions.html#operator_like"><code>LIKE</code></a> searches, there is a very simple problem with binary string column types such as <a class="link" href="binary-varbinary.html" title="11.3.3 The BINARY and VARBINARY Types"><code>BINARY</code></a> and <a class="link" href="blob.html" title="11.3.4 The BLOB and TEXT Types"><code>BLOB</code></a>: we must know where characters end. With multibyte character sets, different characters might have different octet lengths. For example, in <code>utf8</code>, <code>A</code> requires one byte but <code>ペ</code> requires three bytes, as shown here: </p><pre class="programlisting copytoclipboard language-none"><code class="language-none">+-------------------------+---------------------------+ | OCTET\_LENGTH(\_utf8 'A') | OCTET\_LENGTH(\_utf8 'ペ') | +-------------------------+---------------------------+ |                       1 |                         3 | +-------------------------+---------------------------+</code></pre><p> If we do not know where the first character in a string ends, we do not know where the second character begins, in which case even very simple searches such as <a class="link" href="string-comparison-functions.html#operator_like"><code>LIKE '\_A%'</code></a> fail. The solution is to use a nonbinary string column type defined to have the proper CJK character set. For example: <code>mycol TEXT CHARACTER SET sjis</code>. Alternatively, convert to a CJK character set before comparing. </p><p> This is one reason why MySQL cannot permit encodings of nonexistent characters. If it is not strict about rejecting bad input, it has no way of knowing where characters end. </p><p> For <code>FULLTEXT</code> searches, we must know where words begin and end. With Western languages, this is rarely a problem because most (if not all) of these use an easy-to-identify word boundary: the space character. However, this is not usually the case with Asian writing. We could use arbitrary halfway measures, like assuming that all Han characters represent words, or (for Japanese) depending on changes from Katakana to Hiragana due to grammatical endings. However, the only sure solution requires a comprehensive word list, which means that we would have to include a dictionary in the server for each Asian language supported. This is simply not feasible. </p></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-how-know-avail-characters"></a><a name="id382644"></a><p><b>A.11.12.</b></p></td><td align="left" valign="top"><p> How do I know whether character <em class="replaceable"><code>X</code></em> is available in all character sets? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> The majority of simplified Chinese and basic nonhalfwidth Japanese Kana characters appear in all CJK character sets. The following stored procedure accepts a <code>UCS-2</code> Unicode character, converts it to other character sets, and displays the results in hexadecimal. </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">DELIMITER //

Crie a seguinte cláusula CREATE PROCEDURE p\_convert(ucs2\_char CHAR(1) CHARACTER SET ucs2): BEGIN

Crie a tabela tj (ucs2 CHAR(1) conjunto de caracteres ucs2, utf8 CHAR(1) conjunto de caracteres utf8, big5 CHAR(1) conjunto de caracteres big5, cp932 CHAR(1) conjunto de caracteres cp932, eucjpms CHAR(1) conjunto de caracteres eucjpms, euckr CHAR(1) conjunto de caracteres euckr, gb2312 CHAR(1) conjunto de caracteres gb2312, gbk CHAR(1) conjunto de caracteres gbk, sjis CHAR(1) conjunto de caracteres sjis, ujis CHAR(1) conjunto de caracteres ujis);

INSERT INTO tj (ucs2) VALUES (ucs2\_char);

ATUALIZE tj SET utf8=ucs2, big5=ucs2, cp932=ucs2, eucjpms=ucs2, euckr=ucs2, gb2312=ucs2, gbk=ucs2, sjis=ucs2, ujis=ucs2;

/\* Se houver problemas de conversão, o UPDATE produz avisos. \*/

SELECT hex(ucs2) AS ucs2, hex(utf8) AS utf8, hex(big5) AS big5, hex(cp932) AS cp932, hex(eucjpms) AS eucjpms, hex(euckr) AS euckr, hex(gb2312) AS gb2312, hex(gbk) AS gbk, hex(sjis) AS sjis, hex(ujis) AS ujis FROM tj;

DROP TABLE tj;

FIM//

DELIMITER ;</code></pre><p> The input can be any single <code>ucs2</code> character, or it can be the code value (hexadecimal representation) of that character. For example, from Unicode's list of <code>ucs2</code> encodings and names (<a class="ulink" href="http://www.unicode.org/Public/UNIDATA/UnicodeData.txt" target="_blank"><http://www.unicode.org/Public/UNIDATA/UnicodeData.txt></a>), we know that the Katakana character <span class="foreignphrase"><em class="foreignphrase">Pe</em></span> appears in all CJK character sets, and that its code value is <code>X'30DA'</code>. If we use this value as the argument to <code>p\_convert()</code>, the result is as shown here: </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">mysql> CALL p\_convert(X'30DA'); +------+--------+------+-------+---------+-------+--------+------+------+------+ | ucs2 | utf8   | big5 | cp932 | eucjpms | euckr | gb2312 | gbk  | sjis | ujis | +------+--------+------+-------+---------+-------+--------+------+------+------+ | 30DA | E3839A | C772 | 8379  | A5DA    | ABDA  | A5DA   | A5DA | 8379 | A5DA | +------+--------+------+-------+---------+-------+--------+------+------+------+</code></pre><p> Since none of the column values is <code>3F</code> (that is, the question mark character, <code>?</code>), we know that every conversion worked. </p></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-how-cjk-sort-unicode-1"></a><a name="id382664"></a><p><b>A.11.13.</b></p></td><td align="left" valign="top"><p> Why do CJK strings sort incorrectly in Unicode? (I) </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"> <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"> <div class="admon-title"> Note </div> <p> The CJK sorting problems described here can occur for MySQL versions prior to MySQL 8.0. As of MySQL 8.0, they can be solved by using the <code>utf8mb4</code> character set and the <code>utf8mb4\_ja\_0900\_as\_cs</code> collation. </p> </div> <p> Sometimes people observe that the result of a <code>utf8\_unicode\_ci</code> or <code>ucs2\_unicode\_ci</code> search, or of an <code>ORDER BY</code> sort is not what they think a native would expect. Although we never rule out the possibility that there is a bug, we have found in the past that many people do not correctly read the standard table of weights for the Unicode Collation Algorithm. MySQL uses the tables found under <a class="ulink" href="http://www.unicode.org/Public/UCA/" target="_blank"><http://www.unicode.org/Public/UCA/></a>: </p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> UCA 4.0.0 table: <a class="ulink" href="http://www.unicode.org/Public/UCA/4.0.0/allkeys-4.0.0.txt" target="_blank"><http://www.unicode.org/Public/UCA/4.0.0/allkeys-4.0.0.txt></a> </p><p> This includes <code><em class="replaceable"><code>xxx</code></em>\_unicode\_ci</code> collations with no version number in the collation name. </p></li><li class="listitem"><p> UCA 5.2.0 table: <a class="ulink" href="http://www.unicode.org/Public/UCA/5.2.0/allkeys.txt" target="_blank"><http://www.unicode.org/Public/UCA/5.2.0/allkeys.txt></a> </p><p> This includes collations with <code>*520*</code> in the collation name. </p></li><li class="listitem"><p> UCA 9.0.0 table: <a class="ulink" href="http://www.unicode.org/Public/UCA/9.0.0/allkeys.txt" target="_blank"><http://www.unicode.org/Public/UCA/9.0.0/allkeys.txt></a> </p><p> This includes collations with <code>*0900*</code> in the collation name. </p></li></ul> </div> <p> To handle newer UCA versions, we create new collations. We are very wary about changing ordering of existing collations because that affects indexes, which can bring about situations such as that reported in Bug #16526, illustrated as follows: </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">mysql> CREATE TABLE tj (s1 CHAR(1) CHARACTER SET utf8 COLLATE utf8\_unicode\_ci); Query OK, 0 rows affected (0.05 sec)

mysql> INSERT INTO tj VALUES ('가'), ('か'); Consulta OK, 2 linhas afetadas (0,00 s) Registros: 2 Duplicatas: 0 Alertas: 0

mysql> SELECT \* FROM tj WHERE s1 = 'か'; +------+ | s1   | +------+ | が  | | か  | +------+</code></pre><p> The character in the first result row is not the one that we searched for. Why did MySQL retrieve it? First we look for the Unicode code point value, which is possible by reading the hexadecimal number for the <code>ucs2</code> version of the characters: </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">mysql> SELECT s1, HEX(CONVERT(s1 USING ucs2)) FROM tj; +------+-----------------------------+ | s1   | HEX(CONVERT(s1 USING ucs2)) | +------+-----------------------------+ | が  | 304C                        | | か  | 304B                        | +------+-----------------------------+</code></pre><p> Now we search for <code>304B</code> and <code>304C</code> in the <code>4.0.0 allkeys</code> table, and find these lines: </p><pre class="programlisting copytoclipboard language-none"><code class="language-none">304B  ; \[.1E57.0020.000E.304B] # HIRAGANA LETTER KA 304C  ; \[.1E57.0020.000E.304B]\[.0000.0140.0002.3099] # HIRAGANA LETTER GA; QQCM</code></pre><p> The official Unicode names (following the <span class="quote">“<span class="quote">#</span>”</span> mark) tell us the Japanese syllabary (Hiragana), the informal classification (letter, digit, or punctuation mark), and the Western identifier (<code>KA</code> or <code>GA</code>, which happen to be voiced and unvoiced components of the same letter pair). More importantly, the <span class="firstterm">primary weight</span> (the first hexadecimal number inside the square brackets) is <code>1E57</code> on both lines. For comparisons in both searching and sorting, MySQL pays attention to the primary weight only, ignoring all the other numbers. This means that we are sorting <code>が</code> and <code>か</code> correctly according to the Unicode specification. If we wanted to distinguish them, we'd have to use a non-UCA (Unicode Collation Algorithm) collation (<code>utf8\_bin</code> or <code>utf8\_general\_ci</code>), or to compare the <a class="link" href="string-functions.html#function_hex"><code>HEX()</code></a> values, or use <code>ORDER BY CONVERT(s1 USING sjis)</code>. Being correct <span class="quote">“<span class="quote">according to Unicode</span>”</span> is not enough, of course: the person who submitted the bug was equally correct. To solve this, we need another collation for Japanese according to the JIS X 4061 standard, in which voiced/unvoiced letter pairs like <code>KA</code>/<code>GA</code> are distinguishable for ordering purposes. </p></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-how-cjk-sort-unicode-2"></a><a name="id382724"></a><p><b>A.11.14.</b></p></td><td align="left" valign="top"><p> Why do CJK strings sort incorrectly in Unicode? (II) </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"> <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"> <div class="admon-title"> Note </div> <p> The CJK sorting problems described here can occur for MySQL versions prior to MySQL 8.0. As of MySQL 8.0, they can be solved by using the <code>utf8mb4</code> character set and the <code>utf8mb4\_ja\_0900\_as\_cs</code> collation. </p> </div> <p> If you are using Unicode (<code>ucs2</code> or <code>utf8</code>), and you know what the Unicode sort order is (see <a class="xref" href="faqs-cjk.html" title="A.11 MySQL 5.7 FAQ: MySQL Chinese, Japanese, and Korean Character Sets">Section A.11, “MySQL 5.7 FAQ: MySQL Chinese, Japanese, and Korean Character Sets”</a>), but MySQL still seems to sort your table incorrectly, first verify the character set in the table definition: </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">mysql> SHOW CREATE TABLE t\G \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* 1. row \*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\* Table: t Create Table: CREATE TABLE `t` ( `s1` char(1) CHARACTER SET ucs2 DEFAULT NULL ) ENGINE=MyISAM DEFAULT CHARSET=latin1</code></pre><p> Since the character set for the column <code>s1</code> appears to be correct (<code>ucs2</code>), check what information the <a class="link" href="information-schema-columns-table.html" title="24.3.5 The INFORMATION_SCHEMA COLUMNS Table"><code>INFORMATION\_SCHEMA.COLUMNS</code></a> table can provide about this column: </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">mysql> SELECT COLUMN\_NAME, CHARACTER\_SET\_NAME, COLLATION\_NAME FROM INFORMATION\_SCHEMA.COLUMNS WHERE COLUMN\_NAME = 's1' AND TABLE\_NAME = 't'; +-------------+--------------------+-----------------+ | COLUMN\_NAME | CHARACTER\_SET\_NAME | COLLATION\_NAME  | +-------------+--------------------+-----------------+ | s1          | ucs2               | ucs2\_general\_ci | +-------------+--------------------+-----------------+</code></pre><p> (See <a class="xref" href="information-schema-columns-table.html" title="24.3.5 The INFORMATION_SCHEMA COLUMNS Table">Section 24.3.5, “The INFORMATION\_SCHEMA COLUMNS Table”</a>, for more information.) </p><p> You can see that the collation is <code>ucs2\_general\_ci</code> instead of <code>ucs2\_unicode\_ci</code>. The reason why this is so can be found using <a class="link" href="show-character-set.html" title="13.7.5.3 SHOW CHARACTER SET Statement"><code>SHOW CHARACTER SET</code></a>, as shown here: </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">mysql> SHOW CHARSET LIKE 'ucs2%'; +---------+---------------+-------------------+--------+ | Charset | Description   | Default collation | Maxlen | +---------+---------------+-------------------+--------+ | ucs2    | UCS-2 Unicode | ucs2\_general\_ci   |      2 | +---------+---------------+-------------------+--------+</code></pre><p> For <code>ucs2</code> and <code>utf8</code>, the default collation is <span class="quote">“<span class="quote">general</span>”</span>. To specify a Unicode UCA collation, use <code>COLLATE ucs2\_unicode\_ci</code>, as shown in the preceding item. </p></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-why-supplement-char-rejected"></a><a name="id382762"></a><p><b>A.11.15.</b></p></td><td align="left" valign="top"><p> Why are my supplementary characters rejected by MySQL? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Supplementary characters lie outside the Unicode <span class="emphasis"><em>Basic Multilingual Plane / Plane 0</em></span>. BMP characters have code point values between <code>U+0000</code> and <code>U+FFFF</code>. Supplementary characters have code point values between <code>U+10000</code> and <code>U+10FFFF</code>. </p><p> To store supplementary characters, you must use a character set that permits them: </p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> The <code>utf8</code> and <code>ucs2</code> character sets support BMP characters only. </p><p> The <code>utf8</code> character set permits only <code>UTF-8</code> characters that take up to three bytes. This has led to reports such as that found in Bug
\#12600, which we rejected as <span class="quote">“<span class="quote">not a bug</span>”</span>. With <code>utf8</code>, MySQL must truncate an input string when it encounters bytes that it does no understand. Otherwise, it is unknown how long the bad multibyte character is. </p><p> One possible workaround is to use <code>ucs2</code> instead of <code>utf8</code>, in which case the <span class="quote">“<span class="quote">bad</span>”</span> characters are changed to question marks. However, no truncation takes place. You can also change the data type to <a class="link" href="blob.html" title="11.3.4 The BLOB and TEXT Types"><code>BLOB</code></a> or <a class="link" href="binary-varbinary.html" title="11.3.3 The BINARY and VARBINARY Types"><code>BINARY</code></a>, which perform no validity checking. </p></li><li class="listitem"><p> The <code>utf8mb4</code>, <code>utf16</code>, <code>utf16le</code>, and <code>utf32</code> character sets support BMP characters, as well as supplementary characters outside the BMP. </p></li></ul> </div> </td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-why-cjk-not-cjkv"></a><a name="id382797"></a><p><b>A.11.16.</b></p></td><td align="left" valign="top"><p> Should <span class="quote">“<span class="quote">CJK</span>”</span> be <span class="quote">“<span class="quote">CJKV</span>”</span>? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> No. The term <span class="quote">“<span class="quote">CJKV</span>”</span> (<span class="firstterm">Chinese Japanese Korean Vietnamese</span>) refers to Vietnamese character sets which contain Han (originally Chinese) characters. MySQL supports the modern Vietnamese script with Western characters, but does not support the old Vietnamese script using Han characters. </p><p> As of MySQL 5.6, there are Vietnamese collations for Unicode character sets, as described in <a class="xref" href="charset-unicode-sets.html" title="10.10.1 Unicode Character Sets">Section 10.10.1, “Unicode Character Sets”</a>. </p></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-how-cjk-db-table-names"></a><a name="id382808"></a><p><b>A.11.17.</b></p></td><td align="left" valign="top"><p> Does MySQL permit CJK characters to be used in database and table names? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Yes. </p></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-where-doc-translations"></a><a name="id382813"></a><p><b>A.11.18.</b></p></td><td align="left" valign="top"><p> Where can I find translations of the MySQL Manual into Chinese, Japanese, and Korean? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> The Japanese translation of the MySQL 5.6 manual can be downloaded from <a class="ulink" href="/doc/" target="_top"><https://dev.mysql.com/doc/></a>. </p></td></tr><tr class="question"><td align="left" valign="top"><a name="faq-cjk-help-with-cjk"></a><a name="id382819"></a><p><b>A.11.19.</b></p></td><td align="left" valign="top"><p> Where can I get help with CJK and related issues in MySQL? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> The following resources are available: </p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> A listing of MySQL user groups can be found at <a class="ulink" href="https://wikis.oracle.com/display/mysql/List+of+MySQL+User+Groups" target="_blank"><https://wikis.oracle.com/display/mysql/List+of+MySQL+User+Groups></a>. </p></li><li class="listitem"><p> View feature requests relating to character set issues at <a class="ulink" href="http://tinyurl.com/y6xcuf" target="_blank"><http://tinyurl.com/y6xcuf></a>. </p></li><li class="listitem"><p> Visit the MySQL <a class="ulink" href="https://forums.mysql.com/list.php?103" target="_blank">Character Sets, Collation, Unicode Forum</a>. <a class="ulink" href="http://forums.mysql.com/" target="_blank"><http://forums.mysql.com/></a> also provides foreign-language forums. </p></li></ul> </div> <p> </p></td></tr></tbody></table>
