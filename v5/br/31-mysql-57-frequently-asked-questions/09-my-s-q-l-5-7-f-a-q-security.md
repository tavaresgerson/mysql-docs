## A.9 Perguntas frequentes sobre o MySQL 5.7: Segurança

A.9.1. [Onde posso encontrar documentação que aborde questões de segurança para o MySQL?](faqs-security.html#faq-mysql-onde-docs-segurança)

A.9.2. [Qual é o plugin de autenticação padrão no MySQL 5.7?](faqs-security.html#faq-mysql-default-authentication-plugin)

A.9.3. [O MySQL tem suporte nativo para SSL?](faqs-security.html#faq-mysql-have-native-ssl)

A.9.4. [O suporte SSL está embutido nos binários do MySQL, ou eu preciso recompilar o binário manualmente para ativá-lo?](faqs-security.html#faq-mysql-is-ssl-available)

A.9.5. [O MySQL tem autenticação integrada contra diretórios LDAP?](faqs-security.html#faq-mysql-have-builtin-ldap)

A.9.6. [O MySQL inclui suporte para Controle de Acesso Baseado em Papéis (RBAC)?](faqs-security.html#faq-mysql-have-builtin-rbac)

A.9.7. [O MySQL suporta TLS 1.0 e 1.1?](faqs-security.html#faq-mysql-tls-versions)

<table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"/><col/></colgroup><tbody><tr class="question"><td align="left" valign="top"><p><b>A.9.1.</b></p></td><td align="left" valign="top"><p>Onde posso encontrar documentação que aborde questões de segurança para o MySQL?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O melhor lugar para começar éCapítulo 6,<i>Segurança</i>.</p><p>Outras partes da documentação do MySQL que você pode achar úteis em relação a preocupações específicas de segurança incluem as seguintes:</p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p> Seção 6.1.1, “Diretrizes de Segurança”.</p></li><li class="listitem"><p> Seção 6.1.3, “Tornar o MySQL seguro contra atacantes”.</p></li><li class="listitem"><p> Seção B.3.3.2, “Como redefinir a senha de root”.</p></li><li class="listitem"><p> Seção 6.1.5, “Como executar o MySQL como um usuário normal”.</p></li><li class="listitem"><p> Seção 6.1.4, “Opções e variáveis de mysqld relacionadas à segurança”.</p></li><li class="listitem"><p> Seção 6.1.6, “Considerações de segurança para LOAD DATA LOCAL”.</p></li><li class="listitem"><p> Seção 2.9, “Configuração e Teste Pós-Instalação”.</p></li><li class="listitem"><p> Seção 6.3, “Usando Conexões Encriptadas”.</p></li><li class="listitem"><p> Precauções de segurança para funções carregáveis.</p></li></ul> </div> <p> </p><p>Há também oGuia de implantação segura, que fornece procedimentos para implantar uma distribuição binária genérica do MySQL Enterprise Edition Server com recursos para gerenciar a segurança da sua instalação do MySQL.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.9.2.</b></p></td><td align="left" valign="top"><p>Qual é o plugin de autenticação padrão no MySQL 5.7?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O plugin de autenticação padrão no MySQL 5.7 é PH_HTML_CODE_<code class="language-terminal"><code>mysql_native_password</code>gt; sudo ldd usr/local/mysql/lib/libmysqlclient.a | grep -i openssl</code>]. Para obter informações sobre este plugin, consulteSeção 6.4.1.1, “Autenticação Plugável Native”Para informações gerais sobre autenticação plugável e outros plugins de autenticação disponíveis, consulteSeção 6.2.13, “Autenticação Conectada”, eSeção 6.4.1, “Plugins de Autenticação”.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.9.3.</b></p></td><td align="left" valign="top"><p>O MySQL tem suporte nativo para SSL?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Sim, os binários têm suporte para conexões SSL entre o cliente e o servidor. VejaSeção 6.3, “Usando Conexões Encriptadas”.</p><p>Você também pode criar um túnel de conexão usando SSH, caso (por exemplo) o aplicativo cliente não suporte conexões SSL. Para um exemplo, vejaSeção 6.3.5, “Conectar-se ao MySQL remotamente a partir do Windows com SSH”.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.9.4.</b></p></td><td align="left" valign="top"><p>O suporte SSL está embutido nos binários do MySQL, ou devo recompilar o binário manualmente para ativá-lo?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Sim, os binários têm SSL habilitado para conexões cliente/servidor que são seguras, autenticadas ou ambas. VejaSeção 6.3, “Usando Conexões Encriptadas”.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.9.5.</b></p></td><td align="left" valign="top"><p>O MySQL tem autenticação integrada contra diretórios LDAP?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A edição Enterprise inclui umPlugin de Autenticação PAMque suporta autenticação contra um diretório LDAP.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.9.6.</b></p></td><td align="left" valign="top"><p>O MySQL inclui suporte para Controle de Acesso Baseado em Papéis (RBAC)?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Não neste momento.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.9.7.</b></p></td><td align="left" valign="top"><p>O MySQL suporta TLS 1.0 e 1.1?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O suporte aos protocolos de conexão TLSv1 e TLSv1.1 foi removido a partir do MySQL 8.0.28. Os protocolos foram desaconselhados a partir do MySQL 8.0.26. Para as consequências dessa remoção, consulteProtocolos TLS obsoletos.</p><p>O suporte às versões TLS 1.0 e 1.1 foi removido porque essas versões do protocolo são antigas, lançadas em 1996 e 2006, respectivamente. Os algoritmos usados são fracos e desatualizados.</p><p>A menos que você esteja usando versões muito antigas do MySQL Server ou dos conectores, é improvável que você tenha conexões usando TLS 1.0 ou 1.1. Os conectores e clientes do MySQL selecionam a versão TLS mais alta disponível por padrão.</p><p> <span><em>Quando o suporte ao TLS 1.2 foi adicionado ao MySQL Server?</em></span>O MySQL Community Server adicionou suporte ao TLS 1.2 quando o servidor comunitário mudou para o OpenSSL para MySQL 5.6, 5.7 e 8.0 em 2019. Para a MySQL Enterprise Edition, o OpenSSL adicionou suporte ao TLS 1.2 em 2015, no MySQL Server 5.7.10.</p><p> <span><em>Como posso ver quais versões do TLS estão em uso ativo?</em></span>Para MySQL 5.7 ou 8.0, verifique se o TLS 1.0 ou 1.1 está em uso executando esta consulta:</p><pre class="programlisting copytoclipboard language-sql">PH_HTML_CODE_<code class="language-terminal"><code class="language-terminal"><code class="language-sql">SELECT `session_ssl_status`.`thread_id`, `session_ssl_status`.`ssl_version`, `session_ssl_status`.`ssl_cipher`, `session_ssl_status`.`ssl_sessions_reused` FROM `sys`.`session_ssl_status` WHERE ssl_version NOT IN ('TLSv1.3','TLSv1.2');</code>gt; sudo otool -l /usr/local/mysql/lib/libmysqlclient.a | grep -i openssl</code>gt; sudo ldd usr/local/mysql/lib/libmysqlclient.a | grep -i openssl</code>]</pre><p>Se um thread que usa TLSv1.0 ou TLSv1.1 estiver listado, você pode determinar de onde essa conexão está vindo ao executar essa consulta:</p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">SELECT thd_id,conn_id, user, db, current_statement, program_name FROM sys.processlist WHERE thd_id IN ( SELECT `session_ssl_status`.`thread_id` FROM `sys`.`session_ssl_status` WHERE ssl_version NOT IN ('TLSv1.3','TLSv1.2') );</code></pre><p>Alternativamente, você pode executar essa consulta:</p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">SELECT * FROM sys.session WHERE thd_id IN ( SELECT `session_ssl_status`.`thread_id` FROM `sys`.`session_ssl_status` WHERE ssl_version NOT IN ('TLSv1.3','TLSv1.2') );</code></pre><p>Essas consultas fornecem os detalhes necessários para determinar qual aplicativo não está suportando TLS 1.2 ou 1.3, e direcionam atualizações para esses aplicativos.</p><p> <span><em>Existem outras opções para testar o TLS 1.0 ou 1.1?</em></span>Sim, você pode desabilitar essas versões antes de atualizar seu servidor para uma versão mais recente. Especifique explicitamente qual versão usar, seja em <code>mysql.cnf</code> (ou <code>mysql.ini</code>) ou usando<code>SET PERSIST</code>, por exemplo:<code>--tls-version=TLSv12</code>.</p><p> <span><em>Todos os Conectores MySQL (5.7 e 8.0) suportam TLS 1.2 e versões superiores? E as aplicações em C e C++ que usam <code>libmysql</code>?</em></span>Para aplicações em C e C++ que utilizam a biblioteca comunitária <code>libmysqlclient</code>, use uma biblioteca baseada em OpenSSL (ou seja, faça<span><em>não</em></span>use YaSSL). O uso do OpenSSL foi unificado em 2018 (em MySQL 8.0.4 e 5.7.28, respectivamente). O mesmo se aplica ao Connector/ODBC e ao Connector/C++. Para determinar quais dependências da biblioteca estão sendo usadas, execute os seguintes comandos para verificar se o OpenSSL está listado. No Linux, use este comando:</p><pre class="programlisting copytoclipboard language-terminal one-line"><code class="language-terminal"><code class="language-sql">SELECT `session_ssl_status`.`thread_id`, `session_ssl_status`.`ssl_version`, `session_ssl_status`.`ssl_cipher`, `session_ssl_status`.`ssl_sessions_reused` FROM `sys`.`session_ssl_status` WHERE ssl_version NOT IN ('TLSv1.3','TLSv1.2');</code>0gt; sudo ldd usr/local/mysql/lib/libmysqlclient.a | grep -i openssl</code></pre><p>No MacOS, use este comando:</p><pre class="programlisting copytoclipboard language-terminal one-line"><code class="language-sql">SELECT `session_ssl_status`.`thread_id`, `session_ssl_status`.`ssl_version`, `session_ssl_status`.`ssl_cipher`, `session_ssl_status`.`ssl_sessions_reused` FROM `sys`.`session_ssl_status` WHERE ssl_version NOT IN ('TLSv1.3','TLSv1.2');</code><code class="language-terminal"><code class="language-terminal"><code class="language-sql">SELECT `session_ssl_status`.`thread_id`, `session_ssl_status`.`ssl_version`, `session_ssl_status`.`ssl_cipher`, `session_ssl_status`.`ssl_sessions_reused` FROM `sys`.`session_ssl_status` WHERE ssl_version NOT IN ('TLSv1.3','TLSv1.2');</code>gt; sudo otool -l /usr/local/mysql/lib/libmysqlclient.a | grep -i openssl</code>gt; sudo ldd usr/local/mysql/lib/libmysqlclient.a | grep -i openssl</code>]</pre><p>Confira a documentação de cada conector, mas eles suportam TLS 1.2 e TLS 1.3.</p></td></tr></tbody></table>
