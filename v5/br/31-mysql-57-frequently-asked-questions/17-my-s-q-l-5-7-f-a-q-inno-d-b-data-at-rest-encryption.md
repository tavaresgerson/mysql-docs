## A.17 FAQ do MySQL 5.7: Criptografia de Dados em Repouso (Data-at-Rest) do InnoDB

A.17.1. [Os dados são descriptografados para usuários autorizados a vê-los?](faqs-tablespace-encryption.html#faq-tablespace-encryption-access)

A.17.2. [Qual é o overhead associado à criptografia de dados em repouso do InnoDB?](faqs-tablespace-encryption.html#faq-tablespace-encryption-overhead)

A.17.3. [Quais são os algoritmos de criptografia usados com a criptografia de dados em repouso do InnoDB?](faqs-tablespace-encryption.html#faq-tablespace-encryption-algorithm)

A.17.4. [É possível usar algoritmos de criptografia de terceiros em vez do fornecido pelo recurso de criptografia de dados em repouso do InnoDB?](faqs-tablespace-encryption.html#faq-tablespace-encryption-other-algorithms)

A.17.5. [Colunas com Index podem ser criptografadas?](faqs-tablespace-encryption.html#faq-tablespace-encryption-indexed-columns)

A.17.6. [Quais tipos e comprimentos de dados a criptografia de dados em repouso do InnoDB suporta?](faqs-tablespace-encryption.html#faq-tablespace-encryption-data-types)

A.17.7. [Os dados permanecem criptografados na rede?](faqs-tablespace-encryption.html#faq-tablespace-encryption-network)

A.17.8. [A memória do Database contém dados em texto não criptografado (cleartext) ou criptografados?](faqs-tablespace-encryption.html#faq-tablespace-encryption-database-memory)

A.17.9. [Como eu sei quais dados criptografar?](faqs-tablespace-encryption.html#faq-tablespace-encryption-data-to-encrypt)

A.17.10. [Qual é a diferença entre a criptografia de dados em repouso do InnoDB e as funções de criptografia que o MySQL já oferece?](faqs-tablespace-encryption.html#faq-tablespace-encryption-mysql-encryption)

A.17.11. [O recurso de tablespaces transportáveis funciona com a criptografia de dados em repouso do InnoDB?](faqs-tablespace-encryption.html#faq-tablespace-encryption-transportable-tablespaces)

A.17.12. [A compressão funciona com a criptografia de dados em repouso do InnoDB?](faqs-tablespace-encryption.html#faq-tablespace-encryption-compression)

A.17.13. [Posso usar o mysqldump com tabelas criptografadas?](faqs-tablespace-encryption.html#faq-tablespace-encryption-mysqldump)

A.17.14. [Como eu altero (rodo, re-chaveio) a chave de criptografia mestre (master encryption key)?](faqs-tablespace-encryption.html#faq-tablespace-encryption-key-rotation)

A.17.15. [Como eu migro dados de um tablespace InnoDB em texto não criptografado (cleartext) para um tablespace InnoDB criptografado?](faqs-tablespace-encryption.html#faq-tablespace-encryption-data-migration)

A.17.16. [O recurso de dados em repouso do InnoDB pode armazenar a chave de criptografia mestre em um dispositivo externo usando a interface PKSC11?](faqs-tablespace-encryption.html#faq-tablespace-encryption-external-key-storage)

<table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"/><col/></colgroup><tbody><tr class="question"><td align="left" valign="top"><p><b>A.17.1.</b></p></td><td align="left" valign="top"><p> Os dados são descriptografados para usuários autorizados a vê-los? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Sim. A criptografia de dados em repouso do <code>InnoDB</code> foi projetada para aplicar a Encryption de forma transparente dentro do Database, sem impactar as aplicações existentes. Devolver dados em formato criptografado quebraria a maioria das aplicações existentes. A criptografia de dados em repouso do <code>InnoDB</code> oferece o benefício da Encryption sem o overhead associado às soluções tradicionais de Encryption de Database, que normalmente exigiriam alterações caras e substanciais nas aplicações, triggers de Database e views. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.2.</b></p></td><td align="left" valign="top"><p> Qual é o overhead associado à criptografia de dados em repouso do <code>InnoDB</code>? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Não há overhead de armazenamento adicional. De acordo com benchmarks internos, o overhead de performance equivale a uma diferença percentual de dígito único. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.3.</b></p></td><td align="left" valign="top"><p> Quais são os algoritmos de criptografia usados com a criptografia de dados em repouso do <code>InnoDB</code>? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> A criptografia de dados em repouso do <code>InnoDB</code> suporta o algoritmo de Encryption baseado em bloco Advanced Encryption Standard (AES256). Ele usa o modo de Encryption de bloco Electronic Codebook (ECB) para a Encryption da tablespace key e o modo de Encryption de bloco Cipher Block Chaining (CBC) para a Encryption dos dados. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.4.</b></p></td><td align="left" valign="top"><p> É possível usar algoritmos de criptografia de terceiros em vez do fornecido pelo recurso de criptografia de dados em repouso do <code>InnoDB</code>? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Não, não é possível usar outros algoritmos de Encryption. O algoritmo de Encryption fornecido é amplamente aceito. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.5.</b></p></td><td align="left" valign="top"><p> Colunas com Index podem ser criptografadas? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> A criptografia de dados em repouso do <code>InnoDB</code> suporta todos os Indexes de forma transparente. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.6.</b></p></td><td align="left" valign="top"><p> Quais tipos e comprimentos de dados a criptografia de dados em repouso do <code>InnoDB</code> suporta? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> A criptografia de dados em repouso do <code>InnoDB</code> suporta todos os tipos de dados suportados. Não há limitação de comprimento de dados. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.7.</b></p></td><td align="left" valign="top"><p> Os dados permanecem criptografados na rede? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Os dados criptografados pelo recurso de dados em repouso do <code>InnoDB</code> são descriptografados quando lidos do arquivo do tablespace. Assim, se os dados estiverem na rede, eles estarão em formato cleartext. No entanto, os dados na rede podem ser criptografados usando a Encryption de rede do MySQL, que criptografa dados transmitidos de e para um Database usando SSL/TLS. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.8.</b></p></td><td align="left" valign="top"><p> A memória do Database contém dados em texto não criptografado (cleartext) ou criptografados? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Com a criptografia de dados em repouso do <code>InnoDB</code>, os dados em memória são descriptografados, o que proporciona transparência completa. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.9.</b></p></td><td align="left" valign="top"><p> Como eu sei quais dados criptografar? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> A conformidade com o padrão PCI-DSS exige que números de cartão de crédito (Primary Account Number, ou 'PAN') sejam armazenados em formato criptografado. As Leis de Notificação de Violação (Breach Notification Laws) (por exemplo, CA SB 1386, CA AB 1950 e leis semelhantes em mais de 43 estados dos EUA) exigem a Encryption de primeiro nome, sobrenome, número de carteira de motorista e outros dados PII. No início de 2008, a CA AB 1298 adicionou informações médicas e de seguro saúde aos dados PII. Além disso, os padrões de privacidade e segurança específicos do setor podem exigir a Encryption de certos ativos. Por exemplo, ativos como resultados de pesquisas farmacêuticas, resultados de exploração de campos de petróleo, contratos financeiros ou dados pessoais de informantes de agências de aplicação da lei podem exigir Encryption. No setor de saúde, a privacidade dos dados de pacientes, registros de saúde e imagens de raios X é de suma importância. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.10.</b></p></td><td align="left" valign="top"><p> Qual é a diferença entre a criptografia de dados em repouso do <code>InnoDB</code> e as funções de criptografia que o MySQL já oferece? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Existem APIs de Encryption simétricas e assimétricas no MySQL que podem ser usadas para criptografar dados manualmente dentro do Database. No entanto, a aplicação deve gerenciar as encryption keys e realizar as operações necessárias de Encryption e descriptografia chamando funções da API. A criptografia de dados em repouso do <code>InnoDB</code> não exige alterações na aplicação, é transparente para os usuários finais e fornece gerenciamento de key automatizado e integrado (built-in). </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.11.</b></p></td><td align="left" valign="top"><p> O recurso de tablespaces transportáveis funciona com a criptografia de dados em repouso do <code>InnoDB</code>? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Sim. É suportado para tablespaces criptografados file-per-table. Para mais informações, consulte Exportando Tablespaces Criptografados. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.12.</b></p></td><td align="left" valign="top"><p> A compressão funciona com a criptografia de dados em repouso do <code>InnoDB</code>? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Clientes que usam a criptografia de dados em repouso do <code>InnoDB</code> recebem o benefício total da compressão porque a compressão é aplicada antes que os blocos de dados sejam criptografados. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.13.</b></p></td><td align="left" valign="top"><p> Posso usar o <code>mysqldump</code> com tabelas criptografadas? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Sim. Como esses utilitários criam backups lógicos, os dados despejados (dumped) de tabelas criptografadas não são criptografados. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.14.</b></p></td><td align="left" valign="top"><p> Como eu altero (rodo, re-chaveio) a chave de criptografia mestre (master encryption key)? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> A criptografia de dados em repouso do <code>InnoDB</code> usa um mecanismo de key de dois níveis. Quando a criptografia de dados em repouso é usada, as keys individuais do tablespace são armazenadas no header do arquivo de dados do tablespace subjacente. As keys do tablespace são criptografadas usando a master encryption key. A master encryption key é gerada quando a Encryption do tablespace é habilitada e é armazenada fora do Database. A master encryption key é rodada usando a instrução <code>ALTER INSTANCE ROTATE INNODB MASTER KEY</code>, que gera uma nova master encryption key, armazena a key e a roda para uso. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.15.</b></p></td><td align="left" valign="top"><p> Como eu migro dados de um tablespace <code>InnoDB</code> em texto não criptografado (cleartext) para um tablespace <code>InnoDB</code> criptografado? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> A transferência de dados de um tablespace para outro não é necessária. Para criptografar dados em um tablespace <code>InnoDB</code> file-per-table, execute <code>ALTER TABLE <em><code>tbl_name</code></em> ENCRYPTION = 'Y'</code>. Para criptografar um tablespace geral ou o tablespace <code>mysql</code>, execute <code>ALTER TABLESPACE <em><code>tablespace_name</code></em> ENCRYPTION = 'Y'</code>. O suporte à Encryption para tablespaces gerais foi introduzido no MySQL 8.0.13. O suporte à Encryption para o tablespace de sistema <code>mysql</code> está disponível a partir do MySQL 8.0.16. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.17.16.</b></p></td><td align="left" valign="top"><p> O recurso de dados em repouso do <code>InnoDB</code> pode armazenar a chave de criptografia mestre em um dispositivo externo usando a interface PKSC11? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Não neste momento. Atualmente, o protocolo KMIP 1.1 é suportado com o plugin <code>keyring_okv</code>, que está disponível no MySQL Enterprise Edition. </p></td></tr></tbody></table>