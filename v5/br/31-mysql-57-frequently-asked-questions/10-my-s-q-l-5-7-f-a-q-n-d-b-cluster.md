## A.10 Perguntas frequentes sobre o MySQL 5.7: NDB Cluster

Na seção a seguir, respondemos a perguntas frequentes sobre o NDB Cluster e o mecanismo de armazenamento [`NDB`](mysql-cluster.html).

A.10.1. [Quais versões do software MySQL suportam o NDB Cluster? Devo compilar a partir da fonte?](faqs-mysql-cluster.html#faq-cluster-quais-versions-support-cluster)

A.10.2. [O que significam “NDB” e “NDBCLUSTER”?](faqs-mysql-cluster.html#faq-cluster-o-que-e-ndb)

A.10.3. [Qual é a diferença entre usar o NDB Cluster e usar a replicação do MySQL?](faqs-mysql-cluster.html#faq-cluster-what-cluster-vs-replication)

A.10.4. [Eu preciso de alguma configuração especial de rede para executar o NDB Cluster? Como os computadores em um clúster se comunicam?](faqs-mysql-cluster.html#faq-cluster-how-cluster-network-need)

A.10.5. [Quantos computadores preciso ter para rodar um NDB Cluster e por quê?](faqs-mysql-cluster.html#faq-cluster-o-que-mínimo-de-hosts-é-necessário-para-o-cluster)

A.10.6. [O que os diferentes computadores fazem em um NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-what-hosts-do-clustering)

A.10.7. [Quando executo o comando SHOW no cliente de gerenciamento do NDB Cluster, vejo uma linha de saída que parece assim:](faqs-mysql-cluster.html#faq-cluster-what-show-nodegroup-star)

A.10.8. [Com quais sistemas operacionais posso usar o NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-which-os-clustering)

A.10.9. [Quais são os requisitos de hardware para executar o NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-what-cluster-requirements)

A.10.10. [Quanto de RAM eu preciso para usar o NDB Cluster? É possível usar memória de disco?](faqs-mysql-cluster.html#faq-cluster-what-memory-needed-cluster)

A.10.11. [Quais sistemas de arquivos posso usar com o NDB Cluster? E os sistemas de arquivos de rede ou compartilhamentos de rede?](faqs-mysql-cluster.html#faq-cluster-what-cluster-file-systems)

A.10.12. [Posso executar nós do NDB Cluster dentro de máquinas virtuais (como as criadas por VMWare, VirtualBox, Parallels ou Xen)?](faqs-mysql-cluster.html#faq-cluster-can-cluster-vm)

A.10.13. [Estou tentando popule um banco de dados de NDB Cluster. O processo de carregamento termina prematuramente e recebo uma mensagem de erro como esta:](faqs-mysql-cluster.html#faq-cluster-why-error-1114)

A.10.14. [O NDB Cluster usa TCP/IP. Isso significa que posso executá-lo na Internet, com um ou mais nós em locais remotos?](faqs-mysql-cluster.html#faq-cluster-can-cluster-remote-network)

A.10.15. [Eu preciso aprender um novo idioma de programação ou consulta para usar o NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-qual-linguagem-precisa-ser-usada-no-cluster)

A.10.16. [Quais linguagens de programação e APIs são suportadas pelo NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-what-api-cluster-support)

A.10.17. [O NDB Cluster inclui alguma ferramenta de gerenciamento?](faqs-mysql-cluster.html#faq-cluster-o-que-são-as-ferramentas-de-gerenciamento-do-cluster)

A.10.18. [Como descobrir o significado de uma mensagem de erro ou aviso ao usar o NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-what-cluster-errors-are)

A.10.19. [O NDB Cluster é seguro para transações? Quais níveis de isolamento são suportados?](faqs-mysql-cluster.html#faq-cluster-is-cluster-transaction-safe)

A.10.20. [Quais motores de armazenamento são suportados pelo NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-what-storage-engines-cluster)

A.10.21. [Em caso de falha catastrófica — por exemplo, toda a cidade perde energia e meu UPS falha — eu perderia todos os meus dados?](faqs-mysql-cluster.html#faq-cluster-is-data-loss-no-power)

A.10.22. [É possível usar índices FULLTEXT com o NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-can-cluster-fullindex)

A.10.23. [Posso executar vários nós em um único computador?](faqs-mysql-cluster.html#faq-cluster-can-multinode-cluster-one-host)

A.10.24. [Posso adicionar nós de dados a um NDB Cluster sem reiniciá-lo?](faqs-mysql-cluster.html#faq-cluster-como-adicionar-nós-sem-reiniciar)

A.10.25. [Existem alguma limitação que eu devo estar ciente ao usar o NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-what-cluster-limitations)

A.10.26. [O NDB Cluster suporta chaves estrangeiras?](faqs-mysql-cluster.html#faq-cluster-have-foreign-keys-cluster)

A.10.27. [Como importar um banco de dados MySQL existente para um NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-como-importar-db-cluster)

A.10.28. [Como os nós do NDB Cluster se comunicam entre si?](faqs-mysql-cluster.html#faq-cluster-como-os-n%C3%B3s-se-comunicam)

A.10.29. [O que é um árbitro?](faqs-mysql-cluster.html#faq-cluster-o-que-é-arbitro)

A.10.30. [Quais tipos de dados são suportados pelo NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-what-types-cluster-support)

A.10.31. [Como iniciar e parar o NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-como-iniciar-parar-cluster)

A.10.32. [O que acontece com os dados do NDB Cluster quando o cluster é desligado?](faqs-mysql-cluster.html#faq-cluster-what-shutdown-do-data)

A.10.33. [É uma boa ideia ter mais de um nó de gerenciamento para um NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-have-multiple-node-managers)

A.10.34. [Posso misturar diferentes tipos de hardware e sistemas operacionais em um único NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-have-different-cluster-hosts)

A.10.35. [Posso executar dois nós de dados em um único host? Dois nós SQL?](faqs-mysql-cluster.html#faq-cluster-have-multiple-nodes-one-host)

A.10.36. [Posso usar nomes de host com o NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-have-host-names-cluster)

A.10.37. [O NDB Cluster suporta IPv6?](faqs-mysql-cluster.html#faq-cluster-have-ipv6-support-cluster)

A.10.38. [Como gerenciar usuários do MySQL em um NDB Cluster com vários servidores MySQL?](faqs-mysql-cluster.html#faq-cluster-ter-vários-usuários-servidores-no-cluster)

A.10.39. [Como continuar enviando consultas caso um dos nós do SQL falhe?](faqs-mysql-cluster.html#faq-cluster-como-continuar-após-erro-no-nó)

A.10.40. [Como fazer backup e restaurar um NDB Cluster?](faqs-mysql-cluster.html#faq-cluster-como-fazer-backup-e-restaurar-cluster)

A.10.41. [O que é um "processo de anjo"?](faqs-mysql-cluster.html#faq-cluster-o-que-angel-process)

<table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"/><col/></colgroup><tbody><tr class="question"><td align="left" valign="top"><p><b>A.10.1.</b></p></td><td align="left" valign="top"><p>Quais versões do software MySQL suportam o NDB Cluster? Devo compilar a partir da fonte?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O NDB Cluster não é suportado nas versões padrão do MySQL Server. Em vez disso, o MySQL NDB Cluster é fornecido como um produto separado. As séries de versões do NDB Cluster disponíveis incluem as seguintes:</p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>NDB Cluster 7.3 / NDB Cluster 7.4.</b>Essas duas séries não são mais mantidas ou suportadas para novas implantações. Os usuários do NDB Cluster 7.3 ou 7.4 devem atualizar para o NDB 7.5 ou versões mais recentes o mais rápido possível. Recomendamos que novas implantações usem a versão mais recente do NDB Cluster 8.0.</p></li><li class="listitem"><p><b>NDB Cluster 7.5.</b>Esta série é uma versão anterior da NDB Cluster em Disponibilidade Geral (GA), ainda disponível para uso em produção, embora recomende-se que novas implantações usem a versão mais recente do NDB Cluster 8.0. As versões mais recentes do NDB Cluster 7.5 podem ser obtidas emhttps://dev.mysql.com/downloads/cluster/.</p></li><li class="listitem"><p><b>NDB Cluster 7.6.</b>Esta série é uma versão anterior da NDB Cluster em Disponibilidade Geral (GA), ainda disponível para uso em produção, embora recomende-se que novas implantações usem a versão mais recente do NDB Cluster 8.0. As versões mais recentes do NDB Cluster 7.6 podem ser obtidas emhttps://dev.mysql.com/downloads/cluster/.</p></li><li class="listitem"><p><b>NDB Cluster 8.0.</b>Esta série é a versão mais recente de Disponibilidade Geral (GA) do NDB Cluster, baseada na versão 8.0 doPH_HTML_CODE_<code>--ndbcluster</code>]motor de armazenamento e o MySQL Server 8.0. O NDB Cluster 8.0 está disponível para uso em produção; novas implantações destinadas à produção devem usar a versão mais recente do GA desta série, que atualmente é o NDB Cluster 8.0.44. Você pode obter a versão mais recente do NDB Cluster 8.0 emhttps://dev.mysql.com/downloads/cluster/Para obter informações sobre novas funcionalidades e outras mudanças importantes nesta série, consulteO que há de novo no MySQL NDB Cluster 8.0.</p></li></ul> </div> <p>Você pode obter e compilar o NDB Cluster a partir da fonte (consulteSeção 21.3.1.4, “Construindo um NDB Cluster a partir do código-fonte no Linux”, eSeção 21.3.2.2, “Compilar e instalar o NDB Cluster a partir da fonte no Windows”), mas para todos os casos, exceto os mais especializados, recomendamos o uso de um dos seguintes instaladores fornecidos pela Oracle que seja apropriado para sua plataforma operacional e circunstâncias:</p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Linuxlançamento binário(PH_HTML_CODE_<code>--ndbcluster</code>] arquivo)</p></li><li class="listitem"><p>LinuxPacote RPM </p></li><li class="listitem"><p>Linuxarquivo PH_HTML_CODE_<code>NDBCLUSTER</code>] </p></li><li class="listitem"><p>Windowsbinário<span class="quote">“<span class="quote">sem instalação</span>”</span>lançamento </p></li><li class="listitem"><p>WindowsInstalador MSI </p></li></ul> </div> <p>Os pacotes de instalação também podem estar disponíveis no sistema de gerenciamento de pacotes da sua plataforma.</p><p>Você pode determinar se o seu servidor MySQL temPH_HTML_CODE_<code>NDB</code>]suporte usando uma das declarações PH_HTML_CODE_<code>SHOW</code>],PH_HTML_CODE_<code>ALL STATUS</code>], ouPH_HTML_CODE_<code>SHUTDOWN</code>].</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.2.</b></p></td><td align="left" valign="top"><p>O que 
<span class="quote">“<span class="quote">NDB</span>”</span>e<span class="quote">“<span class="quote">NDBCLUSTER</span>”</span>O que isso significa?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> <span class="quote">“<span class="quote">NDB</span>”</span>significa<span class="quote">“<span class="quote"><span><strong>N</strong></span>etwork<span><strong>D</strong></span>ata<span><strong>b</strong></span>ase</span>”</span>. PH_HTML_CODE_<code class="language-terminal"><code>*</code>gt; ndb_mgm -e "SHUTDOWN"</code>] e PH_HTML_CODE_<code>-e</code>] são nomes para o mecanismo de armazenamento que permite o suporte a clúster com o MySQL. PH_HTML_CODE_<code>SHUTDOWN</code>] é a preferida, mas qualquer um dos nomes é correto.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.3.</b></p></td><td align="left" valign="top"><p>Qual é a diferença entre usar o NDB Cluster e usar a replicação do MySQL?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Na replicação tradicional do MySQL, um servidor MySQL fonte atualiza uma ou mais réplicas. As transações são confirmadas sequencialmente, e uma transação lenta pode fazer com que a réplica fique para trás em relação à fonte. Isso significa que, se a fonte falhar, é possível que a réplica não tenha registrado as últimas transações. Se um mecanismo seguro para transações, como o<code>tar.gz</code><code>--ndbcluster</code>]Quando uma transação é usada, ela é concluída na réplica ou não é aplicada de forma alguma, mas a replicação não garante que todos os dados na fonte e na réplica permaneçam consistentes em todos os momentos. No NDB Cluster, todos os nós de dados são mantidos em sincronia, e uma transação concluída por qualquer um dos nós de dados é concluída para todos os nós de dados. Em caso de falha de um nó de dados, todos os nós de dados restantes permanecem em um estado consistente.</p><p>Em resumo, enquanto a replicação padrão do MySQL é<span class="firstterm">assíncrona</span>, o NDB Cluster é<span class="firstterm">sincronizado</span>.</p><p>A replicação assíncrona também está disponível no NDB Cluster.<span class="firstterm">Replicação em cluster do NDB</span>(também conhecido como<span class="quote">“<span class="quote">geo-replicação</span>”</span>) inclui a capacidade de replicar tanto entre dois clusters NDB quanto de um cluster NDB para um servidor MySQL não cluster. VejaSeção 21.7, “Replicação em aglomerado do NDB”.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.4.</b></p></td><td align="left" valign="top"><p>Preciso de alguma configuração especial para rodar o NDB Cluster? Como os computadores em um clúster se comunicam?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O NDB Cluster é destinado a ser usado em um ambiente de alta largura de banda, com computadores conectados usando TCP/IP. Seu desempenho depende diretamente da velocidade de conexão entre os computadores do cluster. Os requisitos mínimos de conectividade para o NDB Cluster incluem uma rede Ethernet de 100 megabits ou equivalente. Recomendamos que você use Ethernet de gigabit sempre que disponível.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.5.</b></p></td><td align="left" valign="top"><p>Quantos computadores eu preciso para rodar um NDB Cluster, e por quê?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>É necessário, no mínimo, três computadores para rodar um clúster viável. No entanto, o mínimo<span class="emphasis"><em>recomendado</em></span>O número de computadores em um NDB Cluster é de quatro: um para cada um dos nós de gerenciamento e SQL, e dois computadores para servir como nós de dados. O objetivo dos dois nós de dados é fornecer redundância; o nó de gerenciamento deve ser executado em uma máquina separada para garantir serviços de arbitragem contínuos, caso um dos nós de dados falhe.</p><p>Para oferecer maior capacidade de processamento e alta disponibilidade, você deve usar vários nós SQL (servidores MySQL conectados ao clúster). Também é possível (embora não seja estritamente necessário) executar vários servidores de gerenciamento.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.6.</b></p></td><td align="left" valign="top"><p>O que os diferentes computadores fazem em um NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Um clúster do NDB possui uma organização física e lógica, com os computadores sendo os elementos físicos. Os elementos lógicos ou funcionais de um clúster são chamados de<span class="firstterm">nós</span>, e um computador que abriga um nó de cluster é às vezes referido como um<span class="firstterm">anfitrião de cluster</span>Existem três tipos de nós, cada um correspondendo a um papel específico dentro do clúster. São eles:</p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><b>Núcleo de gestão.</b>Esse nó fornece serviços de gerenciamento para o clúster como um todo, incluindo inicialização, desligamento, backups e dados de configuração para os outros nós. O servidor do nó de gerenciamento é implementado como a aplicação<span><strong>ndb_mgmd</strong></span>; o cliente de gerenciamento que costumava controlar o NDB Cluster é<span><strong>ndb_mgm</strong></span>VejaSeção 21.5.4, “ndb_mgmd — O daemon do servidor de gerenciamento de cluster NDB”, eSeção 21.5.5, “ndb_mgm — O cliente de gerenciamento de cluster NDB”, para obter informações sobre esses programas.</p></li><li class="listitem"><p><b>Núcleo de dados.</b>Esse tipo de nó armazena e replica dados. A funcionalidade do nó de dados é gerenciada por instâncias do<code>tar.gz</code><code>--ndbcluster</code>]processar nó de dados<span><strong>ndbd</strong></span>Para mais informações, consulteSeção 21.5.1, “ndbd — O daemon do nó de dados do cluster NDB”.</p></li><li class="listitem"><p><b>nó SQL.</b>Isto é simplesmente um exemplo do MySQL Server (<span><strong>mysqld</strong></span>) que é construído com suporte para o<code>tar.gz</code><code>NDBCLUSTER</code>]O motor de armazenamento foi iniciado com a opção <code>tar.gz</code><code>NDB</code>] para habilitar o motor e a opção <code>tar.gz</code><code>SHOW</code>] para permitir que ele se conecte a um servidor de gerenciamento de NDB Cluster. Para obter mais informações sobre essas opções, consulteSeção 21.4.3.9.1, “Opções do Servidor MySQL para NDB Cluster”.</p> <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"> <div class="admon-title">Nota</div> <p>Um<span class="firstterm">nó da API</span>é qualquer aplicativo que faz uso direto dos nós de dados do Cluster para armazenamento e recuperação de dados. Um nó SQL pode, portanto, ser considerado um tipo de nó de API que usa um servidor MySQL para fornecer uma interface SQL ao Cluster. Você pode escrever tais aplicativos (que não dependem de um servidor MySQL) usando a API NDB, que fornece uma interface de transação e varredura direta e orientada a objetos para os dados do Cluster NDB; vejaVisão geral da API do NDB Cluster: A API NDB, para mais informações.</p> </div> </li></ul> </div> </td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.7.</b></p></td><td align="left" valign="top"><p>Quando executo o comando <code>tar.gz</code><code>ALL STATUS</code>] no cliente de gerenciamento do NDB Cluster, vejo uma linha de saída que parece assim:</p><pre class="programlisting copytoclipboard language-none one-line"><code>tar.gz</code><code>SHUTDOWN</code>]</pre><p>O que significa o <code>tar.gz</code><code class="language-terminal"><code>*</code>gt; ndb_mgm -e "SHUTDOWN"</code>]? Como esse nó é diferente dos outros?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A resposta mais simples é que<span class="quote">“<span class="quote">Não é algo que você pode controlar, e não é algo com o que você precisa se preocupar, a menos que você seja um engenheiro de software escrevendo ou analisando o código-fonte do NDB Cluster</span>”</span>.</p><p>Se você não achar essa resposta satisfatória, aqui está uma versão mais longa e técnica:</p><p>Vários mecanismos no NDB Cluster exigem coordenação distribuída entre os nós de dados. Esses algoritmos e protocolos distribuídos incluem o checkpoint global, alterações no DDL (esquema) e gerenciamento de reinício de nós. Para tornar essa coordenação mais simples, os nós de dados<span class="quote">“<span class="quote">eleger</span>”</span>um deles para atuar como líder. Não há mecanismo voltado para o usuário para influenciar essa seleção, que é completamente automática; o fato de que<span class="emphasis"><em>é</em></span>O automático é uma parte fundamental da arquitetura interna do NDB Cluster.</p><p>Quando um nó atua como o<span class="quote">“<span class="quote">líder</span>”</span>Para qualquer um desses mecanismos, geralmente é o ponto de coordenação para a atividade, e os outros nós atuam como<span class="quote">“<span class="quote">seguidores</span>”</span>, realizando suas partes da atividade conforme orientado pelo líder. Se o nó que atua como líder falhar, então os nós restantes elegem um novo líder. As tarefas em andamento que estavam sendo coordenadas pelo antigo líder podem falhar ou ser continuadas pelo novo líder, dependendo do mecanismo real envolvido.</p><p>É possível que alguns desses mecanismos e protocolos tenham nós líderes diferentes, mas, em geral, o mesmo líder é escolhido para todos eles. O nó indicado como líder na saída de<code>tar.gz</code><code>-e</code>]no gerenciamento, o cliente é conhecido internamente como o<code>tar.gz</code><code>SHUTDOWN</code>]gerente, responsável por coordenar a atividade de DDL e metadados.</p><p>O NDB Cluster é projetado de tal forma que a escolha do líder não tenha um efeito perceptível fora do próprio clúster. Por exemplo, o líder atual não tem um uso de CPU ou recursos significativamente maior do que os outros nós de dados, e a falha do líder não deve ter um impacto significativamente diferente no clúster do que a falha de qualquer outro nó de dados.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.8.</b></p></td><td align="left" valign="top"><p>Com quais sistemas operacionais posso usar o NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O NDB Cluster é suportado na maioria dos sistemas operacionais semelhantes ao Unix. O NDB Cluster também é suportado em configurações de produção em sistemas operacionais Microsoft Windows.</p><p>Para obter informações mais detalhadas sobre o nível de suporte oferecido para o NDB Cluster em várias versões do sistema operacional, distribuições do sistema operacional e plataformas de hardware, consultehttps://www.mysql.com/support/supportedplatforms/cluster.html.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.9.</b></p></td><td align="left" valign="top"><p>Quais são os requisitos de hardware para rodar o NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O NDB Cluster deve ser executado em qualquer plataforma para a qual<code>.deb</code><code>--ndbcluster</code>]-binários habilitados estão disponíveis. Para nós de dados e nós de API, CPUs mais rápidas e mais memória provavelmente melhorarão o desempenho, e CPUs de 64 bits provavelmente serão mais eficazes do que os processadores de 32 bits. Deve haver memória suficiente nas máquinas usadas para nós de dados para conter a parte de cada nó do banco de dados (veja<span class="emphasis"><em>Quanto RAM eu preciso?</em></span>para mais informações). Para um computador que é usado apenas para executar o servidor de gerenciamento do NDB Cluster, os requisitos são mínimos; um PC de mesa comum (ou o equivalente) geralmente é suficiente para essa tarefa. Os nós podem se comunicar através da rede TCP/IP padrão e do hardware. Eles também podem usar o protocolo SCI de alta velocidade; no entanto, é necessário hardware e software de rede especiais para usar o SCI (vejaSeção 21.4.4, “Usando interconexões de alta velocidade com o NDB Cluster”).</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.10.</b></p></td><td align="left" valign="top"><p>Quanto de RAM eu preciso para usar o NDB Cluster? É possível usar memória de disco?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O NDB Cluster foi originalmente implementado apenas em memória, mas todas as versões atualmente disponíveis também oferecem a capacidade de armazenar o NDB Cluster em disco. VejaSeção 21.6.11, “Tabelas de dados de disco do cluster NDB”, para mais informações.</p><p>Para tabelas <code>.deb</code><code>--ndbcluster</code>] de memória, você pode usar a seguinte fórmula para obter uma estimativa aproximada de quanto RAM é necessário para cada nó de dados no clúster:</p><pre class="programlisting copytoclipboard language-simple one-line"><code>.deb</code><code>NDBCLUSTER</code>]</pre><p>Para calcular os requisitos de memória de forma mais precisa, é necessário determinar, para cada tabela no banco de dados do cluster, o espaço de armazenamento necessário por linha (consulteSeção 11.7, “Requisitos de Armazenamento de Tipo de Dados”(para detalhes), e multiplicando isso pelo número de linhas. Você também deve lembrar-se de considerar quaisquer índices de coluna da seguinte forma:</p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Cada chave primária ou índice de hash criado para um<code>.deb</code><code>NDB</code>]A tabela requer 21 a 25 bytes por registro. Esses índices usam <code>.deb</code><code>SHOW</code>].</p></li><li class="listitem"><p>Cada índice solicitado requer 10 bytes de armazenamento por registro, usando <code>.deb</code><code>ALL STATUS</code>].</p></li><li class="listitem"><p>Ao criar uma chave primária ou um índice único, também é criado um índice ordenado, a menos que esse índice seja criado com <code>.deb</code><code>SHUTDOWN</code>]. Em outras palavras:</p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>Uma chave primária ou índice único em uma tabela Cluster normalmente ocupa de 31 a 35 bytes por registro.</p></li><li class="listitem"><p>No entanto, se a chave primária ou o índice único for criado com <code>.deb</code><code class="language-terminal"><code>*</code>gt; ndb_mgm -e "SHUTDOWN"</code>], ele requer apenas 21 a 25 bytes por registro.</p></li></ul> </div> </li></ul> </div> <p>Criar tabelas de NDB Cluster com <code>.deb</code><code>-e</code>] para todas as chaves primárias e índices únicos geralmente faz com que as atualizações de tabela sejam executadas mais rapidamente — em alguns casos, até 20 a 30% mais rápido do que as atualizações em tabelas onde <code>.deb</code><code>SHUTDOWN</code>] não foi usado na criação de chaves primárias e únicas. Isso ocorre porque é necessário menos memória (porque não são criados índices ordenados) e que menos CPU deve ser utilizada (porque menos índices precisam ser lidos e, possivelmente, atualizados). No entanto, isso também significa que consultas que, de outra forma, poderiam usar varreduras de intervalo, devem ser satisfeitas por outros meios, o que pode resultar em seleções mais lentas.</p><p>Ao calcular os requisitos de memória em cluster, você pode achar útil o<span><strong>ndb_size.pl</strong></span>Essa utilidade está disponível nas versões recentes do MySQL 5.7. Esse script em Perl se conecta a um banco de dados MySQL atual (não Cluster) e cria um relatório sobre o espaço que esse banco de dados exigiria se fosse usado o<code>NDB</code><code>--ndbcluster</code>]motor de armazenamento. Para mais informações, consulteSeção 21.5.28, “ndb_size.pl — Estimator de Requisito de Tamanho NDBCLUSTER”.</p><p>É especialmente importante ter em mente que<span class="emphasis"><em>cada tabela do NDB Cluster deve ter uma chave primária</em></span>. O<code>NDB</code><code>--ndbcluster</code>]O mecanismo de armazenamento cria uma chave primária automaticamente se nenhuma for definida; essa chave primária é criada sem <code>NDB</code><code>NDBCLUSTER</code>].</p><p>Você pode determinar quanto memória está sendo usada para o armazenamento de dados e índices do NDB Cluster em um determinado momento usando o comando <code>NDB</code><code>NDB</code>] no<span><strong>ndb_mgm</strong></span>cliente; verSeção 21.6.1, “Comandos no cliente de gerenciamento de cluster NDB”Para mais informações, entre em contato conosco. Além disso, avisos são escritos no log do cluster quando 80% dos recursos disponíveis são utilizados.<code>NDB</code><code>SHOW</code>]ou (antes da NDB 7.6)<code>NDB</code><code>ALL STATUS</code>]está em uso e novamente quando o uso atinge 90%, 99% e 100%.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.11.</b></p></td><td align="left" valign="top"><p>Quais sistemas de arquivos posso usar com o NDB Cluster? E os sistemas de arquivos de rede ou compartilhamentos de rede?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Geralmente, qualquer sistema de arquivos nativo do sistema operacional do host deve funcionar bem com o NDB Cluster. Se você perceber que um determinado sistema de arquivos funciona particularmente bem (ou não tão bem) com o NDB Cluster, convidamos você a discutir suas descobertas noFóruns do NDB Cluster.</p><p>Para o Windows, recomendamos que você use os sistemas de arquivos <code>NDB</code><code>SHUTDOWN</code>] para o NDB Cluster, assim como fazemos com o MySQL padrão. Não testamos o NDB Cluster com os sistemas de arquivos <code>NDB</code><code class="language-terminal"><code>*</code>gt; ndb_mgm -e "SHUTDOWN"</code>] ou <code>NDB</code><code>-e</code>]. Por isso, não recomendamos seu uso com o MySQL ou o NDB Cluster.</p><p>O NDB Cluster é implementado como uma solução sem nada compartilhado; a ideia por trás disso é que o falecimento de um único componente de hardware não deve causar o falecimento de vários nós do cluster, ou possivelmente até o falecimento do cluster como um todo. Por essa razão, o uso de compartilhamentos de rede ou sistemas de arquivos de rede não é suportado para o NDB Cluster. Isso também se aplica a dispositivos de armazenamento compartilhados, como SANs.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.12.</b></p></td><td align="left" valign="top"><p>Posso executar nós do NDB Cluster dentro de máquinas virtuais (como as criadas pelo VMWare, VirtualBox, Parallels ou Xen)?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O NDB Cluster é suportado para uso em máquinas virtuais. Atualmente, suportamos e testamos o uso deOracle VM.</p><p>Alguns usuários do NDB Cluster conseguiram implantar o NDB Cluster usando outros produtos de virtualização; nesses casos, a Oracle pode fornecer suporte ao NDB Cluster, mas problemas específicos ao ambiente virtual devem ser encaminhados ao fornecedor do produto.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.13.</b></p></td><td align="left" valign="top"><p>Estou tentando popule um banco de dados NDB Cluster. O processo de carregamento termina prematuramente e recebo uma mensagem de erro como esta:</p><p> <code>NDB</code><code>SHUTDOWN</code>] </p><p>Por que isso está acontecendo?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A causa provavelmente é que sua configuração não fornece RAM suficiente para todos os dados da tabela e todos os índices,<span class="emphasis"><em>incluindo a chave primária exigida pelo<code>SHOW VARIABLES LIKE 'have_%'</code><code>--ndbcluster</code>]motor de armazenamento e criado automaticamente caso a definição da tabela não inclua a definição de uma chave primária</em></span>.</p><p>Vale ressaltar também que todos os nós de dados devem ter a mesma quantidade de RAM, pois nenhum nó de dados em um clúster pode usar mais memória do que a quantidade mínima disponível para qualquer nó de dados individual. Por exemplo, se houver quatro computadores hospedando nós de dados do Cluster, e três deles têm 3 GB de RAM disponíveis para armazenar dados do Cluster, enquanto o nó de dados restante tem apenas 1 GB de RAM, então cada nó de dados pode dedicar no máximo 1 GB para os dados e índices do NDB Cluster.</p><p>Em alguns casos, é possível obter<span class="errortext">A mesa está cheia</span>erros em aplicativos de cliente MySQL, mesmo quando<span><strong>ndb_mgm -e "TODOS OS RELATÓRIOS DE USO DE MEMÓRIA"</strong></span>indica livremente<code>SHOW VARIABLES LIKE 'have_%'</code><code>--ndbcluster</code>]Você pode forçar<code>SHOW VARIABLES LIKE 'have_%'</code><code>NDBCLUSTER</code>]para criar partições extras para as tabelas do NDB Cluster e, assim, ter mais memória disponível para índices de hash usando a opção <code>SHOW VARIABLES LIKE 'have_%'</code><code>NDB</code> para<code>SHOW VARIABLES LIKE 'have_%'</code><code>SHOW</code>]Em geral, definir <code>SHOW VARIABLES LIKE 'have_%'</code><code>ALL STATUS</code>] para o dobro do número de linhas que você espera armazenar na tabela deve ser suficiente.</p><p>Por razões semelhantes, você também pode, às vezes, encontrar problemas com reinicializações de nós de dados em nós que estão muito carregados com dados.<code>SHOW VARIABLES LIKE 'have_%'</code><code>SHUTDOWN</code>]O parâmetro pode ajudar com esse problema, reservando uma porção (5% por padrão)<code>SHOW VARIABLES LIKE 'have_%'</code><code class="language-terminal"><code>*</code>gt; ndb_mgm -e "SHUTDOWN"</code>]e (antes da NDB 7.6)<code>SHOW VARIABLES LIKE 'have_%'</code><code>-e</code>]para uso em reinicializações. Essa memória reservada não está disponível para armazenamento<code>SHOW VARIABLES LIKE 'have_%'</code><code>SHUTDOWN</code>]tabelas ou dados.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.14.</b></p></td><td align="left" valign="top"><p>O NDB Cluster usa TCP/IP. Isso significa que posso executá-lo pela Internet, com um ou mais nós em locais remotos?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>É<span class="emphasis"><em>muito</em></span>É improvável que um clúster funcione de forma confiável nessas condições, pois o NDB Cluster foi projetado e implementado com a suposição de que seria executado em condições que garantissem conectividade dedicada de alta velocidade, como a encontrada em um ambiente de LAN usando Ethernet de 100 Mbps ou gigabit — de preferência o último. Não testamos nem garantimos seu desempenho usando nada mais lento que isso.</p><p>Além disso, é extremamente importante ter em mente que as comunicações entre os nós de um NDB Cluster não são seguras; elas não são criptografadas nem protegidas por nenhum outro mecanismo de proteção. A configuração mais segura para um cluster é em uma rede privada atrás de um firewall, sem acesso direto a nenhum dos dados ou nós de gerenciamento do cluster de fora. (Para nós SQL, você deve tomar as mesmas precauções que faria com qualquer outra instância do servidor MySQL.) Para mais informações, consulteSeção 21.6.18, “Problemas de segurança do cluster NDB”.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.15.</b></p></td><td align="left" valign="top"><p>Eu preciso aprender um novo idioma de programação ou de consulta para usar o NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> <span class="emphasis"><em>Não</em></span>Embora alguns comandos especializados sejam usados para gerenciar e configurar o próprio clúster, apenas instruções padrão (My)SQL são necessárias para as seguintes operações:</p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Criar, alterar e excluir tabelas</p></li><li class="listitem"><p>Inserindo, atualizando e excluindo dados de tabela</p></li><li class="listitem"><p>Criar, alterar e excluir índices primários e exclusivos</p></li></ul> </div> <p>Alguns parâmetros de configuração especializados e arquivos são necessários para configurar um NDB Cluster — consulteSeção 21.4.3, “Arquivos de configuração do cluster NDB”, para obter informações sobre esses.</p><p>Alguns comandos simples são usados no cliente de gerenciamento do NDB Cluster (<span><strong>ndb_mgm</strong></span>) para tarefas como iniciar e parar os nós do cluster. VejaSeção 21.6.1, “Comandos no cliente de gerenciamento de cluster NDB”.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.16.</b></p></td><td align="left" valign="top"><p>Quais linguagens de programação e APIs são suportadas pelo NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O NDB Cluster suporta as mesmas APIs e linguagens de programação do servidor MySQL padrão, incluindo ODBC, .Net, a API C do MySQL e vários drivers para linguagens de script populares, como PHP, Perl e Python. As aplicações do NDB Cluster escritas usando essas APIs se comportam de maneira semelhante às outras aplicações MySQL; elas transmitem instruções SQL para um servidor MySQL (no caso do NDB Cluster, um nó SQL) e recebem respostas contendo linhas de dados. Para obter mais informações sobre essas APIs, consulteCapítulo 27,<i>Conectores e APIs</i>.</p><p>O NDB Cluster também suporta a programação de aplicativos usando a API NDB, que fornece uma interface C++ de baixo nível para os dados do NDB Cluster sem a necessidade de passar pelo MySQL Server. VejaA API do NDBAlém disso, muitos<code>SHOW ENGINES</code><code>--ndbcluster</code>]As funções de gerenciamento são expostas pela API MGM em C; vejaA API da MGM, para mais informações.</p><p>O Cluster NDB também suporta a programação de aplicativos Java usando o ClusterJ, que suporta um modelo de objeto de domínio de dados usando sessões e transações. VejaJava e NDB Cluster, para mais informações.</p><p>O NDB Cluster 8.0 também inclui adaptadores que suportam aplicações NoSQL escritas contra <code>SHOW ENGINES</code><code>--ndbcluster</code>], com o NDB Cluster como o repositório de dados. VejaConector MySQL NoSQL para JavaScript, para mais informações.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.17.</b></p></td><td align="left" valign="top"><p>O NDB Cluster inclui alguma ferramenta de gerenciamento?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O NDB Cluster inclui um cliente de linha de comando para realizar funções básicas de gerenciamento. VejaSeção 21.5.5, “ndb_mgm — O cliente de gerenciamento de cluster NDB”, eSeção 21.6.1, “Comandos no cliente de gerenciamento de cluster NDB”.</p><p>O NDB Cluster também é suportado pelo MySQL Cluster Manager, um produto separado que oferece uma interface de linha de comando avançada que pode automatizar muitas tarefas de gerenciamento do NDB Cluster, como reinicializações em rolagem e alterações de configuração. Para obter mais informações sobre o MySQL Cluster Manager, consulteManual do usuário do MySQL Cluster Manager 1.4.8.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.18.</b></p></td><td align="left" valign="top"><p>Como descobrir o que significa uma mensagem de erro ou aviso ao usar o NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Existem duas maneiras de fazer isso:</p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Do interior do<span><strong>mysql</strong></span>cliente, use<span><strong>EXIBIR ERROS</strong></span>ou<span><strong>MOSTRE ALARMES</strong></span>imediatamente após ser notificado sobre o erro ou a condição de alerta.</p></li><li class="listitem"><p>Do prompt de linha de comando do sistema, use<span><strong>perror --ndb<em><code>SHOW ENGINES</code><code>NDBCLUSTER</code>]</em></strong></span>.</p></li></ul> </div> </td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.19.</b></p></td><td align="left" valign="top"><p>O NDB Cluster é seguro para transações? Quais níveis de isolamento são suportados?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> <span class="emphasis"><em>Sim</em></span>. Para tabelas criadas com o<code>SHOW ENGINES</code><code>NDB</code>]motor de armazenamento, as transações são suportadas. Atualmente, o NDB Cluster suporta apenas<code>SHOW ENGINES</code><code>SHOW</code>]nível de isolamento de transação.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.20.</b></p></td><td align="left" valign="top"><p>Quais motores de armazenamento são suportados pelo NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O NDB Cluster exige<code>SHOW ENGINES</code><code>ALL STATUS</code>]O motor de armazenamento. Ou seja, para que uma tabela seja compartilhada entre os nós de um NDB Cluster, a tabela deve ser criada usando <code>SHOW ENGINES</code><code>SHUTDOWN</code>] (ou a opção equivalente <code>SHOW ENGINES</code><code class="language-terminal"><code>*</code>gt; ndb_mgm -e "SHUTDOWN"</code>]).</p><p>É possível criar tabelas usando outros motores de armazenamento (como o 
)<code>SHOW ENGINES</code><code>-e</code>]ou<code>SHOW ENGINES</code><code>SHUTDOWN</code>]) em um servidor MySQL sendo usado com o NDB Cluster, mas como essas tabelas não usam<code>SHOW PLUGINS</code><code>--ndbcluster</code>]Eles não participam do agrupamento; cada tabela é estritamente local à instância do servidor MySQL individual em que é criada.</p><p>O ND-B Cluster é bastante diferente de<code>SHOW PLUGINS</code><code>--ndbcluster</code>]agrupamento em termos de arquitetura, requisitos e implementação; apesar de qualquer semelhança em seus nomes, os dois não são compatíveis. Para mais informações sobre o agrupamento <code>SHOW PLUGINS</code><code>NDBCLUSTER</code>], consulteMySQL AdminAPIVeja tambémSeção 21.2.6, “Servidor MySQL usando InnoDB em comparação com NDB Cluster”, para obter informações sobre as diferenças entre os motores de armazenamento <code>SHOW PLUGINS</code><code>NDB</code>] e <code>SHOW PLUGINS</code><code>SHOW</code>].</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.21.</b></p></td><td align="left" valign="top"><p>Em caso de falha catastrófica — por exemplo, toda a cidade perde energia elétrica<span class="emphasis"><em>e</em></span>Se o meu UPS falhar, eu perderia todos os meus dados?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Todas as transações confirmadas são registradas. Portanto, embora seja possível que alguns dados sejam perdidos em caso de catástrofe, isso deve ser bastante limitado. A perda de dados pode ser ainda menor ao minimizar o número de operações por transação. (Não é uma boa ideia realizar um grande número de operações por transação, em qualquer caso.)</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.22.</b></p></td><td align="left" valign="top"><p>É possível usar índices <code>SHOW PLUGINS</code><code>ALL STATUS</code>] com o NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A indexação <code>SHOW PLUGINS</code><code>SHUTDOWN</code>] é atualmente suportada apenas pelo<code>SHOW PLUGINS</code><code class="language-terminal"><code>*</code>gt; ndb_mgm -e "SHUTDOWN"</code>]e<code>SHOW PLUGINS</code><code>-e</code>]Motores de armazenamento. VejaSeção 12.9, “Funções de pesquisa de texto completo”, para mais informações.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.23.</b></p></td><td align="left" valign="top"><p>Posso executar vários nós em um único computador?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>É possível, mas nem sempre é aconselhável. Uma das principais razões para rodar um clúster é fornecer redundância. Para obter os benefícios completos dessa redundância, cada nó deve estar em uma máquina separada. Se você colocar vários nós em uma única máquina e essa máquina falhar, você perde todos esses nós. Por essa razão, se você realmente rodar vários nós de dados em uma única máquina, é 
[O texto foi traduzido de forma incompleta devido ao limite de caracteres. A tradução completa seria: "É possível, mas nem sempre é aconselhável. Uma das principais razões para rodar um clúster é fornecer redundância. Para obter os benefícios completos dessa redundância, cada nó deve estar em uma máquina separada. Se você colocar vários nós em uma única máquina e essa máquina falhar, você perde todos esses nós. Por essa razão, se você realmente rodar vários nós de dados em uma única máquina, é necessário ter uma segunda máquina para garantir a continuidade do serviço."]<span class="emphasis"><em>extremamente</em></span>É importante que eles sejam configurados de tal forma que a falha dessa máquina não cause a perda de todos os nós de dados em um determinado grupo de nós.</p><p>Dado que o NDB Cluster pode ser executado em hardware comum com um sistema operacional de baixo custo (ou até mesmo gratuito), o custo de uma máquina extra ou duas vale muito a pena para proteger dados críticos para a missão. Vale também ressaltar que os requisitos para um hospedeiro de cluster executando um nó de gerenciamento são mínimos. Essa tarefa pode ser realizada com uma CPU Pentium de 300 MHz ou equivalente e RAM suficiente para o sistema operacional, além de uma pequena quantidade de overhead para o cluster.<span><strong>ndb_mgmd</strong></span>e<span><strong>ndb_mgm</strong></span>processos.</p><p>É aceitável executar vários nós de dados de cluster em um único host que tenha múltiplos CPUs, núcleos ou ambos. A distribuição do NDB Cluster também fornece uma versão multithread do binário do nó de dados destinada ao uso em tais sistemas. Para mais informações, consulteSeção 21.5.3, “ndbmtd — O daemon do nó de dados do cluster NDB (multi-threaded)”.</p><p>Em alguns casos, também é possível executar nós de dados e nós de SQL simultaneamente na mesma máquina; o desempenho dessa configuração depende de vários fatores, como o número de núcleos e CPUs, bem como a quantidade de disco e memória disponíveis para os processos do nó de dados e do nó de SQL, e você deve levar esses fatores em consideração ao planejar essa configuração.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.24.</b></p></td><td align="left" valign="top"><p>Posso adicionar nós de dados a um NDB Cluster sem reiniciá-lo?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>É possível adicionar novos nós de dados a um NDB Cluster em execução sem tirar o cluster do ar. Para obter mais informações, consulteSeção 21.6.7, “Adicionar nós de dados do NDB Cluster Online”.</p><p>Para outros tipos de nós do NDB Cluster, um reinício contínuo é tudo o que é necessário (consulteSeção 21.6.5, “Realizar um Reinício Rotativo de um NDB Cluster”).</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.25.</b></p></td><td align="left" valign="top"><p>Existem alguma limitação que eu devo estar ciente ao usar o NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Limitações em<code>SHOW PLUGINS</code><code>SHUTDOWN</code>]As tabelas no MySQL NDB Cluster incluem o seguinte:</p> <div class="itemizedlist"> <ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>As tabelas temporárias não são suportadas; uma<code>NDB</code><code>--ndbcluster</code>]A declaração usando <code>NDB</code><code>--ndbcluster</code>] ou <code>NDB</code><code>NDBCLUSTER</code>] falha com um erro.</p></li><li class="listitem"><p>Os únicos tipos de particionamento definidos pelo usuário suportados para<code>NDB</code><code>NDB</code>]As tabelas são <code>NDB</code><code>SHOW</code>] e <code>NDB</code><code>ALL STATUS</code>]. Tentar criar uma tabela <code>NDB</code><code>SHUTDOWN</code>] usando qualquer outro tipo de particionamento falha com um erro.</p></li><li class="listitem"><p>Os índices <code>NDB</code><code class="language-terminal"><code>*</code>gt; ndb_mgm -e "SHUTDOWN"</code>] não são suportados.</p></li><li class="listitem"><p>Os prefixos de índice não são suportados. Apenas colunas completas podem ser indexadas.</p></li><li class="listitem"><p>Os índices espaciais não são suportados (embora as colunas espaciais possam ser usadas). VejaSeção 11.4, “Tipos de dados espaciais”.</p></li><li class="listitem"><p>O suporte para transações parciais e recuos parciais é comparável ao de outros motores de armazenamento transacional, como<code>NDB</code><code>-e</code>]que podem reverter declarações individuais.</p></li><li class="listitem"><p>O número máximo de atributos permitidos por tabela é de 512. Os nomes dos atributos não podem ter mais de 31 caracteres. Para cada tabela, o comprimento combinado máximo dos nomes da tabela e do banco de dados é de 122 caracteres.</p></li><li class="listitem"><p>Antes da versão 8.0 do NDB, o tamanho máximo de uma linha de tabela era de 14 kilobytes, sem contar<code>NDB</code><code>SHUTDOWN</code>]valores. No NDB 8.0, esse limite é aumentado para 30000 bytes. VejaSeção 21.2.7.5, “Limites associados a objetos de banco de dados no NDB Cluster”, para mais informações.</p><p>Não há um limite definido para o número de linhas por tabela <code>NDBCLUSTER</code><code>--ndbcluster</code>]. Os limites de tamanho da tabela dependem de vários fatores, em particular da quantidade de RAM disponível para cada nó de dados.</p></li></ul> </div> <p>Para uma lista completa das limitações no NDB Cluster, consulteSeção 21.2.7, “Limitações conhecidas do NDB Cluster”Veja tambémProblemas anteriores do NDB Cluster resolvidos no NDB Cluster 8.0.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.26.</b></p></td><td align="left" valign="top"><p>O NDB Cluster suporta chaves estrangeiras?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O NDB Cluster oferece suporte para restrições de chave estrangeira, o que é comparável ao encontrado no<code>NDBCLUSTER</code><code>--ndbcluster</code>]motor de armazenamento; verSeção 1.6.3.2, “Restrições de Chave Estrangeira”, para informações mais detalhadas, bem comoSeção 13.1.18.5, “Restrições de Chave Estrangeira”As aplicações que exigem suporte para chave estrangeira devem usar o NDB Cluster 7.3, 7.4, 7.5 ou versões posteriores.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.27.</b></p></td><td align="left" valign="top"><p>Como importar um banco de dados MySQL existente para um NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Você pode importar bancos de dados no NDB Cluster da mesma forma que faria com qualquer outra versão do MySQL. Além das limitações mencionadas em outras partes desta FAQ, o único requisito especial é que quaisquer tabelas a serem incluídas no cluster devem usar o<code>NDBCLUSTER</code><code>NDBCLUSTER</code>]motor de armazenamento. Isso significa que as tabelas devem ser criadas com <code>NDBCLUSTER</code><code>NDB</code>] ou <code>NDBCLUSTER</code><code>SHOW</code>].</p><p>Também é possível converter tabelas existentes que utilizam outros motores de armazenamento para<code>NDBCLUSTER</code><code>ALL STATUS</code>]usando um ou mais<code>NDBCLUSTER</code><code>SHUTDOWN</code>]No entanto, a definição da tabela deve ser compatível com a<code>NDBCLUSTER</code><code class="language-terminal"><code>*</code>gt; ndb_mgm -e "SHUTDOWN"</code>]O mecanismo de armazenamento é necessário antes de efetuar a conversão. No MySQL 5.7, também é necessário um recurso adicional; vejaSeção 21.2.7, “Limitações conhecidas do NDB Cluster”, para mais detalhes.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.28.</b></p></td><td align="left" valign="top"><p>Como os nós do NDB Cluster se comunicam entre si?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Os nós do cluster podem se comunicar por meio de qualquer um dos três mecanismos de transporte diferentes: TCP/IP, SHM (memória compartilhada) e SCI (Interface Coerente Escalável). Quando disponível, o SHM é usado por padrão entre nós que residem no mesmo host do cluster; no entanto, isso é considerado experimental. O SCI é um protocolo de alta velocidade (1 gigabit por segundo ou mais), de alta disponibilidade, usado na construção de sistemas multiprocessadores escaláveis; ele requer hardware e drivers especiais. VejaSeção 21.4.4, “Usando interconexões de alta velocidade com o NDB Cluster”, para mais informações sobre o uso do SCI como mecanismo de transporte para o NDB Cluster.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.29.</b></p></td><td align="left" valign="top"><p>O que é um<span class="firstterm">arbitrador</span>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Se um ou mais nós de dados de um clúster falharem, é possível que nem todos os nós de dados do clúster sejam capazes de<span class="quote">“<span class="quote">ver</span>”</span>Na verdade, é possível que dois conjuntos de nós de dados se tornem isolados um do outro em uma partição de rede, também conhecida como<span class="quote">“<span class="quote">split-brain</span>”</span>Esse tipo de situação é indesejável porque cada conjunto de nós de dados tenta se comportar como se fosse todo o clúster. É necessário um árbitro para decidir entre os conjuntos de nós de dados concorrentes.</p><p>Quando todos os nós de dados de pelo menos um grupo de nós estão vivos, a partição da rede não é um problema, porque nenhum subconjunto único do clúster pode formar um clúster funcional por si só. O problema real surge quando nenhum grupo de nós tem todos os seus nós vivos, caso em que a partição da rede (a<span class="quote">“<span class="quote">split-brain</span>”</span>(cenário) torna-se possível. Então, um árbitro é necessário. Todos os nós do clúster reconhecem o mesmo nó como o árbitro, que normalmente é o servidor de gerenciamento; no entanto, é possível configurar qualquer um dos servidores MySQL no clúster para atuar como o árbitro em vez disso. O árbitro aceita o primeiro conjunto de nós do clúster para contatá-lo e diz ao conjunto restante para desligar. A seleção do árbitro é controlada pelo parâmetro de configuração <code>NDBCLUSTER</code><code>-e</code>] para os nós do servidor MySQL e dos nós do servidor de gerenciamento. Você também pode usar o parâmetro de configuração <code>NDBCLUSTER</code><code>SHUTDOWN</code>] para controlar o processo de seleção do árbitro. Para obter mais informações sobre esses parâmetros, consulteSeção 21.4.3.5, “Definindo um servidor de gerenciamento de cluster NDB”.</p><p>O papel de árbitro não impõe, por si só, demandas pesadas ao anfitrião designado, e, portanto, o anfitrião árbitro não precisa ser particularmente rápido ou ter memória extra, especialmente para esse propósito.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.30.</b></p></td><td align="left" valign="top"><p>Quais tipos de dados são suportados pelo NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O NDB Cluster suporta todos os tipos de dados comuns do MySQL, incluindo os associados às extensões espaciais do MySQL; no entanto,<code>NDB</code><code>--ndbcluster</code>]O mecanismo de armazenamento não suporta índices espaciais. (Os índices espaciais são suportados apenas por<code>NDB</code><code>--ndbcluster</code>]; verSeção 11.4, “Tipos de dados espaciais”, para mais informações.) Além disso, há algumas diferenças em relação aos índices quando usados com<code>NDB</code><code>NDBCLUSTER</code>]mesas.</p> <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"> <div class="admon-title">Nota</div> <p>As tabelas de dados do disco do NDB Cluster (ou seja, tabelas criadas com <code>NDB</code><code>NDB</code>] ou <code>NDB</code><code>SHOW</code>]) têm apenas linhas de largura fixa. Isso significa que, por exemplo, cada registro da tabela de dados do disco que contém um<code>NDB</code><code>ALL STATUS</code>]A coluna exige espaço para 255 caracteres (como exigido pelo conjunto de caracteres e ordenação utilizados para a tabela), independentemente do número real de caracteres armazenados nela.</p> </div> <p>VejaSeção 21.2.7, “Limitações conhecidas do NDB Cluster”, para mais informações sobre esses assuntos.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.31.</b></p></td><td align="left" valign="top"><p>Como iniciar e parar o NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>É necessário iniciar cada nó do clúster separadamente, na seguinte ordem:</p> <div class="orderedlist"> <ol class="orderedlist" type="1"><li class="listitem"><p>Inicie o nó de gerenciamento, usando o<span><strong>ndb_mgmd</strong></span>comando.</p><p>Ao iniciar o cluster pela primeira vez, você deve incluir o<code>NDB</code><code>SHUTDOWN</code>]ou<code>NDB</code><code class="language-terminal"><code>*</code>gt; ndb_mgm -e "SHUTDOWN"</code>]opção para informar o nó de gerenciamento onde seu arquivo de configuração pode ser encontrado.</p></li><li class="listitem"><p>Comece cada nó de dados com o<span><strong>ndbd</strong></span>comando.</p><p>Cada nó de dados deve ser iniciado com o<code>NDB</code><code>-e</code>]ou<code>NDB</code><code>SHUTDOWN</code>]Opção para que o nó de dados saiba como se conectar ao servidor de gerenciamento.</p></li><li class="listitem"><p>Comece cada servidor MySQL (nó SQL) usando o script de inicialização preferido, como<span><strong>mysqld_safe</strong></span>.</p><p>Cada servidor MySQL deve ser iniciado com o<code>--ndbcluster</code>e<code>InnoDB</code><code>--ndbcluster</code>]Opções. Essas opções causam<span><strong>mysqld</strong></span>para permitir<code>NDBCLUSTER</code>suporte ao motor de armazenamento e como se conectar ao servidor de gerenciamento.</p></li></ol> </div> <p>Cada um desses comandos deve ser executado a partir de uma janela de sistema na máquina que abriga o nó afetado. (Você não precisa estar fisicamente presente na máquina — uma janela de login remoto pode ser usada para esse propósito.) Você pode verificar se o clúster está em execução iniciando o<code>NDB</code>gestão de clientes<span><strong>ndb_mgm</strong></span>na máquina que abriga o nó de gerenciamento e emite o comando <code>SHOW</code> ou <code>ALL STATUS</code>.</p><p>Para encerrar um clúster em execução, execute o comando <code>SHUTDOWN</code> no cliente de gerenciamento. Alternativamente, você pode digitar o seguinte comando em um shell do sistema:</p><pre class="programlisting copytoclipboard language-terminal one-line"><code class="language-terminal"><code>InnoDB</code>7gt; ndb_mgm -e "SHUTDOWN"</code></pre><p>(As aspas neste exemplo são opcionais, uma vez que não há espaços na string de comando após a opção <code>-e</code>; além disso, o comando <code>SHUTDOWN</code>, como outros comandos do cliente de gerenciamento, não é sensível ao caso.)</p><p>Qualquer um desses comandos faz com que<span><strong>ndb_mgm</strong></span>,<span><strong>ndb_mgm</strong></span>, e qualquer<span><strong>ndbd</strong></span>Os processos para encerrar de forma suave. Os servidores MySQL que estão rodando como nós SQL podem ser interrompidos usando<span><strong>mysqladmin shutdown</strong></span>.</p><p>Para mais informações, consulteSeção 21.6.1, “Comandos no cliente de gerenciamento de cluster NDB”, eSeção 21.3.6, "Desligamento e Reinício Seguro do NDB Cluster".</p><p>O MySQL Cluster Manager oferece maneiras adicionais de lidar com o início e o término dos nós do NDB Cluster. VejaManual do usuário do MySQL Cluster Manager 1.4.8, para mais informações sobre essa ferramenta.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.32.</b></p></td><td align="left" valign="top"><p>O que acontece com os dados do NDB Cluster quando o cluster é desligado?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Os dados que estavam armazenados na memória dos nós de dados do clúster são gravados em disco e recarregados na memória na próxima vez que o clúster for iniciado.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.33.</b></p></td><td align="left" valign="top"><p>É uma boa ideia ter mais de um nó de gerenciamento para um NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Pode ser útil como uma solução de segurança. Apenas um nó de gerenciamento controla o clúster em um momento dado, mas é possível configurar um nó de gerenciamento como primário e um ou mais nós de gerenciamento adicionais para assumir no caso de o nó de gerenciamento primário falhar.</p><p>VejaSeção 21.4.3, “Arquivos de configuração do cluster NDB”, para obter informações sobre como configurar os nós de gerenciamento do NDB Cluster.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.34.</b></p></td><td align="left" valign="top"><p>Posso misturar diferentes tipos de hardware e sistemas operacionais em um único NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Sim, desde que todas as máquinas e sistemas operacionais tenham o mesmo<span class="quote">“<span class="quote">endianness</span>”</span>(todos em big-endian ou todos em little-endian).</p><p>É também possível usar software de diferentes versões do NDB Cluster em diferentes nós. No entanto, suportamos esse uso apenas como parte de um procedimento de atualização contínua (consulteSeção 21.6.5, “Realizar um Reinício Rotativo de um NDB Cluster”).</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.35.</b></p></td><td align="left" valign="top"><p>Posso executar dois nós de dados em um único host? Dois nós SQL?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Sim, é possível fazer isso. No caso de múltiplos nós de dados, é aconselhável (mas não obrigatório) que cada nó use um diretório de dados diferente. Se você quiser executar múltiplos nós SQL em uma única máquina, cada instância<span><strong>mysqld</strong></span>deve usar uma porta TCP/IP diferente.</p><p>É possível executar nós de dados e nós de SQL juntos no mesmo host, mas você deve estar ciente de que<span><strong>ndbd</strong></span>ou<span><strong>ndbmtd</strong></span>Os processos podem competir pela memória com<span><strong>mysqld</strong></span>.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.36.</b></p></td><td align="left" valign="top"><p>Posso usar nomes de host com o NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Sim, é possível usar DNS e DHCP para hosts de cluster. No entanto, se sua aplicação exigir<span class="quote">“<span class="quote">cinco nines</span>”</span>Para garantir a disponibilidade, você deve usar endereços IP fixos (numéricos), pois tornar a comunicação entre os hosts do cluster dependente de serviços como DNS e DHCP introduz pontos de falha adicionais.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.37.</b></p></td><td align="left" valign="top"><p>O NDB Cluster suporta IPv6?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O IPv6 é suportado para conexões entre nós do SQL (servidores MySQL), mas as conexões entre todos os outros tipos de nós do NDB Cluster devem usar o IPv4.</p><p>Em termos práticos, isso significa que você pode usar o IPv6 para replicação entre NDB Clusters, mas as conexões entre os nós do mesmo NDB Cluster devem usar o IPv4. Para obter mais informações, consulteSeção 21.7.3, “Problemas Conhecidos na Replicação de NDB Cluster”.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.38.</b></p></td><td align="left" valign="top"><p>Como gerenciar usuários do MySQL em um NDB Cluster com vários servidores MySQL?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>As contas e privilégios dos usuários do MySQL normalmente não são propagados automaticamente entre diferentes servidores MySQL que acessam o mesmo NDB Cluster. O NDB Cluster do MySQL oferece suporte a privilégios distribuídos, que você pode habilitar seguindo um procedimento fornecido na documentação; vejaSeção 21.6.13, “Privilégios distribuídos usando tabelas de concessão compartilhadas”, para mais informações.</p> <div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"> <div class="admon-title">Importante</div> <p>O mecanismo para lidar com usuários distribuídos ou compartilhados entre os nós do NDB Cluster SQL mudou significativamente no NDB 8.0; essa implementação não é compatível com a do NDB 7.6 e versões anteriores. VejaSincronização de privilégios e NDB_STORED_USER, para mais detalhes.</p> </div> </td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.39.</b></p></td><td align="left" valign="top"><p>Como posso continuar enviando consultas caso um dos nós SQL falhe?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>O MySQL NDB Cluster não oferece nenhum tipo de falha automática entre os nós SQL. Sua aplicação deve estar preparada para lidar com a perda dos nós SQL e para realizar a transição entre eles.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.40.</b></p></td><td align="left" valign="top"><p>Como fazer backup e restaurar um NDB Cluster?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Você pode usar a funcionalidade de backup e restauração nativa do NDB Cluster no cliente de gerenciamento do NDB e no<span><strong>ndb_restore</strong></span>Veja o programa.Seção 21.6.8, “Backup Online do NDB Cluster”, eSeção 21.5.24, “ndb_restore — Restaurar um backup de um cluster NDB”.</p><p>Você também pode usar a funcionalidade tradicional fornecida para esse propósito em<span><strong>mysqldump</strong></span>e o servidor MySQL. VejaSeção 4.5.4, “mysqldump — Um programa de backup de banco de dados”, para mais informações.</p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.10.41.</b></p></td><td align="left" valign="top"><p>O que é um<span class="quote">“<span class="quote">processo de anjo</span>”</span>?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Esse processo monitora e, se necessário, tenta reiniciar o processo do nó de dados. Se você verificar a lista de processos ativos no seu sistema após iniciar<span><strong>ndbd</strong></span>, você pode ver que, na verdade, existem 2 processos rodando com esse nome, como mostrado aqui (olhamos para cima da saída de<span><strong>ndb_mgmd</strong></span>e<span><strong>ndbd</strong></span>para brevidade):</p><pre class="programlisting copytoclipboard language-terminal"><code class="language-terminal">$&gt; ./ndb_mgmd

$> ps aux | grep ndb me      23002  0.0  0.0 122948  3104 ?        Ssl  14:14   0:00 ./ndb_mgmd me      23025  0.0  0.0   5284   820 pts/2    S+   14:14   0:00 grep ndb

$> ./ndbd -c 127.0.0.1 --initial

$> ps aux | grep ndb me      23002  0.0  0.0 123080  3356 ?        Ssl  14:14   0:00 ./ndb_mgmd me      23096  0.0  0.0  35876  2036 ?        Ss   14:14   0:00 ./ndbmtd -c 127.0.0.1 --initial me      23097  1.0  2.4 524116 91096 ?        Sl   14:14   0:00 ./ndbmtd -c 127.0.0.1 --initial me      23168  0.0  0.0   5284   812 pts/2    R+   14:15   0:00 grep ndb\`</pre><p> O processo <span><strong>ndbd</strong></span> mostrando <code>0.0</code> tanto para uso de memória quanto de CPU é o processo anjo (embora ele realmente use uma quantidade muito pequena de cada). Este processo apenas verifica se o principal <span><strong>ndbd</strong></span> ou <span><strong>ndbmtd</strong></span> (o processo do nó de dados principal que realmente lida com os dados) está em execução. Se permitido (por exemplo, se o parâmetro de configuração <code>StopOnError</code></code> for definido como <code>false</code>), o processo anjo tenta reiniciar o processo do nó de dados principal. </p></td></tr></tbody></table>
