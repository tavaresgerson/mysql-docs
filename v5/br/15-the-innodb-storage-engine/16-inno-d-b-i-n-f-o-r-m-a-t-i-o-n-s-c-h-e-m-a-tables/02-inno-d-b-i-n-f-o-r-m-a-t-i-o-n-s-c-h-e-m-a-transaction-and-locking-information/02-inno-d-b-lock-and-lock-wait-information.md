#### 14.16.2.2 Informações sobre bloqueio e espera de bloqueio do InnoDB

Quando uma transação atualiza uma linha em uma tabela ou bloqueia-a com `SELECT FOR UPDATE`, o `InnoDB` estabelece uma lista ou fila de bloqueios nessa linha. Da mesma forma, o `InnoDB` mantém uma lista de bloqueios em uma tabela para bloqueios de nível de tabela. Se uma segunda transação quiser atualizar uma linha ou bloquear uma tabela já bloqueada por uma transação anterior em um modo incompatível, o `InnoDB` adiciona uma solicitação de bloqueio para a linha à fila correspondente. Para que um bloqueio seja adquirido por uma transação, todas as solicitações de bloqueio incompatíveis previamente inseridas na fila de bloqueio para essa linha ou tabela devem ser removidas (o que ocorre quando as transações que detêm ou solicitam esses bloqueios realizam um commit ou um rollback).

Uma transação pode ter qualquer número de solicitações de bloqueio para diferentes linhas ou tabelas. Em qualquer momento, uma transação pode solicitar um bloqueio que está sendo mantido por outra transação, caso em que será bloqueada por essa outra transação. A transação solicitante deve esperar que a transação que mantém o bloqueio seja confirmada ou revertida. Se uma transação não estiver aguardando um bloqueio, ela está no estado `RUNNING` (em execução). Se uma transação estiver aguardando um bloqueio, ela está no estado `LOCK WAIT` (esperando por bloqueio). (A tabela `INNODB_TRX` do `INFORMATION_SCHEMA` indica os valores do estado da transação.)

A tabela `INNODB_LOCKS` contém uma ou mais linhas para cada transação `LOCK WAIT`, indicando quaisquer solicitações de bloqueio que impeçam seu progresso. Esta tabela também contém uma linha que descreve cada bloqueio em uma fila de bloqueios pendentes para uma determinada linha ou tabela. A tabela `INNODB_LOCK_WAITS` mostra quais bloqueios já mantidos por uma transação estão bloqueando bloqueios solicitados por outras transações.
