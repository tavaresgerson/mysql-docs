#### 14.6.2.2. A Estrutura Física de um Índex InnoDB

Com exceção dos índices espaciais, os índices `InnoDB` são estruturas de dados B-tree. Os índices espaciais usam árvores R, que são estruturas de dados especializadas para indexação de dados multidimensionais. Os registros do índice são armazenados nas páginas finais de sua estrutura de dados B-tree ou R-tree. O tamanho padrão de uma página de índice é de 16 KB. O tamanho da página é determinado pelo ajuste `innodb_page_size` quando a instância do MySQL é inicializada. Veja a Seção 14.8.1, “Configuração de Inicialização do InnoDB”.

Quando novos registros são inseridos em um índice agrupado `InnoDB`, o `InnoDB` tenta deixar 1/16 da página livre para futuras inserções e atualizações dos registros do índice. Se os registros do índice forem inseridos em ordem sequencial (ascendente ou descendente), as páginas do índice resultantes ficarão aproximadamente 15/16 cheias. Se os registros forem inseridos em ordem aleatória, as páginas ficarão de 1/2 a 15/16 cheias.

O `InnoDB` realiza uma carga em massa ao criar ou reconstruir índices de árvore B. Esse método de criação de índices é conhecido como construção de índice ordenado. A variável `innodb_fill_factor` define a porcentagem de espaço em cada página da árvore B que é preenchida durante a construção de um índice ordenado, com o espaço restante reservado para o crescimento futuro do índice. Construções de índices ordenados não são suportadas para índices espaciais. Para mais informações, consulte a Seção 14.6.2.3, “Construções de Índices Ordenados”. Um ajuste de `innodb_fill_factor` de 100 deixa 1/16 do espaço em páginas de índice agrupado livre para o crescimento futuro do índice.

Se o fator de preenchimento de uma página de índice `InnoDB` cair abaixo do `MERGE_THRESHOLD`, que é 50% por padrão, se não for especificado, o `InnoDB` tenta contrair a árvore de índice para liberar a página. O ajuste `MERGE_THRESHOLD` aplica-se tanto a índices de tipo B-tree quanto a índices de tipo R-tree. Para mais informações, consulte a Seção 14.8.12, “Configurando o Limite de Fusão para Páginas de Índice”.
