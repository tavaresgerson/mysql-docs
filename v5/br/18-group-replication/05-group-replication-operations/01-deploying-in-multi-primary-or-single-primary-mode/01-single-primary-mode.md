#### 17.5.1.1 Modo de Primordial Único

Nesse modo, o grupo tem um servidor primário único configurado no modo de leitura e escrita. Todos os outros membros do grupo estão configurados no modo de leitura apenas (com `super-read-only=ON`). Isso acontece automaticamente. O primário é normalmente o primeiro servidor a inicializar o grupo, todos os outros servidores que se juntam automaticamente aprendem sobre o servidor primário e são configurados para leitura apenas.

**Figura 17.5 Nova eleição primária**

![Cinco instâncias de servidor, S1, S2, S3, S4 e S5, são implantadas como um grupo interconectado. O servidor S1 é o principal. Os clientes de escrita estão se comunicando com o servidor S1, e um cliente de leitura está se comunicando com o servidor S4. O servidor S1 então falha, interrompendo a comunicação com os clientes de escrita. O servidor S2 então assume o novo papel de principal, e os clientes de escrita agora se comunicam com o servidor S2.](images/eleição-de-primário-único.png)

No modo de único membro primário, alguns dos controles implementados no modo de múltiplos membros primários são desativados, pois o sistema exige que apenas um único servidor escreva no grupo. Por exemplo, as alterações em tabelas que possuem chaves estrangeiras em cascata são permitidas, enquanto no modo de múltiplos membros primários não são. Após a falha do membro primário, um mecanismo automático de eleição primária escolhe o novo membro primário. O processo de eleição é realizado analisando a nova visão e ordenando os novos potenciais primários com base no valor de `group_replication_member_weight`. Supondo que o grupo esteja operando com todos os membros executando a mesma versão do MySQL, então o membro com o valor mais alto para `group_replication_member_weight` é eleito como o novo primário. No caso de vários servidores terem o mesmo `group_replication_member_weight`, os servidores são então priorizados com base em seu `server_uuid` em ordem lexicográfica e escolhendo o primeiro. Uma vez que um novo primário é eleito, ele é automaticamente configurado para leitura e escrita e os outros secundários permanecem como secundários e, como tal, apenas de leitura.

Quando um novo primário é eleito, ele só pode ser escrito uma vez que processou todas as transações que vieram do primário antigo. Isso evita possíveis problemas de concorrência entre as transações antigas do primário antigo e as novas que estão sendo executadas neste membro. É uma boa prática aguardar que o novo primário aplique seu relay-log relacionado à replicação antes de redirecionar os aplicativos do cliente para ele.

Se o grupo estiver operando com membros que estão executando diferentes versões do MySQL, o processo de eleição pode ser impactado. Por exemplo, se algum membro não apoiar `group_replication_member_weight`, então o primário será escolhido com base na ordem de `server_uuid` dos membros da versão principal mais baixa. Alternativamente, se todos os membros que estão executando diferentes versões do MySQL apoiarem `group_replication_member_weight`, o primário será escolhido com base em `group_replication_member_weight` dos membros da versão principal mais baixa.
