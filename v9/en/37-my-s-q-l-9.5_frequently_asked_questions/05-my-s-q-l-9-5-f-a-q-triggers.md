## A.5 MySQL 9.5 FAQ: Triggers

A.5.1. Where can I find the documentation for MySQL 9.5 triggers?

A.5.2. Is there a discussion forum for MySQL Triggers?

A.5.3. Does MySQL have statement-level or row-level triggers?

A.5.4. Are there any default triggers?

A.5.5. How are triggers managed in MySQL?

A.5.6. Is there a way to view all triggers in a given database?

A.5.7. Where are triggers stored?

A.5.8. Can a trigger call a stored procedure?

A.5.9. Can triggers access tables?

A.5.10. Can a table have multiple triggers with the same trigger event and action time?

A.5.11. Is it possible for a trigger to update tables on a remote server?

A.5.12. Do triggers work with replication?

A.5.13. How are actions carried out through triggers on a source replicated to a replica?

<table border="0" style="width: 100%;"><colgroup><col align="left" width="1%"/><col/></colgroup><tbody><tr class="question"><td align="left" valign="top"><p><b>A.5.1.</b></p></td><td align="left" valign="top"><p> Where can I find the documentation for MySQL 9.5 triggers? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> See Section 27.4, “Using Triggers”. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.5.2.</b></p></td><td align="left" valign="top"><p> Is there a discussion forum for MySQL Triggers? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Yes. It is available at https://forums.mysql.com/list.php?99. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.5.3.</b></p></td><td align="left" valign="top"><p> Does MySQL have statement-level or row-level triggers? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> All triggers are <code class="literal">FOR EACH ROW</code>; that is, the trigger is activated for each row that is inserted, updated, or deleted. MySQL does not support triggers using <code class="literal">FOR EACH STATEMENT</code>. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.5.4.</b></p></td><td align="left" valign="top"><p> Are there any default triggers? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Not explicitly. MySQL does have specific special behavior for some <code class="literal">TIMESTAMP</code> columns, as well as for columns which are defined using <code class="literal">AUTO_INCREMENT</code>. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.5.5.</b></p></td><td align="left" valign="top"><p> How are triggers managed in MySQL? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Triggers can be created using the <code class="literal">CREATE TRIGGER</code> statement, and dropped using <code class="literal">DROP TRIGGER</code>. See Section 15.1.26, “CREATE TRIGGER Statement”, and Section 15.1.39, “DROP TRIGGER Statement”, for more about these statements. </p><p> Information about triggers can be obtained by querying the <code class="literal">INFORMATION_SCHEMA.TRIGGERS</code> table. See Section 28.3.50, “The INFORMATION_SCHEMA TRIGGERS Table”. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.5.6.</b></p></td><td align="left" valign="top"><p> Is there a way to view all triggers in a given database? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Yes. You can obtain a listing of all triggers defined on database <code class="literal">dbname</code> using a query on the <code class="literal">INFORMATION_SCHEMA.TRIGGERS</code> table such as the one shown here: </p><pre class="programlisting copytoclipboard language-sql"><code class="language-sql">SELECT TRIGGER_NAME, EVENT_MANIPULATION, EVENT_OBJECT_TABLE, ACTION_STATEMENT FROM INFORMATION_SCHEMA.TRIGGERS WHERE TRIGGER_SCHEMA='<em class="replaceable">dbname</em>';</code></pre><p> For more information about this table, see Section 28.3.50, “The INFORMATION_SCHEMA TRIGGERS Table”. </p><p> You can also use the <code class="literal">SHOW TRIGGERS</code> statement, which is specific to MySQL. See Section 15.7.7.41, “SHOW TRIGGERS Statement”. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.5.7.</b></p></td><td align="left" valign="top"><p> Where are triggers stored? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Triggers are stored in the <code class="literal">mysql.triggers</code> system table, which is part of the data dictionary. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.5.8.</b></p></td><td align="left" valign="top"><p> Can a trigger call a stored procedure? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Yes. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.5.9.</b></p></td><td align="left" valign="top"><p> Can triggers access tables? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> A trigger can access both old and new data in its own table. A trigger can also affect other tables, but it is not permitted to modify a table that is already being used (for reading or writing) by the statement that invoked the function or trigger. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.5.10.</b></p></td><td align="left" valign="top"><p> Can a table have multiple triggers with the same trigger event and action time? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> In MySQL 9.5, it is possible to define multiple triggers for a given table that have the same trigger event and action time. For example, you can have two <code class="literal">BEFORE UPDATE</code> triggers for a table. By default, triggers that have the same trigger event and action time activate in the order they were created. To affect trigger order, specify a clause after <code class="literal">FOR EACH ROW</code> that indicates <code class="literal">FOLLOWS</code> or <code class="literal">PRECEDES</code> and the name of an existing trigger that also has the same trigger event and action time. With <code class="literal">FOLLOWS</code>, the new trigger activates after the existing trigger. With <code class="literal">PRECEDES</code>, the new trigger activates before the existing trigger. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.5.11.</b></p></td><td align="left" valign="top"><p> Is it possible for a trigger to update tables on a remote server? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Yes. A table on a remote server could be updated using the <code class="literal">FEDERATED</code> storage engine. (See Section 18.8, “The FEDERATED Storage Engine”). </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.5.12.</b></p></td><td align="left" valign="top"><p> Do triggers work with replication? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Yes. However, the way in which they work depends whether you are using MySQL's <span class="quote">“<span class="quote">classic</span>”</span> statement-based or row-based replication format. </p><p> When using statement-based replication, triggers on the replica are executed by statements that are executed on the source (and replicated to the replica). </p><p> When using row-based replication, triggers are not executed on the replica due to statements that were run on the source and then replicated to the replica. Instead, when using row-based replication, the changes caused by executing the trigger on the source are applied on the replica. </p><p> For more information, see Section 19.5.1.37, “Replication and Triggers”. </p></td></tr><tr class="question"><td align="left" valign="top"><p><b>A.5.13.</b></p></td><td align="left" valign="top"><p> How are actions carried out through triggers on a source replicated to a replica? </p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> Again, this depends on whether you are using statement-based or row-based replication. </p><p><b>Statement-based replication. </b> First, the triggers that exist on a source must be re-created on the replica server. Once this is done, the replication flow works as any other standard DML statement that participates in replication. For example, consider a table <code class="literal">EMP</code> that has an <code class="literal">AFTER</code> insert trigger, which exists on a replication source server. The same <code class="literal">EMP</code> table and <code class="literal">AFTER</code> insert trigger exist on the replica server as well. The replication flow would be: </p> <div class="orderedlist"> <ol class="orderedlist" type="1"><li class="listitem"><p> An <code class="literal">INSERT</code> statement is made to <code class="literal">EMP</code>. </p></li><li class="listitem"><p> The <code class="literal">AFTER</code> trigger on <code class="literal">EMP</code> activates. </p></li><li class="listitem"><p> The <code class="literal">INSERT</code> statement is written to the binary log. </p></li><li class="listitem"><p> The replica picks up the <code class="literal">INSERT</code> statement to <code class="literal">EMP</code> and executes it. </p></li><li class="listitem"><p> The <code class="literal">AFTER</code> trigger on <code class="literal">EMP</code> that exists on the replica activates. </p></li></ol> </div> <p><b>Row-based replication. </b> When you use row-based replication, the changes caused by executing the trigger on the source are applied on the replica. However, the triggers themselves are not actually executed on the replica under row-based replication. This is because, if both the source and the replica applied the changes from the source and, in addition, the trigger causing these changes were applied on the replica, the changes would in effect be applied twice on the replica, leading to different data on the source and the replica. </p><p> In most cases, the outcome is the same for both row-based and statement-based replication. However, if you use different triggers on the source and replica, you cannot use row-based replication. (This is because the row-based format replicates the changes made by triggers executing on the source to the replicas, rather than the statements that caused the triggers to execute, and the corresponding triggers on the replica are not executed.) Instead, any statements causing such triggers to be executed must be replicated using statement-based replication. </p><p> For more information, see Section 19.5.1.37, “Replication and Triggers”. </p></td></tr></tbody></table>
