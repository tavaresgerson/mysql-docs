#### 25.6.3.1 NDB Cluster Logging Management Commands

**ndb_mgm** supports a number of management commands related to the cluster log and node logs. In the listing that follows, *`node_id`* denotes either a storage node ID or the keyword `ALL`, which indicates that the command should be applied to all of the cluster's data nodes.

* `CLUSTERLOG ON`

  Turns the cluster log on.

* `CLUSTERLOG OFF`

  Turns the cluster log off.

* `CLUSTERLOG INFO`

  Provides information about cluster log settings.

* `node_id CLUSTERLOG category=threshold`

  Logs *`category`* events with priority less than or equal to *`threshold`* in the cluster log.

* `CLUSTERLOG TOGGLE severity_level`

  Toggles cluster logging of events of the specified *`severity_level`*.

The following table describes the default setting (for all data nodes) of the cluster log category threshold. If an event has a priority with a value lower than or equal to the priority threshold, it is reported in the cluster log.

Note

Events are reported per data node, and that the threshold can be set to different values on different nodes.

**Table 25.26 Cluster log categories, with default threshold setting**

<table><thead><tr> <th>Category</th> <th>Default threshold (All data nodes)</th> </tr></thead><tbody><tr> <td><code>STARTUP</code></td> <td><code>7</code></td> </tr><tr> <td><code>SHUTDOWN</code></td> <td><code>7</code></td> </tr><tr> <td><code>STATISTICS</code></td> <td><code>7</code></td> </tr><tr> <td><code>CHECKPOINT</code></td> <td><code>7</code></td> </tr><tr> <td><code>NODERESTART</code></td> <td><code>7</code></td> </tr><tr> <td><code>CONNECTION</code></td> <td><code>8</code></td> </tr><tr> <td><code>ERROR</code></td> <td><code>15</code></td> </tr><tr> <td><code>INFO</code></td> <td><code>7</code></td> </tr><tr> <td><code>BACKUP</code></td> <td><code>15</code></td> </tr><tr> <td><code>CONGESTION</code></td> <td><code>7</code></td> </tr><tr> <td><code>SCHEMA</code></td> <td><code>7</code></td> </tr></tbody></table>

The `STATISTICS` category can provide a great deal of useful data. See Section 25.6.3.3, “Using CLUSTERLOG STATISTICS in the NDB Cluster Management Client”, for more information.

Thresholds are used to filter events within each category. For example, a `STARTUP` event with a priority of 3 is not logged unless the threshold for `STARTUP` is set to 3 or higher. Only events with priority 3 or lower are sent if the threshold is 3.

The following table shows the event severity levels.

Note

These correspond to Unix `syslog` levels, except for `LOG_EMERG` and `LOG_NOTICE`, which are not used or mapped.

**Table 25.27 Event severity levels**

<table><col style="width: 20%"/><col style="width: 20%"/><col style="width: 60%"/><thead><tr> <th>Severity Level Value</th> <th>Severity</th> <th>Description</th> </tr></thead><tbody><tr> <th>1</th> <td><code>ALERT</code></td> <td>A condition that should be corrected immediately, such as a corrupted system database</td> </tr><tr> <th>2</th> <td><code>CRITICAL</code></td> <td>Critical conditions, such as device errors or insufficient resources</td> </tr><tr> <th>3</th> <td><code>ERROR</code></td> <td>Conditions that should be corrected, such as configuration errors</td> </tr><tr> <th>4</th> <td><code>WARNING</code></td> <td>Conditions that are not errors, but that might require special handling</td> </tr><tr> <th>5</th> <td><code>INFO</code></td> <td>Informational messages</td> </tr><tr> <th>6</th> <td><code>DEBUG</code></td> <td>Debugging messages used for <code>NDBCLUSTER</code> development</td> </tr></tbody></table>

Event severity levels can be turned on or off using `CLUSTERLOG TOGGLE`. If a severity level is turned on, then all events with a priority less than or equal to the category thresholds are logged. If the severity level is turned off then no events belonging to that severity level are logged.

Important

Cluster log levels are set on a per **ndb_mgmd**, per subscriber basis. This means that, in an NDB Cluster with multiple management servers, using a `CLUSTERLOG` command in an instance of **ndb_mgm** connected to one management server affects only logs generated by that management server but not by any of the others. This also means that, should one of the management servers be restarted, only logs generated by that management server are affected by the resetting of log levels caused by the restart.
