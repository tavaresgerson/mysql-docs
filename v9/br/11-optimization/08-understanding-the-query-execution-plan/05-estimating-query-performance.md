### 10.8.5 Estimação do Desempenho das Consultas

Na maioria dos casos, você pode estimar o desempenho das consultas contando os acessos ao disco. Para tabelas pequenas, geralmente é possível encontrar uma linha em um único acesso ao disco (porque o índice provavelmente está em cache). Para tabelas maiores, você pode estimar que, usando índices de árvore B, são necessários esses acessos para encontrar uma linha: `log(número_de_linhas) / log(tamanho_do_bloco_do_índice / 3 * 2 / (tamanho_do_índice + tamanho_do_ponteiro_de_dados)) + 1`.

No MySQL, um bloco de índice geralmente é de 1.024 bytes e o ponteiro de dados geralmente é de quatro bytes. Para uma tabela de 500.000 linhas com um comprimento do valor da chave de três bytes (o tamanho de `MEDIUMINT` - INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT)`), a fórmula indica `log(500.000)/log(1024/3*2/(3+4)) + 1` = `4` acessos.

Esse índice exigiria o armazenamento de cerca de 500.000 * 7 * 3/2 = 5,2 MB (assumindo uma taxa típica de preenchimento do buffer de índice de 2/3), então você provavelmente tem grande parte do índice na memória e, portanto, precisa de apenas uma ou duas chamadas para ler os dados para encontrar a linha.

Para escritas, no entanto, são necessários quatro solicitações de acesso ao disco para encontrar onde colocar um novo valor de índice e normalmente dois acessos para atualizar o índice e escrever a linha.

A discussão anterior não significa que o desempenho da sua aplicação diminua lentamente por log *`N`*. Enquanto tudo estiver em cache pelo sistema operacional ou pelo servidor MySQL, as coisas ficam apenas marginalmente mais lentas à medida que a tabela cresce. Depois que os dados ficam grandes demais para serem cacheados, as coisas começam a ficar muito mais lentas até que suas aplicações sejam limitadas apenas por acessos ao disco (que aumentam por log *`N`*). Para evitar isso, aumente o tamanho do cache de chaves à medida que os dados crescem. Para tabelas `MyISAM`, o tamanho do cache de chaves é controlado pela variável de sistema `key_buffer_size`. Veja a Seção 7.1.1, “Configurando o Servidor”.