#### 17.9.1.6 Compressão para cargas de trabalho OLTP

Tradicionalmente, o recurso de compressão do `InnoDB` era recomendado principalmente para cargas de trabalho de leitura ou de leitura predominante, como em uma configuração de data warehouse. O surgimento de dispositivos de armazenamento SSD, que são rápidos, mas relativamente pequenos e caros, torna a compressão atraente também para cargas de trabalho `OLTP`: sites interativos de alto tráfego podem reduzir seus requisitos de armazenamento e suas operações de I/O por segundo (IOPS) usando tabelas compactadas com aplicativos que realizam operações frequentes de `INSERT`, `UPDATE` e `DELETE`.

Essas opções de configuração permitem ajustar a forma como a compressão funciona para uma instância específica do MySQL, com ênfase no desempenho e na escalabilidade para operações intensivas em escrita:

* `innodb_compression_level` permite ajustar o grau de compressão para cima ou para baixo. Um valor mais alto permite que mais dados sejam armazenados em um dispositivo de armazenamento, às custas de mais overhead de CPU durante a compressão. Um valor mais baixo permite reduzir o overhead de CPU quando o espaço de armazenamento não é crítico ou você espera que os dados não sejam especialmente compressivos.

* `innodb_compression_failure_threshold_pct` especifica um ponto de corte para falhas de compressão durante atualizações em uma tabela compactada. Quando esse limiar é ultrapassado, o MySQL começa a deixar espaço livre adicional dentro de cada nova página compactada, ajustando dinamicamente a quantidade de espaço livre até o percentual da tamanho da página especificado por `innodb_compression_pad_pct_max`

* `innodb_compression_pad_pct_max` permite ajustar a quantidade máxima de espaço reservado dentro de cada página para registrar alterações em linhas compactadas, sem precisar compactar toda a página novamente. Quanto maior o valor, mais alterações podem ser registradas sem recomprimir a página. O MySQL usa uma quantidade variável de espaço livre para as páginas dentro de cada tabela compactada, apenas quando uma porcentagem designada de operações de compactação "falha" durante a execução, exigindo uma operação cara para dividir a página compactada.

* `innodb_log_compressed_pages` permite desabilitar a escrita de imagens de páginas recompactadas no log de refazer. A recompactação pode ocorrer quando alterações são feitas em dados compactados. Esta opção está habilitada por padrão para evitar corrupções que poderiam ocorrer se uma versão diferente do algoritmo de compactação `zlib` for usada durante a recuperação. Se você tem certeza de que a versão do `zlib` não está sujeita a alterações, desabilite `innodb_log_compressed_pages` para reduzir a geração do log de refazer para cargas de trabalho que modificam dados compactados.

Como trabalhar com dados compactados às vezes envolve manter tanto versões compactadas quanto não compactadas de uma página na memória ao mesmo tempo, ao usar compactação com uma carga de trabalho de estilo OLTP, esteja preparado para aumentar o valor da opção de configuração `innodb_buffer_pool_size`.