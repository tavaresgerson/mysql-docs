#### 17.9.1.1 Visão geral da compressão de tabelas

Como os processadores e as memórias cache aumentaram em velocidade mais do que os dispositivos de armazenamento em disco, muitas cargas de trabalho estão limitadas ao disco. A compressão de dados permite um tamanho de banco de dados menor, redução do I/O e melhoria do desempenho, com o pequeno custo de aumento da utilização da CPU. A compressão é especialmente valiosa para aplicações intensivas em leitura, em sistemas com RAM suficiente para manter os dados frequentemente usados na memória.

Uma tabela `InnoDB` criada com `ROW_FORMAT=COMPRESSED` pode usar um tamanho de página menor no disco do que o valor configurado de `innodb_page_size`. Páginas menores requerem menos I/O para leitura e escrita no disco, o que é especialmente valioso para dispositivos SSD.

O tamanho de página comprimido é especificado através do parâmetro `CREATE TABLE` ou `ALTER TABLE` `KEY_BLOCK_SIZE`. O tamanho de página diferente exige que a tabela seja colocada em um espaço de tabelas por arquivo ou espaço de tabelas geral, em vez do espaço de tabelas do sistema, pois o espaço de tabelas do sistema não pode armazenar tabelas comprimidas. Para mais informações, consulte a Seção 17.6.3.2, “Espaços de tabelas por arquivo”, e a Seção 17.6.3.3, “Espaços de tabelas gerais”.

O nível de compressão é o mesmo, independentemente do valor de `KEY_BLOCK_SIZE`. À medida que você especifica valores menores para `KEY_BLOCK_SIZE`, você obtém os benefícios de I/O de páginas cada vez menores. Mas se você especificar um valor que é muito pequeno, há um overhead adicional para reorganizar as páginas quando os valores dos dados não podem ser comprimidos o suficiente para caber várias linhas em cada página. Há um limite rígido para quão pequeno o `KEY_BLOCK_SIZE` pode ser para uma tabela, com base nas comprimentos das colunas chave de cada um de seus índices. Especifique um valor que é muito pequeno, e a instrução `CREATE TABLE` ou `ALTER TABLE` falha.

No pool de buffer, os dados comprimidos são mantidos em pequenas páginas, com um tamanho de página baseado no valor de `KEY_BLOCK_SIZE`. Para extrair ou atualizar os valores das colunas, o MySQL também cria uma página não comprimida no pool de buffer com os dados não comprimidos. Dentro do pool de buffer, quaisquer atualizações na página não comprimida também são reescritas de volta para a página comprimida equivalente. Você pode precisar dimensionar seu pool de buffer para acomodar os dados adicionais de páginas tanto comprimidas quanto não comprimidas, embora as páginas não comprimidas sejam expulsas do pool de buffer quando o espaço for necessário e, em seguida, recomprimidas novamente na próxima vez que forem acessadas.