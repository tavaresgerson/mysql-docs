### 17.8.5 Configurando o Número de Fios de E/S de InnoDB em Segundo Plano

O `InnoDB` utiliza threads em segundo plano para atender a vários tipos de solicitações de E/S. Você pode configurar o número de threads em segundo plano que atendem a solicitações de E/S de leitura e escrita em páginas de dados usando os parâmetros de configuração `innodb_read_io_threads` e `innodb_write_io_threads`. Esses parâmetros indicam o número de threads em segundo plano usadas para solicitações de leitura e escrita, respectivamente. Eles são eficazes em todas as plataformas suportadas. Você pode definir valores para esses parâmetros no arquivo de opções do MySQL (`my.cnf` ou `my.ini`); você não pode alterar valores dinamicamente. O valor padrão para `innodb_read_io_threads` é o número de processadores lógicos disponíveis no sistema dividido por 2, com um valor padrão mínimo de `4`. O valor padrão para `innodb_write_io_threads` é 4. Os valores permitidos variam de `1-64` para ambas as opções.

O propósito dessas opções de configuração é tornar o `InnoDB` mais escalável em sistemas de alto desempenho. Cada thread em segundo plano pode lidar com até 256 solicitações de E/S pendentes. Uma das principais fontes de E/S em segundo plano são solicitações de pré-leitura. O `InnoDB` tenta equilibrar a carga de solicitações recebidas de forma que a maioria das threads em segundo plano compartilhe o trabalho igualmente. O `InnoDB` também tenta alocar solicitações de leitura da mesma extensão para o mesmo thread, para aumentar as chances de coalescer as solicitações. Se você tiver um subsistema de E/S de alto desempenho e vir mais de 64 × `innodb_read_io_threads` solicitações de leitura pendentes na saída `SHOW ENGINE INNODB STATUS`, você pode melhorar o desempenho aumentando o valor de `innodb_read_io_threads`.

Nos sistemas Linux, o `InnoDB` usa o subsistema de E/S assíncrona por padrão para realizar solicitações de leitura à frente e escrita para páginas de arquivos de dados, o que altera a forma como os threads de segundo plano do `InnoDB` atendem a esses tipos de solicitações de E/S. Para mais informações, consulte a Seção 17.8.6, “Usando E/S Assíncrona no Linux”.

Para mais informações sobre o desempenho de E/S do `InnoDB`, consulte a Seção 10.5.8, “Otimizando o E/S de Disco do InnoDB”.