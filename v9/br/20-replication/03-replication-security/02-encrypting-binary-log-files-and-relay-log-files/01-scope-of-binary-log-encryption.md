#### 19.3.2.1 Âmbito da Criptografia de Log Binário

Quando a criptografia de log binário está ativa para uma instância do servidor MySQL, a cobertura de criptografia é a seguinte:

* Os dados em repouso que são escritos nos arquivos de log binário e nos arquivos de log de retransmissão são criptografados a partir do momento em que a criptografia é iniciada, usando a arquitetura de criptografia em duas camadas descrita acima. Os arquivos de log binário e os arquivos de log de retransmissão existentes que estavam presentes no servidor quando você iniciou a criptografia não são criptografados. Você pode excluir esses arquivos quando eles não forem mais necessários.

* Os dados em movimento no fluxo de eventos de replicação, que são enviados aos clientes MySQL, incluindo o **mysqlbinlog**, são descriptografados para transmissão e, portanto, devem ser protegidos durante a transmissão pelo uso da criptografia de conexão (consulte a Seção 8.3, “Uso de Conexões Criptografadas” e a Seção 19.3.1, “Configuração da Replicação para Usar Conexões Criptografadas”).

* Os dados em uso que são mantidos nos caches de transações e declarações de log binário durante uma transação estão no formato não criptografado no buffer de memória que armazena o cache. Os dados são escritos em um arquivo temporário no disco se ultrapassarem o espaço disponível no buffer de memória. Quando a criptografia do log binário está ativa no servidor, os arquivos temporários usados para armazenar o cache do log binário são criptografados usando o modo AES-CTR (AES Counter) para criptografia de fluxo. Como os arquivos temporários são voláteis e ligados a um único processo, eles são criptografados usando criptografia de nível único, usando uma senha de arquivo gerada aleatoriamente e um vetor de inicialização que existem apenas na memória e nunca são armazenados no disco ou no chaveiro. Após cada transação ser confirmada, o cache do log binário é redefinido: o buffer de memória é limpo, qualquer arquivo temporário usado para armazenar o cache do log binário é truncado e uma nova senha de arquivo e vetor de inicialização são geradas aleatoriamente para uso com a próxima transação. Esse redefinimento também ocorre quando o servidor é reiniciado após um desligamento normal ou uma parada inesperada.

Nota

Se você usar `LOAD DATA` quando `binlog_format=STATEMENT` está definido, o que não é recomendado, pois a declaração é considerada insegura para a replicação baseada em declarações, um arquivo temporário contendo os dados é criado na replica onde as alterações são aplicadas. Esses arquivos temporários não são criptografados quando a criptografia do log binário está ativa no servidor. Use o formato de log binário baseado em linhas ou misto, que não criam os arquivos temporários.